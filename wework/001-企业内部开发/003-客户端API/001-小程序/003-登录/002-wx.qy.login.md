---
title: "wx.qy.login"
doc_id: 16055
category_id: 91506
source_url: https://developer.work.weixin.qq.com/document/path/16055
---
### wx.qy.login(Object object)

获取企业微信派发的临时登录凭证

>注意：在企业微信中的小程序，调用wx.qy.login获取到code之后，需要再调用[code2Session](#16056)接口，才真正完成登录流程。

#### 参数

##### Object object

| 参数名 | 类型 | 必填 | 说明 |企业微信版本要求 |
| -------- | -------- | ---- | ------------------------ | ---- |
| timeout | Number | 否 | 超时时间，单位 ms | |
| suiteId | String | 否 | 第三方应用的suiteid，自建应用不填。若第三方小程序绑定多个第三方应用时，建议填上该字段 | ≥3.1.8 |
| success | Function | 否 | 接口调用成功的回调函数 | |
| fail | Function | 否 | 接口调用失败的回调函数 | |
| complete | Function | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） | | |

###### object.success 回调函数
**参数**

**Object res**

| 参数名 | 类型 | 说明 |
| ------ | ------ | ---------------------------------------- |
| errMsg | String | 调用结果 |
| code | String | 用户登录凭证（有效期五分钟）。开发者需要在开发者服务器后台调用 api，使用 code 换取 userid 和 session_key 等信息 |

#### 示例代码
```js
//app.js
App({
 onLaunch: function() {
 wx.qy.login({
 suiteId:'wwxxxxxx', //非必填，第三方应用的suiteid，自建应用不填。若第三方小程序绑定多个第三方应用时，建议填上该字段
 success: function(res) {
 if (res.code) {
 //发起网络请求
 wx.request({
 url: 'https://test.com/onLogin',
 data: {
 code: res.code
 }
 })
 } else {
 console.log('登录失败！' + res.errMsg)
 }
 }
 });
 }
})
```
