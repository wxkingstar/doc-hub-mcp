---
title: "wx.qy.createCorpGroupChat"
doc_id: 29841
category_id: 94426
source_url: https://developer.work.weixin.qq.com/document/path/29841
---
创建[企业互联](#24909)/[上下游](#35931)会话接口

#### 示例代码：

```js

wx.qy.createCorpGroupChat({
  groupName: "讨论组", // 必填，会话名称。单聊时该参数传入空字符串""即可。
 userIds: ["lisi","lisi2"], //参与会话的企业成员列表，仅自建应用使用，第三方应用会忽略该字段
  openUserIds: ["wabc3","wbcde"],// 参与会话的企业成员列表，仅第三方应用使用，自建应用会忽略该字段
  externalUserIds:["exid1", "exid2"], // 外部联系人id
 corpGroupUserIds: [ // 非必填， 参与会话的企业互联/上下游成员列表
 {
 corpId:"ww3333",         // 企业CORPID
       userId:"userid123",         // 成员ID，仅自建应用使用
       openUserId:"wx1111"         // 成员OPEN_USERID，仅第三方应用使用
 },
     {
 corpId:"ww4444",        // 企业CORPID
       userId:"userid123",         // 成员ID，仅自建应用使用
       openUserId:"wx1111"         // 成员OPEN_USERID，仅第三方应用使用
 }
 ],
 success: function(res) {
 // 回调
   var chatId = res.chatId;
 },
 fail: function(res) {
 // 失败处理
   console.log(res)
 }
});

```
>**调用前提：**
> 此接口仅在企业微信3.1.8及以后版本支持
> 必须先调用过wx.qy.login，且session_key未过期，开发者可调用checkSession 检查当前登录态
> 当前成员必须在应用的可见范围。
> 企业必须开启互联群功能
> 仅限企业互联和上下游企业可调用
> 如果创建的会话有微信联系人，群成员人数不能超过40人
> 上下游及外部联系人仅企业微信3.1.20及以后版本支持
> 群人数不能超过2000人
> 当前成员为下游企业成员时，上下游空间中的"允许外部单位之间互相查看"需要打开群成员中才可以包含其他下游企业成员
> 仅支持ios，android和win

#### 请求参数

##### Object object

| 参数名 | 类型 | 必填 | 说明 |
| --------------- | -------- | ------------------------------- | ---------------------------------------- |
| groupName | String | 否 | 会话名称。单聊时该参数传入空字符串""即可 |
| userIds | Array | 否（userIds和corpGroupUserIds.userid至少填一个） |参与会话的企业成员列表，仅自建应用使用，第三方应用会忽略该字段 |
| openUserIds | Array | 否（openUserIds和corpGroupUserIds.openUserIds至少填一个） | 参与会话的企业成员列表，仅第三方应用使用，自建应用会忽略该字段 |
| externalUserIds | Array | 否 | 参与会话的外部联系人列表，与发起人需要有好友关系，没有好友关系的成员会被忽略 |
| corpGroupUserIds | Array | 否（userIds和corpGroupUserIds至少填一个） | 参与会话的企业互联/上下游成员列表 |
| corpGroupUserIds.corpId | String | 是 |企业互联/上下游企业corpId |
| corpGroupUserIds.userId | String | 否（corpGroupUserIds.userId和corpGroupUserIds.openUserId至少填一个）|企业互联/上下游企业成员userId, 仅自建应用使用 |
| corpGroupUserIds.openUserId | String | 否（corpGroupUserIds.userId和corpGroupUserIds.openUserId至少填一个）| 企业互联/上下游企业成员openUserId，仅第三方应用使用 |
| success | Function | 否 | 接口调用成功的回调函数 |
| fail | Function | 否 | 接口调用失败的回调函数 |

#### 返回结果

##### Object object

| 参数名 | 类型 | 说明 |
| --------------- | -------- | ------------------------------- | ---------------------------------------- |
| res.chatId | String | 创建的群聊id |

## 错误列表

|res.errMsg|说明|
|:-----------|:------------|
|createCorpGroupChat:ok |执行成功|
|createCorpGroupChat:fail no session or expired |没有调用 wx.qy.login，或者 session_key 已过期|
|createCorpGroupChat:fail exceed user id list size |超过人数上限|
|createCorpGroupChat:fail exceed external user id list size |超过包含外部联系人群人数上限|
|createCorpGroupChat:fail invalid parameter |参数不合法|
|createCorpGroupChat:fail need open corp group chat|企业未开启企业互联/上下游群功能|
