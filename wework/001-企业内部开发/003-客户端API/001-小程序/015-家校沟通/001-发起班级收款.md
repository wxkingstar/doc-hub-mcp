---
title: "发起班级收款"
doc_id: 30232
category_id: 94788
source_url: https://developer.work.weixin.qq.com/document/path/30232
---
该接口可以用于老师对学生家长发起付款请求。接口调用成功后会通过家校通知发送付款小程序给家长。

**接口定义**
```
wx.qy.createSchoolPayment({
    projectName:'1班班费', //收款项目名称
 amount：100， //收款金额，每个学生需付费的金额，单位为分
 payers：{
 students:['zhangshan','lisi'], //需要收款的学生列表
 departments:[1,2], //需要收款的家校通讯录部门列表、支持班级，年级，校区
 }
 }, 
 success: function(res) {
 var paymentId = res.paymentId ; //收款项目id
 });
```

>注：用户可以手动调整收款金额，收款项目和收款范围。
 通过接口发起的收款，默认收款账户未“我的微信零钱账户”，且不可修改。若用户未授权个人付款码权限，会唤起授权付款码权限页面，授权完成返回页面后会返回错误信息。'require authorize the payment qr code'。用户授权完成后可引导用户重新发起收款。
  
**输入参数说明：**

| 参数 |类型|是否必须| 说明 |
| -------- | ---- | ---- | ---- | 
| projectName | String|否|收款项目名称，最多32个字。若为空或者超出最大长度，唤起原生收款页面时，客户端会忽略该字段，由用户填写 |
| amount | Int|否|收款金额，每个学生需付费的金额，单位为分。可为空。限额100000。若非法客户端会忽略该字段|
| payers | Object|否|收款范围。收款范围内展开的学生个数不能超过1000人。若paymentPerm展开后包含学生数超过1000人，报错'exceed students limit'。传入的收款范围若不在老师管理的范围，客户端会过滤掉不展示范围外的数据。内详见Payers结构说明|

**Payers结构说明**

| 参数 |类型|是否必须| 说明 |
| -------- | ---- | ---- | ---- | 
| students | Array|否|需要收款的学生列表 |
| departments | Array|否|需要收款的家校通讯录部门列表、支持班级，年级，校区|

**返回参数 json 结构示例：**
```
{
 "errMsg":"createSchoolPayment:ok"
 "paymentId": "xxxxx"
}
```

**返回结果说明**

| 参数 |类型|是否必须| 说明 |
| -------- | ---- | ---- | ---- | 
| paymentId | String|是|收款项目id，可使用该id调用“[获取学生付款结果](#30127)”接口 |

 **接口权限说明：** 
1. 仅企业微信客户端3.1.10版本及以上可用（mac端暂不支持）
2. 必须先调用过wx.qy.login，且session_key未过期，开发者可调用checkSession 检查当前登录态
3. 仅支持配置在家长可使用范围内的应用；
4. 企业必须已验证或者已认证才允许调用；
5. 发起的用户必须在应用可见范围，且实名。
