---
title: "获取会话同意情况"
doc_id: 17367
category_id: 91782
source_url: https://developer.work.weixin.qq.com/document/path/17367
---
企业可通过下述接口，获取会话中外部成员的同意情况。单聊请求调用频率不可超过2500次/分钟，群聊请求调用频率不可超过1500次/分钟。

**单聊请求地址：**https://qyapi.weixin.qq.com/cgi-bin/msgaudit/check_single_agree?access_token=ACCESS_TOKEN

**请求方式：**POST（**HTTPS**）

**请求示例：**

```
{
"info":[
{"userid":"XuJinSheng","exteranalopenid":"wmeDKaCQAAGd9oGiQWxVsAKwV2HxNAAA"},{"userid":"XuJinSheng","exteranalopenid":"wmeDKaCQAAIQ_p7ACn_jpLVBJSGocAAA"},
{"userid":"XuJinSheng","exteranalopenid":"wmeDKaCQAAPE_p7ABnxkpLBBJSGocAAA"}
]
}

```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| info | 是 | 待查询的会话信息，数组 |
| userid | 是 | 内部成员的userid |
| exteranalopenid | 是 | 外部成员的exteranalopenid |

此接口可以批量查询userid与externalopenid之间的会话同意情况。

**备注说明：**
目前一次请求只支持最多100个查询条目，超过此限制的请求会被拦截，请调用方减少单次请求的查询个数。

**权限说明：**
企业需要使用会话内容存档应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）；

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "agreeinfo" : [
 {
 "status_change_time" : 1562766651,
 "userid" : "XuJinSheng",
 "exteranalopenid" : "wmeDKaCPAAGdvxciQWxVsAKwV2HxNAAA",
   "agree_status":"Agree"
 },
  {
 "status_change_time" : 1562766651,
 "userid" : "XuJinSheng",
 "exteranalopenid" : "wmeDKaCQAAIQ_p7ACnxksfeBJSGocAAA",
   "agree_status":"Disagree"
 },
  {
 "status_change_time" : 1562766651,
 "userid" : "XuJinSheng",
 "exteranalopenid" : "wmeDKaCwAAIQ_p7ACnxckLBBJSGocAAA",
   "agree_status":"Agree"
 }
 ]
}

```
**返回字段说明：**

| 字段名 | 说明 |
| ------------ | ------------ |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| agreeinfo| 同意情况|
| agree_status| 同意:"Agree"，不同意:"Disagree"|
| status_change_time| 同意状态改变的具体时间，utc时间|

**群聊请求地址：**https://qyapi.weixin.qq.com/cgi-bin/msgaudit/check_room_agree?access_token=ACCESS_TOKEN

**请求方式：**POST（**HTTPS**）

**请求示例：**

```
{
"roomid":"wrjc7bDwAASxc8tZvBErFE02BtPWyAAA"
}

```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| roomid | 是 | 待查询的roomid |

此接口可以查询对应roomid里面所有外企业的外部联系人的同意情况

**权限说明：**
企业需要使用会话内容存档应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）；

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "agreeinfo" : [
 {
 "status_change_time" : 1562766651,
 "exteranalopenid" : "wmeDKaCQAAGdtHdiQWxVadfwV2HxNAAA",
   "agree_status":"Agree"
 },
  {
 "status_change_time" : 1562766651,
 "exteranalopenid" : "wmeDKaCQAAIQ_p9ACyiopLBBJSGocAAA",
   "agree_status":"Disagree"
 },
  {
 "status_change_time" : 1562766651,
 "exteranalopenid" : "wmeDKaCQAAIQ_p9ACnxacyBBJSGocAAA",
   "agree_status":"Agree"
 }
 ]
}

```
**返回字段说明：**

| 字段名 | 说明 |
| ------------ | ------------ |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| agreeinfo| 同意情况|
| agree_status| 同意:"Agree"，不同意:"Disagree"|
| status_change_time| 同意状态改变的具体时间，utc时间|
| exteranalopenid| 群内外部联系人的externalopenid|
