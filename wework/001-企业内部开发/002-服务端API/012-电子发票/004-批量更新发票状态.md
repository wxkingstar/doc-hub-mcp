---
title: "批量更新发票状态"
doc_id: 11634
category_id: 90286
source_url: https://developer.work.weixin.qq.com/document/path/90286
---
最后更新：2020/10/10

**接口说明：**发票平台可以通过该接口对某个成员的一批发票进行锁定、解锁和报销操作。注意，报销状态为不可逆状态，请开发者慎重调用。

**请求方式：**POST（**HTTPS**）
**请求地址**：https://qyapi.weixin.qq.com/cgi-bin/card/invoice/reimburse/updatestatusbatch?access_token=ACCESS_TOKEN

**请求包体：**

```
{
 "openid":"OPENID" ,
 "reimburse_status":"INVOICE_REIMBURSE_INIT",
 "invoice_list":
 [
 {"card_id":"cardid_1","encrypt_code":"encrypt_code_1"},
 {"card_id":"cardid_2","encrypt_code":"encrypt_code_2"}
 ]
}

```
**参数说明：**

|参数|必须|说明|
|----|----|----|
|access_token|是|调用接口凭证|
|openid|是|用户openid，可用["userid与openid互换接口"](#11279)获取
|reimburse_status|是|发票报销状态 INVOICE_REIMBURSE_INIT：发票初始状态，未锁定；INVOICE_REIMBURSE_LOCK：发票已锁定，无法重复提交报销;INVOICE_REIMBURSE_CLOSURE:发票已核销，从用户卡包中移除|
|invoice_list|是|发票列表，必须全部属于同一个openid|
|card_id|是|发票卡券的card_id|
|encrypt_code|是|发票卡券的加密code，和card_id共同构成一张发票卡券的唯一标识|

**权限说明：**

仅认证的企业微信账号有接口权限

**返回数据：**

```
{
 "errcode":0,
 "errmsg":"ok",
}

```

注：
1. 报销方须保证在报销、锁定、解锁后及时将状态同步至微信端，保证用户发票可以正常使用
2. 批量更新发票状态接口为事务性操作，如果其中一张发票更新失败，列表中的其它发票状态更新也会无法执行，恢复到接口调用前的状态
