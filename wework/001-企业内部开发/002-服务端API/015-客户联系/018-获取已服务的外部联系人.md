---
title: "获取已服务的外部联系人"
doc_id: 50223
category_id: 99434
source_url: https://developer.work.weixin.qq.com/document/path/50223
---
企业可通过此接口获取所有已服务的外部联系人，及其添加人和加入的群聊。外部联系人分为客户和其他外部联系人，如果是客户，接口将返回外部联系人临时ID和externaluserid；如果是其他外部联系人，接口将只返回外部联系人临时ID。

企业可通过外部联系人临时ID排除重复数据，外部联系人临时ID有效期为4小时。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/contact_list?access_token=ACCESS_TOKEN

**请求示例：**

```
{
  "cursor":"CURSOR",
   "limit":1000
}
```
**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| cursor | 否 |用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填|
| limit | 否 | 返回的最大记录数，整型，默认为1000|

**
:::warning
  cursor具有有效期，请勿缓存后使用
:::
**

**权限说明：**
调用的应用需要满足如下的权限
| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「[客户联系 可调用接口的应用](#13473/配置可调用接口的应用)」中 |
|代开发应用|暂不支持| 
|第三方应用|暂不支持|
 *注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "info_list":
 [
     {
      "is_customer":false,
      "name":"***开",
      "tmp_openid":"TMP_ID",
      "follow_userid":"USER_ID",
      "chat_name":"外联群1",
      "add_time":1694418699
     },
     {
       "is_customer":true,
      "tmp_openid":"TMP_ID",
      "external_userid":"woAJ2GCAAAXtWyujaWJHDDGi0mACHAAA",
      "follow_userid":"USER_ID",
      "add_time":1694418699
     },
     {
       "is_customer":true,
      "tmp_openid":"TMP_ID",
      "external_userid":"woAJ2GCAAAXtWyujaWJHDDGi0mACHAAA",
      "chat_id":"CHATID",
      "add_time":1694418699
     },
     {
       "is_customer":false,
      "tmp_openid":"TMP_ID",
      "name":"***开",
      "follow_userid":"USER_ID",
      "add_time":1694418699
     }
 ],
 "next_cursor":"NEXT_CURSOR"
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| info_list.is_customer | 是否被成员标记为客户 |
| info_list.tmp_openid| **外部联系人临时ID** |
| info_list.external_userid| 外部联系人的externaluserid（如果是客户才返回） |
| info_list.name | 脱敏后的外部联系人昵称（如果是其他外部联系人才返回）|
| info_list.follow_userid|添加此外部联系人的企业成员或外部联系人所在群聊的群主userid|
| info_list.chat_id|外部联系人所在的群聊ID（如果群聊被成员标记为客户群才返回）|
| info_list.chat_name|外部联系人所在群聊的群名（如果群聊未被成员标记为客户群才返回）|
| info_list.add_time|外部联系人首次添加/进群的时间|
|next_cursor|分页游标，再下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则返回空,**有效期为4小时**|

#
::: tip 提示
外部联系人临时id是一个外部联系人的唯一标识，企业可根据此id对外部联系人进行去重统计。但外部联系人临时id仅在一轮遍历查询（从首个分页查询开始到最后一个分页查询完毕）中唯一；每次请求首个数据分页（cursor为空）时，返回的外部联系人临时id和next_cursor将发生变化。
:::
