---
title: "入群欢迎语素材管理"
doc_id: 19635
category_id: 92366
source_url: https://developer.work.weixin.qq.com/document/path/19635
---
[TOC]

##添加入群欢迎语素材

企业可通过此API向企业的入群欢迎语素材库中添加素材。每个企业的入群欢迎语素材库中，最多容纳100个素材。

**请求方式**: **POST(HTTP)**

**请求地址:**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/group_welcome_template/add?access_token=ACCESS_TOKEN

**请求示例**

```
{
  "text": {
    "content": "亲爱的%NICKNAME%用户，你好"
  },
  "image": {
    "media_id": "MEDIA_ID",
    "pic_url": "http://p.qpic.cn/pic_wework/3474110808/7a6344sdadfwehe42060/0"
  },
  "link": {
    "title": "消息标题",
    "picurl": "https://example.pic.com/path",
    "desc": "消息描述",
    "url": "https://example.link.com/path"
  },
  "miniprogram": {
    "title": "消息标题",
    "pic_media_id": "MEDIA_ID",
    "appid": "wx8bd80126147dfAAA",
    "page": "/path/index"
  },
  "file": {
    "media_id": "1Yv-zXfHjSjU-7LH-GwtYqDGS-zz6w22KmWAT5COgP7o"
  },
  "video": {
    "media_id": "MEDIA_ID"
  },
  "agentid": 1000014,
  "notify": 1
}
```

**参数说明**:

|参数|必须|说明|
|:-----------|:---|:-----------------|
|access_token | 是 | 调用接口凭证 |
|text.content|否|消息文本内容,最长为3000字节|
|image.media_id|否|图片的media_id，可以通过[素材管理](#10112)接口获得|
|image.pic_url|否|图片的链接，**仅可使用[上传图片](#13219)接口得到的链接**|
|link.title|是|图文消息标题，最长为128字节|
|link.picurl|否|图文消息封面的url|
|link.desc|否|图文消息的描述，最长为512字节|
|link.url|是|图文消息的链接|
|miniprogram.title|是|小程序消息标题，最长为64字节|
|miniprogram.pic_media_id|是|小程序消息封面的mediaid，封面图建议尺寸为520\*416|
|miniprogram.appid|是|小程序appid，必须是**关联到企业的小程序应用**|
|miniprogram.page|是|小程序page路径|
|file.media_id |是|文件id，可以通过[素材管理](#10112)、[异步上传临时素材](#42044)接口获得|
|video.media_id|是 |视频媒体文件id，可以通过[素材管理](#10112)、[异步上传临时素材](#42044)接口获得|
|agentid|否|授权方安装的应用agentid。**仅旧的第三方多应用套件需要填此参数**|
|notify|否|是否通知成员将这条入群欢迎语应用到客户群中，0-不通知，1-通知， **不填则通知**|

> text中支持配置多个**%NICKNAME%**(大小写敏感)形式的欢迎语，当配置了欢迎语占位符后，发送给客户时会自动替换为客户的昵称;
> text、image、link、miniprogram、file、video不能全部为空；
> text与其它消息类型可以同时发送，此时将会以两条消息的形式触达客户
> text以外的消息类型，只能有一个，如果三者同时填，则按image、link、miniprogram、file、video的优先顺序取参。例如：image与link同时传值，则只有image生效。
> 图片消息中，media_id和pic_url只需填写一个，两者同时填写时使用media_id，二者不可同时为空。

**权限说明**:
- 企业需要使用配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 第三方应用需具有“企业客户权限->客户联系->配置入群欢迎语素材”权限

**返回结果**:

```
{
 "errcode": 0,
 "errmsg": "ok",
  "template_id": "msgXXXXXX"
}
```

**参数说明**:

|参数|说明|
|:-----------|:-----------------|
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| template_id | 欢迎语素材id|

##编辑入群欢迎语素材

企业可通过此API编辑入群欢迎语素材库中的素材，且仅能够编辑调用方自己创建的入群欢迎语素材。

**请求方式**: **POST(HTTP)**

**请求地址:**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/group_welcome_template/edit?access_token=ACCESS_TOKEN

**请求示例**

```
{
  "template_id": "msgXXXXXXX",
  "text": {
    "content": "文本消息内容"
  },
  "image": {
    "media_id": "MEDIA_ID",
    "pic_url": "http://p.qpic.cn/pic_wework/3474110808/7a6344sdadfwehe42060/0"
  },
  "link": {
    "title": "消息标题",
    "picurl": "https://example.pic.com/path",
    "desc": "消息描述",
    "url": "https://example.link.com/path"
  },
  "miniprogram": {
    "title": "消息标题",
    "pic_media_id": "MEDIA_ID",
    "appid": "wx8bd80126147df384",
    "page": "/path/index"
  },
  "file": {
    "media_id": "1Yv-zXfHjSjU-7LH-GwtYqDGS-zz6w22KmWAT5COgP7o"
  },
  "video": {
    "media_id": "MEDIA_ID"
  },
  "agentid": 1000014
}
```

**参数说明**:

|参数|必须|说明|
|:-----------|:---|:-----------------|
|access_token | 是 | 调用接口凭证 |
|template_id|是|欢迎语素材id|
|text.content|否|消息文本内容,最长为3000字节|
|image.media_id|否|图片的media_id，可以通过[素材管理](#10112)接口获得|
|image.pic_url|否|图片的链接，**仅可使用[上传图片](#13219)接口得到的链接**|
|link.title|是|图文消息标题，最长为128字节|
|link.picurl|否|图文消息封面的url|
|link.desc|否|图文消息的描述，最长为512字节|
|link.url|是|图文消息的链接|
|miniprogram.title|是|小程序消息标题，最长为64字节|
|miniprogram.pic_media_id|是|小程序消息封面的mediaid，封面图建议尺寸为520*416|
|miniprogram.appid|是|小程序appid，必须是**关联到企业的小程序应用**|
|miniprogram.page|是|小程序page路径|
|file.media_id |是|文件id，可以通过[素材管理](#10112)、[异步上传临时素材](#42044)接口获得|
|video.media_id|是 |视频媒体文件id，可以通过[素材管理](#10112)、[异步上传临时素材](#42044)接口获得|
|agentid|否|授权方安装的应用agentid。**仅旧的第三方多应用套件需要填此参数**|

**权限说明**:
- 企业需要使用配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 第三方应用需具有“企业客户权限->客户联系->配置入群欢迎语素材”权限
- 仅可编辑本应用创建的入群欢迎语素材

**返回结果**:

```
{
 "errcode": 0,
 "errmsg": "ok"
}
```

**参数说明**:

|参数|说明|
|:-----------|:-----------------|
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |

##获取入群欢迎语素材
企业可通过此API获取入群欢迎语素材。

**请求方式**: **POST(HTTP)**

**请求地址:**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/group_welcome_template/get?access_token=ACCESS_TOKEN

**请求示例**

```
{
  "template_id":"msgXXXXXXX"
}
```

**参数说明**:

|参数|必须|说明|
|:-----------|:---|:-----------------|
|access_token | 是 | 调用接口凭证 |
|template_id|是|群欢迎语的素材id|

**权限说明**:
- 企业需要使用配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 第三方应用需具有“企业客户权限->客户联系->配置入群欢迎语素材”权限

**返回结果**:

```
{
  "errcode": 0,
  "errmsg": "ok",
  "text": {
    "content": "文本消息内容"
  },
  "image": {
    "pic_url": "http://p.qpic.cn/pic_wework/XXXXX"
  },
  "link": {
    "title": "消息标题",
    "picurl": "https://example.pic.com/path",
    "desc": "消息描述",
    "url": "https://example.link.com/path"
  },
  "miniprogram": {
    "title": "消息标题",
    "pic_media_id": "MEDIA_ID",
    "appid": "wx8bd80126147df384",
    "page": "/path/index"
  },
  "file": {
    "media_id": "1Yv-zXfHjSjU-7LH-GwtYqDGS-zz6w22KmWAT5COgP7o"
  },
  "video": {
    "media_id": "MEDIA_ID"
  }
}
```

**参数说明**:

|参数|说明|
|:-----------|:-----------------|
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
|text.content|消息文本内容|
|image.pic_url|图片的url|
|link.title|图文消息标题|
|link.picurl|图文消息封面的url|
|link.desc|图文消息的描述|
|link.url|图文消息的链接|
|miniprogram.title|小程序消息标题|
|miniprogram.pic_media_id|小程序消息封面的mediaid|
|miniprogram.appid|小程序appid|
|miniprogram.page|小程序page路径|
|file.media_id |文件id，可以通过[素材管理](#10112)接口获得。<br>**注意：设置接口若使用[异步上传临时素材](#42044)拿到的media_id，此时就会返回同类型的media_id**|
|video.media_id|视频媒体文件id，可以通过[素材管理](#10112)接口获得。<br>**注意：设置接口若使用[异步上传临时素材](#42044)拿到的media_id，此时就会返回同类型的media_id**|

##删除入群欢迎语素材
企业可通过此API删除入群欢迎语素材，且仅能删除调用方自己创建的入群欢迎语素材。

**请求方式**: **POST(HTTP)**

**请求地址:**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/group_welcome_template/del?access_token=ACCESS_TOKEN

**请求示例**

```
{
  "template_id":"msgXXXXXXX",
  "agentid" : 1000014
}
```

**参数说明**:

|参数|必须|说明|
|:-----------|:---|:-----------------|
|access_token | 是 | 调用接口凭证 |
|template_id|是|群欢迎语的素材id|
|agentid|否|授权方安装的应用agentid。**仅旧的第三方多应用套件需要填此参数**|

**权限说明**:
- 企业需要使用配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 第三方应用需具有“企业客户权限->客户联系->配置入群欢迎语素材”权限
- 仅可删除本应用创建的入群欢迎语素材

**返回结果**:

```
{
 "errcode": 0,
 "errmsg": "ok"
}
```

**参数说明**:

|参数|说明|
|:-----------|:-----------------|
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
