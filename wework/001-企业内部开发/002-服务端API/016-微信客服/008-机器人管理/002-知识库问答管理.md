---
title: "知识库问答管理"
doc_id: 40162
category_id: 95972
source_url: https://developer.work.weixin.qq.com/document/path/95972
---
最后更新：2024/06/21

[TOC]
通过问答管理接口，可操作企业管理后台-微信客服-机器人-知识库的问答数据。

相关的约束条件跟管理后台一致：
- 不同分组的问题不能重复
- 单个分组的问答数上限为`200`

**权限说明**:
调用的应用需要满足如下的权限
| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「 [微信客服- 可调用接口的应用](#31106/如何开启API)」中 |
|第三方应用|暂不支持|
|代开发自建应用|暂不支持|
*注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)
## 添加问答
可通过此接口创建新的知识库问答。

**请求方式**: POST (**HTTPS**)

**请求地址**: https://qyapi.weixin.qq.com/cgi-bin/kf/knowledge/add_intent?access_token=ACCESS_TOKEN

**请求示例**:
```
{
 "group_id": "GROUP_ID",
 "question": {
 "text": {
 "content": "主问题"
 }
 }, 
 "similar_questions": {
 "items": [
 {
 "text": {
 "content": "相似问题1"
 }
 }, 
 {
 "text": {
 "content": "相似问题2"
 }
 }
 ]
 }, 
 "answers": [
 {
 "text": {
 "content": "问题的回复"
 }, 
 "attachments": [
 {
 "msgtype": "image",
 "image": {
 "media_id": "MEDIA_ID"
 }
 }
 ]
 }
 ]
}
```

**参数说明**:

|参数|类型|必须|说明|
|:-----------|:----|:---|:-----------------|
|access_token | string | 是 | 调用接口凭证 |
|group_id | string | 是 | 分组ID|
|question| obj | 是|主问题|
|question.text| obj | 是|主问题文本|
|question.text.content| string | 是|主问题文本内容。不超过200个字|
|similar_questions| obj | 否|相似问题|
|similar_questions.items| obj[] | 否|相似问题列表。最多支持100个|
|similar_questions.items[].text| obj | 是|相似问题文本|
|similar_questions.items[].text.content| string | 是|相似问题文本内容。不超过200个字|
|answers| obj[] | 是|回答列表。目前仅支持1个|
|answers[].text| obj | 是|回答文本|
|answers[].text.content| string | 是|回答文本内容。不超过500个字|
|answers[].attachments| obj[] | 否|回答附件列表。最多支持4个|
|answers[].attachments[].*| obj | 是|回答附件。具体见[附录-问答附件类型](#附录-问答附件类型) |

**返回结果**:

```
{
  "errcode": 0,
  "errmsg": "ok",
  "intent_id": "INTENT_ID"
}
```

**参数说明**:

|参数|类型|说明|
|:-----------|:-----------------|:-----------------|
| errcode | int32 | 返回码 |
| errmsg | string | 错误码描述 |
| intent_id | string | 问答ID|

## 删除问答
可通过此接口删除已有的知识库问答。

**请求方式**: POST (**HTTPS**)

**请求地址**: https://qyapi.weixin.qq.com/cgi-bin/kf/knowledge/del_intent?access_token=ACCESS_TOKEN

**请求示例**:
```json
{
  "intent_id": "INTENT_ID"
}
```

**参数说明**:

|参数|类型|必须|说明|
|:-----------|:----|:---|:-----------------|
|access_token | string | 是 | 调用接口凭证 |
| intent_id | string | 是 | 问答ID|

**返回结果**:

```
{
  "errcode": 0,
  "errmsg": "ok"
}
```

**参数说明**:

|参数|类型|说明|
|:-----------|:-----------------|:-----------------|
| errcode | int32 | 返回码 |
| errmsg | string | 错误码描述|

## 修改问答
可通过此接口修改已有的知识库问答。
`question`/`similar_questions`/`answers`这三部分可以按需更新，但更新的每一部分是覆盖写，需要传完整的字段。

**请求方式**: POST (**HTTPS**)

**请求地址**: https://qyapi.weixin.qq.com/cgi-bin/kf/knowledge/mod_intent?access_token=ACCESS_TOKEN

**请求示例**:

```json
{
 "intent_id": "INTENT_ID",
 "question": {
 "text": {
 "content": "主问题"
 }
 }, 
 "similar_questions": {
 "items": [
 {
 "text": {
 "content": "相似问题1"
 }
 }, 
 {
 "text": {
 "content": "相似问题2"
 }
 }
 ]
 }, 
 "answers": [
 {
 "text": {
 "content": "问题的回复"
 }, 
 "attachments": [
 {
 "msgtype": "image",
 "image": {
 "media_id": "MEDIA_ID"
 }
 }
 ]
 }
 ]
}
```

**参数说明**:

|参数|类型|必须|说明|
|:-----------|:----|:---|:-----------------|
|access_token | string | 是 | 调用接口凭证 |
| intent_id | string | 是 | 问答ID|
|question| obj | 否|主问题|
|question.text| obj | 否|主问题文本|
|question.text.content| string | 是|主问题文本内容|
|similar_questions| obj | 否|相似问题|
|similar_questions.items| obj[] | 否|相似问题列表。最多支持100个|
|similar_questions.items[].text| obj | 是|相似问题文本|
|similar_questions.items[].text.content| string | 是|相似问题文本内容|
|answers| obj[] | 否|回答列表。目前仅支持1个|
|answers[].text| obj | 是|回答文本|
|answers[].text.content| string | 是|回答文本内容|
|answers[].attachments| obj[] | 否|回答附件列表。最多支持4个|
|answers[].attachments[].*| obj | 是|回答附件。具体见[附录-问答附件类型](#附录-问答附件类型) |

**返回结果**:

```
{
  "errcode": 0,
  "errmsg": "ok"
}
```

**参数说明**:

|参数|类型|说明|
|:-----------|:-----------------|:-----------------|
| errcode | int32 | 返回码 |
| errmsg | string | 错误码描述 |
| intent_id | string | 问答ID|

## 获取问答列表
可通过此接口分页获取的知识库问答详情列表。

**请求方式**: POST (**HTTPS**)

**请求地址**: https://qyapi.weixin.qq.com/cgi-bin/kf/knowledge/list_intent?access_token=ACCESS_TOKEN

**请求示例**:
```json
{
  "cursor": "CURSOR",
  "limit": 100,
  "group_id": "GROUP_ID",
  "intent_id": "INTENT_ID"
}
```

**参数说明**:

|参数|类型|必须|说明|
|:-----------|:----|:---|:-----------------|
|access_token | string | 是 | 调用接口凭证 |
|cursor|string|否|上一次调用时返回的`next_cursor`，第一次拉取可以不填|
|limit|  uint32|否|  每次拉取的数据量，默认值500，最大值为1000|
|group_id|string|否|分组ID。可指定拉取特定分组下的问答|
|intent_id|string|否|问答ID。可指定拉取特定的问答|

**返回结果**:
```
{
 "errcode": 0, 
 "errmsg": "ok", 
 "next_cursor": "NEXT_CURSOR", 
 "has_more": 1, 
 "intent_list": [
 {
 "group_id": "GROUP_ID", 
 "intent_id": "INTENT_ID", 
 "question": {
 "text": {
 "content": "主问题"
 }, 
 "similar_questions": {
 "items": [
 {
 "text": {
 "content": "相似问题1"
 }
 }, 
 {
 "text": {
 "content": "相似问题2"
 }
 }
 ]
 }, 
 "answers": [
 {
 "text": {
 "content": "问题的回复"
 }, 
 "attachments": [
 {
 "msgtype": "image", 
 "image": {
 "name": "图片（仅返回名字）.jpg"
 }
 }
 ]
 }
 ]
 }
 }
 ]
}
```
**参数说明**:

|参数|类型|说明|
|:-----------|:-----------------|:-----------------|
| errcode | int32 | 返回码 |
| errmsg | string | 错误码描述 |
| next_cursor | string | 分页游标，再下次请求时填写以获取之后分页的记录 |
| has_more | uint32 | 是否还有更多数据。0-没有 1-有 |
| intent_list | obj[] | 问答摘要列表|
| intent_list[].group_id | string | 分组ID|
| intent_list[].intent_id | string | 问答ID|
|intent_list[].question| obj |主问题|
|intent_list[].question.text| obj | 主问题文本|
|intent_list[].question.text.content| string |主问题文本内容|
|intent_list[].similar_questions| obj | 相似问题|
| intent_list[].similar_questions.items| obj[] | 相似问题列表。最多支持100个|
| intent_list[].similar_questions.items[].text| obj | 相似问题文本|
| intent_list[].similar_questions.items[].text.content| string | 相似问题文本内容|
| intent_list[].answers| obj[] | 回答列表。目前仅支持1个|
| intent_list[].answers[].text| obj | 回答文本|
|intent_list[].answers[].text.content| string |回答文本内容|
| intent_list[].answers[].attachments| obj[] | 回答附件列表。最多支持4个|
| intent_list[].answers[].attachments[].*| obj | 回答附件。具体见[附录-问答附件类型](#附录-问答附件类型) |

## 附录-问答附件类型
### 图片
**请求示例**:
```json
{
 "msgtype": "image",
 "image": {
 "media_id": "MEDIA_ID"
 }
}
```
**返回示例**:
```json
{
 "msgtype": "image", 
 "image": {
 "name": "图片的文件名"
 }
}
```
**参数说明**:
|参数|类型|必须|说明|
|:-----------|:----|:---|:-----------------|
|msgtype | string | 是 | 附件类型，此处固定为`image` |
| image | 是 | obj |图片消息 |
| image.media_id | 是 | string | 图片的media_id，可通过[上传临时素材](#25551)接口获取 |
| image.name | 否 | string |图片的文件名!!#ff0000 （[获取问答列表](#获取问答列表)接口才返回该字段） !! |

### 视频
**请求示例**:
```json
{
 "msgtype": "video", 
 "video": {
 "media_id": "MEDIA_ID"
 }
}
```
**返回示例**:
```json
{
 "msgtype": "video", 
 "video": {
 "name": "视频的文件名"
 }
}
```
**参数说明**:
|参数|类型|必须|说明|
|:-----------|:----|:---|:-----------------|
|msgtype | string | 是 | 附件类型，此处固定为`video` |
| video | 是 | obj |视频消息 |
| video.media_id | 否 | string |视频的media_id，可通过[上传临时素材](#25551)接口获取 |
| video.name | 否 | string |视频的文件名!!#ff0000 （[获取问答列表](#获取问答列表)接口才返回该字段） !! |

### 链接
**示例**:
```json
{
 "msgtype": "link", 
 "link": {
 "title": "消息标题", 
 "pic_url": "https://example.pic.com/path", 
 "desc": "消息描述", 
 "url": "https://example.link.com/path"
 }
}
```

**参数说明**:
|参数|类型|必须|说明|
|:-----------|:----|:---|:-----------------|
|msgtype | string | 是 | 附件类型，此处固定为`link` |
|link|obj|是 | 链接消息|
|link.title|string|是 | 标题|
|link.desc|string|否 | 描述|
|link.url|string|是 | 点击后跳转的链接|
|link.pic_url|string|否 | 缩略图链接|

### 小程序
**请求示例**:
```json
{
 "msgtype": "miniprogram", 
 "miniprogram": {
 "title": "欢迎报名夏令营",
 "thumb_media_id": "THUMB_MEDIA_ID",
 "appid": "wx8bd80126147dfAAA", 
 "pagepath": "/path/index.html"
 }
}
```

**返回示例**:
```json
{
 "msgtype": "miniprogram", 
 "miniprogram": {
 "title": "欢迎报名夏令营",
 "appid": "wx8bd80126147dfAAA", 
 "pagepath": "/path/index.html"
 }
}
```

**参数说明**:
|参数|类型|必须|说明|
|:-----------|:----|:---|:-----------------|
|msgtype | string | 是 | 附件类型，此处固定为`miniprogram` |
| miniprogram | obj |是 | 小程序消息 |
| miniprogram.title | string | 否 | 小程序消息标题。最多64个字节 |
| miniprogram.thumb_media_id | string |是 | 小程序消息封面的mediaid。封面图建议尺寸为520*416（ [获取问答列表](#获取问答列表)接口!!#ff0000 不返回!!该字段） |
| miniprogram.appid | string |是 | 小程序appid。!!#ff0000 必须是关联到企业的小程序应用appid!! |
| miniprogram.pagepath | string |是 | 点击消息卡片后进入的小程序页面路径 |
