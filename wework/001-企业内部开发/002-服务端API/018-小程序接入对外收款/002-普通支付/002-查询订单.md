---
title: "查询订单"
doc_id: 43091
category_id: 97323
source_url: https://developer.work.weixin.qq.com/document/path/97323
---
最后更新：2022/11/29

商户可以通过商户订单号查询订单，获取订单状态等信息，完成下一步的业务逻辑。

::: warning 需要调用查询接口的情况
• 当商户后台、网络、服务器等出现异常，商户系统最终未接收到支付通知。
• 调用支付接口后，返回系统错误或未知交易状态情况。
• 调用关单或撤销接口API之前，需确认支付状态。
:::

**请求方式：** POST(HTTPS)
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/miniapppay/get_order?access_token=ACCESS_TOKEN

**请求包体：**

``` 
{
 "mchid" : "xxx",
 "out_trade_no" : "xxx"
}
```

**参数说明：**
| 参数名 | 变量 | 类型[长度限制] | 必填 | 说明 |
| ------ | ------ | ------ | ------ | ------ |
| 商户号 | mchid | string[1,32] | 是 | 二级商户号，由企业微信生成并下发。 |
|商户订单号 | out_trade_no | string[6,32] | 是 | 商户系统内部订单号，只能是数字、大小 写字母_-*且在同一个商户号下唯一。 |

**返回结果：**

``` 
{
 "mchid": "xxx",
 "out_trade_no": "xxxx",
 "trade_state": "xxx",
 "trade_state_desc": "xxx",
 "payer": {
 "openid": "xxxxxx"
 },
 "transaction_id": "xxxxxxxx"
}
```

**参数说明：**
| 参数名 | 变量 | 类型[长度限制] | 必填 | 说明 |
| ------ | ------ | ------ | ------ | ------ |
| 商户号 | mchid | string[1,32] | 是 | 二级商户号，由企业微信生成并下发。 |
|商户订单号 | out_trade_no | string[6,32] | 是 | 商户系统内部订单号，只能是数字、大小 写字母_-*且在同一个商户号下唯一。 |
| 交易类型 | trade_type | string[1,16] | 否 | 交易类型，枚举值：<br>JSAPI：公众号支付<br>NATIVE：扫码支付<br>APP：APP支付<br>MICROPAY：付款码支付<br>MWEB：H5支付<br>FACEPAY：刷脸支付<br>示例值：MICROPAY |
| 交易状态 | trade_state | string[1,32] | 是 | 交易状态，枚举值：<br>SUCCESS：支付成功<br>REFUND：转入退款<br>NOTPAY：未支付<br>CLOSED：已关闭<br>REVOKED：已撤销（付款码支付<br>USERPAYING：用户支付中（付款码支付）<br>PAYERROR：支付失败(其他原因，如银行返回失败)<br>ACCEPT：已接收，等待扣款<br>示例值：SUCCESS |
| 交易状态描述 | trade_state_desc | string[1,256] | 是 | 示例值：支付失败，请重新下单支付 |
| 支付者标识 | payer.openid | string[1,128] | 是 | 用户在子商户appid下的唯一标识。|
| 微信支付订单号 | transaction_id | string[1,32] | 是 | 微信支付系统生成的订单号 |
| 付款银行 | bank_type | string[1,32] | 否 | 银行类型，采用字符串类型的银行标识。|
| 附加数据 | attach | string[1,128] | 否 | 附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。|
| 支付完成时间 | success_time | string[1,64] | 否 | 支付完成时间，遵循rfc3339标准格式，格式为yyyy-MM-DDTHH:mm:ss+TIMEZONE|
| 订单总金额 | amount.total | int | 否 | 订单总金额，单位为分|
| 用户支付金额 | amount.payer_total | int | 否 | 用户支付金额，单位为分|
| 货币类型 | amount.currency | string[1,16] | 否 | 境内商户号仅支持人民币 CNY |
| 用户支付币种 | amount.payer_currency | string[1,16] | 否 | 用户支付币种 |
| 商户端设备号 | scene_info.total | string[1,32] | 否 | 商户端设备号（发起扣款请求的商户服务器设备号）。|
| 商品小票ID | promotion_detail.coupon_id | string[1,32] | 否 | 商家小票ID |
| 优惠名称  |promotion_detail.name  |string[1,64]  |否  |优惠名称|
|优惠范围  |promotion_detail.scope  |string[1,32]  |否  |GLOBAL：全场代金券<br>SINGLE：单品优惠|
|优惠类型  |promotion_detail.type  |string[1,32]  |否  |CASH：充值型代金券<br>NOCASH：免充值型代金券<br>示例值：CASH|
|优惠券面额|  promotion_detail.amount|  int  |是  |优惠券面额|
|活动ID  |promotion_detail.stock_id  |string[1,32]  |否  |活动ID|
|微信出资|  promotion_detail.wechatpay_contribute|  int  |否  |微信出资，单位为分|
|商户出资  |promotion_detail.merchant_contribute  |int  |否  |商户出资，单位为分|
|其他出资  |promotion_detail.other_contribute  |int  |否  |其他出资，单位为分|
|优惠币种  |promotion_detail.currency  |string[1,16]  |否  |CNY：人民币，境内商户号仅支持人民币。|
|商品编码  |promotion_detail.goods_detail.goods_id  |string[1,32]  |是  |商品编码|
|商品数量  |promotion_detail.goods_detail.quantity  |int  |是  |用户购买的数量|
|商品单价  |promotion_detail.goods_detail.unit_price  |int  |是  |商品单价，单位为分|
|商品优惠金额  |promotion_detail.goods_detail.discount_amount  |int  |是  |商品优惠金额|
|商品备注  |promotion_detail.goods_detail.goods_remark  |string[1,128]  |否  |商品备注信息|
