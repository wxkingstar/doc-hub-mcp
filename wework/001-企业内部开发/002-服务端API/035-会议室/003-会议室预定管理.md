---
title: "会议室预定管理"
doc_id: 22517
category_id: 93620
source_url: https://developer.work.weixin.qq.com/document/path/22517
---
[TOC]

##权限说明
调用会议室相关接口的应用有如下的权限要求：
| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「[应用管理 - 会议室 - 可调用接口的应用](#22789/配置可调用接口的应用)」中 |
|代开发应用|暂不支持| 
|第三方应用|暂不支持|
 *注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)

##查询会议室的预定信息

企业可通过此接口查询相关会议室在指定时间段的预定情况，如是否已被预定，预定者的userid等信息，**不支持跨天查询**。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/oa/meetingroom/get_booking_info?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "meetingroom_id":1,
 "start_time":1593532800,
 "end_time":1593619200,
 "city":"深圳",
 "building":"腾讯大厦",
 "floor":"18F"
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证|
|meetingroom_id| 否| 会议室id|
|start_time|否|查询预定的起始时间，默认为当前时间|
|end_time|否|查询预定的结束时间， 默认为明日0时|
| city | 否 | 会议室所在城市 |
| building | 否 | 会议室所在楼宇|
|floor|否|会议室所在楼层|

> 如果需要根据位置信息查询，则需要保证其上一级的位置信息已填写，即如需使用楼宇进行过滤，则必须同时填写城市字段。

**返回结果：**

```
{
  "errcode": 0,
  "errmsg": "ok",
  "booking_list": [{
      "meetingroom_id": 1,
      "schedule": [{
        "booking_id": "bkebsada6e027c123cbafAAA",
        "schedule_id": "17c7d2bd9f20d652840f72f59e796AAA",
        "start_time": 1593532800,
        "end_time": 1593662400,
        "booker": "zhangsan",
        "status":0
      }]
    },
    {
      "meetingroom_id": 2,
      "schedule": []
    }
  ]
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| booking_list | 会议室预订信息列表 |
|booking_list.meetingroom_id|会议室id|
|booking_list.schedule|该会议室查询时间段内的预定情况|
|booking_list.schedule.start_time|开始时间的时间戳|
|booking_list.schedule.end_time|结束时间的时间戳|
|booking_list.schedule.booker|预定人的userid|
|booking_list.schedule.status|会议室的预定状态，0：已预定 、2：申请中、3：审批中|
|booking_list.schedule.booking_id|会议室的预定id|
|booking_list.schedule.schedule_id|会议关联日程的id，若会议室已取消预定（未保留日历），则schedule_id将无法再获取到日程详情|

##预定会议室

企业可通过此接口预定会议室并自动关联日程。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/oa/meetingroom/book?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "meetingroom_id":1,
 "subject":"周会",
 "start_time":1593532800,
 "end_time":1593619200,
 "booker":"zhangsan",
 "attendees":["lisi", "wangwu"]
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证|
|subject|否|会议主题|
| meetingroom_id| 是| 会议室id|
|start_time|是|预定开始时间|
|end_time|是|预定结束时间|
|booker|是|预定人的userid|
|attendees|否|参与人的userid列表|

> 最小预定时长为30分钟；
> 预定时间和结束时间会**自动按30分钟取整**，即如果传入的开始和结束时间戳分别对应时间为15:15和15:45，则预定时会自动取整为15:00和16:00；
> 此API仅可预定**无需审批**的会议室；
> 如果当前时间已经晚于预定时间，则按以下情况进行处理：
1.当前已过预定结束时间，则不允许预定
2.当前在预定开始时间15分钟内，则允许预定 
3.当前已超过预定开始时间15分钟，则自动转换预定开始时间到下一个时间窗口，即增加30分钟到开始时间

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "booking_id":"bkgsaseb6e027c123cbafAAA",
 "schedule_id":"17c7d2bd9f20d652840f72f59e796AAA"
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
|booking_id| 会议室的预定id|
|schedule_id|会议关联日程的id|

##通过日程预定会议室

企业可通过此接口为指定日程预定会议室，支持重复日程预定。
>注意：通过日程预定会议室后，该日程将不能通过[更新日程](#44567)接口进行编辑，而只能调用[新增日程参与者](#44568)与[删除日程参与者](#44569)接口。如果需要更新日程的时间等字段，可以先取消会议室预定，再调用[更新日程](#44567)接口，之后再重新预定会议室。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/oa/meetingroom/book_by_schedule?access_token=ACCESS_TOKEN

**请求示例：**
```
{
  "meetingroom_id":1,
  "schedule_id":"1c7e7226edae66468bc48e9859812402",
  "booker":"rocky"
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证|
| meetingroom_id| 是| 会议室id|
|schedule_id|是|日程id，**仅可使用同应用创建的日程**|
|booker|是|预定人的userid|

> 此API仅可预定**无需审批**的会议室；

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "booking_id":"bkgsaseb6e027c123cbafAAA",
 "conflict_date":[1672502400,1675180800,1677600000]
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
|booking_id| 会议室的预定的id|
|conflict_date|会议室冲突日期列表，为当天0点的时间戳；使用重复日程预定会议室，部分日期与会议室预定情况冲突时返回|

##通过会议预定会议室

企业可通过此接口为指定会议预定会议室，支持重复会议预定。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/oa/meetingroom/book_by_meeting?access_token=ACCESS_TOKEN

**请求示例：**
```
{
  "meetingroom_id":1,
  "meetingid":"hy7e7226edae66468bc48e9859812402",
  "booker":"rocky"
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证|
| meetingroom_id| 是| 会议室id|
|meetingid|是|会议id，**仅可使用同应用创建的会议**|
|booker|是|预定人的userid|

> 此API仅可预定**无需审批**的会议室；

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "booking_id":"bkgsaseb6e027c123cbafAAA",
 "conflict_date":[1672502400,1675180800,1677600000]

}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
|booking_id| 会议室的预定的id|
|conflict_date|会议室冲突日期列表，为当天0点的时间戳；使用重复会议预定会议室，部分日期与会议室预定情况冲突时返回|

##取消预定会议室

企业可通过此接口取消会议室的预定

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/oa/meetingroom/cancel_book?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "booking_id":"bk42b34949gsaseb6e027c123cbafAAA",
 "keep_schedule":1,
 "cancel_date":1672502400
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证|
| booking_id| 是| 会议室的预定id|
|keep_schedule|否|是否保留日程，0-同步删除 1-保留，仅对非重复日程有效|
|cancel_date|否|对于重复日程，如果不填写此参数，表示取消所有重复预定；如果填写，则表示取消对应日期当天的会议室预定|

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok"
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
 
##根据会议室预定ID查询预定详情
企业可通过此接口根据预定id查询相关会议室的预定情况
**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/oa/meetingroom/bookinfo/get?access_token=ACCESS_TOKEN

**请求示例：**
```
{
  "meetingroom_id":1,
  "booking_id": "bkebsada6e027c123cbafAAA"
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证|
|meetingroom_id| 是| 会议室id|
|booking_id|是|会议室的预定id|

**返回结果：**

```
{
  "errcode": 0,
  "errmsg": "ok",
  "meetingroom_id": 1,
  "schedule": {
    "booking_id": "bkebsada6e027c123cbafAAA",
    "master_booking_id":"rbsho97cbidajgixnyk8eAA",
    "schedule_id": "17c7d2bd9f20d652840f72f59e796AAA",
    "start_time": 1593532800,
    "end_time": 1593662400,
    "booker": "zhangsan",
    "status":0
  }
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
|meetingroom_id|会议室id|
|schedule|该会议室的预定情况|
|schedule.start_time|开始时间的时间戳|
|schedule.end_time|结束时间的时间戳|
|schedule.booker|预定人的userid|
|schedule.booking_id|会议室的预定id|
|schedule.master_booking_id|如果该预定是某个周期性预定的一部分，则返回对应周期性预定的booking_id|
|schedule.schedule_id|会议关联日程的id，若会议室已取消预定(未保留日历)，则schedule_id将无法再获取到日程详情|
|schedule.status|会议室的预定状态，0：已预定、1：已取消、2：申请中、3：审批中|
## 附录
**会议室的预订状态详解：**
1. 若会议室预定不需要审批，申请会议室后，会议室的预定状态为已预订，取消预定后，会议室的预定状态为已取消
2. 若会议室预定需要审批，申请会议室后，会议室的预定状态为申请中，提交审批后，会议室的预定状态为审批中，审批完成后，会议室的预定状态为已预订，再取消预定后，会议室的预订状态为已取消
- ![](https://wework.qpic.cn/wwpic/100243_jIrk1VfySnmljBd_1641989046/0)
