---
title: "获取访问用户身份"
doc_id: 16881
category_id: 91707
source_url: https://developer.work.weixin.qq.com/document/path/16881
---
该接口用于根据code获取成员信息

**请求方式：**GET（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/auth/getuserinfo?access\_token=ACCESS\_TOKEN&code=CODE
**参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ---- | ---------------------------------------- |
| access_token | 是 | 调用接口凭证 |
| code | 是 | 通过成员授权获取到的code，最大为512字节。每次成员授权带上的code将不一样，code只能使用一次，5分钟未被使用自动过期。 |
**权限说明：**
跳转的域名须完全匹配access\_token对应应用的可信域名，否则会返回50001错误。
**返回结果：**
a) 当用户为企业成员时返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "userid":"userid"
}

```
| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| userid | 成员UserID。若需要获得用户详情信息，可调用通讯录接口：[读取成员](#10019) |

b) 当用户为学校的家长时，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "external_userid": "abcexuserid",
 "parent_userid": "parent_userid"
}

```
| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| external_userid | 家长的外部联系人id|
| parent_userid | 家校通讯录里家长的userid，如果是局校互联，则返回的parent_userid格式如：CorpId/parent_userid|

c) 非企业成员或学生家长授权时返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "openid":"OPENID"
}

```

| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| openid | 非企业成员的标识，对当前企业唯一 |

**出错返回示例：**

```
{
 "errcode": 40029,
 "errmsg": "invalid code"
}

```
