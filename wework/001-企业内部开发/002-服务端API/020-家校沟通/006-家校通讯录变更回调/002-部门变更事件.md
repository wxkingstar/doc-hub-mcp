---
title: "部门变更事件"
doc_id: 19031
category_id: 92052
source_url: https://developer.work.weixin.qq.com/document/path/92052
---
最后更新：2023/11/29

[TOC]

##接收回调权限说明
需具备相应的权限以及打开对应的接收事件开关才能接收回调。

| 应用类型 | 权限要求 | 接收事件开关|
| -------- | ---- | 
|自建应用|配置到「家校沟通- 可调用接口的应用」中或者「家校沟通- 配置-家长可使用的应用」 |[外部联系人变更回调](#12977/开启接收消息)|
|代开发应用|具有「!!#ff0000 家校沟通->家校通讯录读取权限”!!」权限| 无|
|第三方应用|具有「!!#ff0000 家校沟通->「家校沟通」使用权限，包括读取家长信息（不含电话）和给家长发通知”!!」或者「!!#ff0000 「家校沟通」使用和编辑权限，包括编辑家校通讯录和给家长发通知!!」权限|无|

## 创建部门事件
当学校在家校通讯录中创建部门时，回调此事件。

xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_school_contact]]></Event>
  <ChangeType><
- ![CDATA[create_deparmtment]]></ChangeType>
  <Id><
- ![CDATA[1]]></Id>
</xml>
```

json请求示例：
```
{
  "ToUserName": "toUser",
  "FromUserName": "sys",
  "CreateTime": 1403610513,
  "MsgType": "event",
  "Event": "change_school_contact",
  "ChangeType": "create_deparmtment",
  "Id": "1"
}
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_school_contact |
 |ChangeType|此时固定为create_department|
 |Id|新增部门的id |

## 更新部门事件
当学校更新家校通讯录部门时，回调此事件。
xml请求示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_school_contact]]></Event>
  <ChangeType><
- ![CDATA[update_deparmtment]]></ChangeType>
  <Id><
- ![CDATA[1]]></Id>
</xml>
```

json请求示例：
```
{
  "ToUserName": "toUser",
  "FromUserName": "sys",
  "CreateTime": 1403610513,
  "MsgType": "event",
  "Event": "change_school_contact",
  "ChangeType": "update_deparmtment",
  "Id": "1"
}
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_school_contact |
 |ChangeType|此时固定为update_department|
 |Id|发生变更的部门的Id |

## 删除部门事件
当学校删除家校通讯录部门时，回调此事件。
xml请求示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_school_contact]]></Event>
  <ChangeType><
- ![CDATA[delete_deparmtment]]></ChangeType>
  <Id><
- ![CDATA[1]]></Id>
</xml>
```
json请求示例：
```
{
  "ToUserName": "toUser",
  "FromUserName": "sys",
  "CreateTime": 1403610513,
  "MsgType": "event",
  "Event": "change_school_contact",
  "ChangeType": "delete_deparmtment",
  "Id": "1"
}
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_school_contact |
 |ChangeType|此时固定为delete_department|
 |Id|删除部门的Id |
