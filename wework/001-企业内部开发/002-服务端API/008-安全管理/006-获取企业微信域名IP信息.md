---
title: "获取企业微信域名IP信息"
doc_id: 54776
category_id: 100079
source_url: https://developer.work.weixin.qq.com/document/path/54776
---
[TOC]

企业微信是 saas 服务，随着产品功能越来越多、以及运维容灾等需求，企业微信相关功能使用的域名和IP存在变动的可能性。企业可通过此接口获取最新的域名和IP信息。

## 权限说明
调用此接口的应用需要满足如下的权限：

| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「!!#ff0000 我的企业 - 设置 - 域名IP - 可调用API的应用!!」中 |
|代开发应用|暂不支持| 
|第三方应用|暂不支持|

## 获取企业微信域名IP信息

**请求方式**：GET（**HTTPS**）
**请求地址**: https://qyapi.weixin.qq.com/cgi-bin/security/get_server_domain_ip?access_token=ACCESS_TOKEN 

**参数说明**

| 参数 | 类型 | 是否必须 | 说明 |
| --------------------------------- | ------ | -------- | ----------------------------------------------------------------------------------------------------------- |
|access_token|string|是|应用调用凭证|

**返回示例**

```json
{
  "errcode": 0,
  "errmsg": "ok",
  "domain_list":
  [
    {
      "domain":"i.work.weixin.qq.com",
      "universal_domian":"work.weixin.qq.com",
      "protocol":"TCP",
      "port":[443,80],
      "is_necessary":1,
      "description":"企业微信客户端长连接，消息收发等功能;企业微信客户端短连接，登录、拉组织架构等功能"
    },
    {
      "domain":"live.work.weixin.qq.com",
      "universal_domian":"work.weixin.qq.com",
      "protocol":"TCP",
      "port":[443,80],
      "is_necessary":0,
      "description":"企业微信客户端长连接，消息收发等功能;企业微信客户端短连接，登录、拉组织架构等功能"
    }
  ],
  "ip_list":
  [
    {
      "ip":"115.238.203.109",
      "protocol":"TCP",
      "port":[443,80],
      "is_necessary":0,
      "description":"企业微信客户端HTTPDNS解析"
    },
    {
      "ip":"115.238.203.110",
      "protocol":"TCP",
      "port":[443,80],
      "is_necessary":1,
      "description":"企业微信客户端HTTPDNS解析"
    }
  ]
}
```
**参数说明**

| 参数 | 类型 | 说明 |
| ------- | ------ | ---------- |
| errcode | int32 | 错误码 |
| errmsg | string | 错误码说明 |
|domain_list.domain|string|域名|
|domain_list.universal_domian|string|泛域名|
|domain_list.protocol|string|协议 如TCP UDP|
|domain_list.port|int32|端口号列表|
|domain_list.is_necessary|int32|是否必要，0-否 1-是， 如果必要的域名或IP被拦截，将导致企业微信的功能出现异常|
|domain_list.description|string|域名涉及到的功能的描述信息|
|ip_list.ip|string|ip地址|
|ip_list.protocol|string|协议 如TCP UDP|
|ip_list.port|int32|端口号列表|
|ip_list.is_necessary|int32|是否必要，0-否 1-是， 如果必要的域名或IP被拦截，将导致企业微信的功能出现异常|
|ip_list.description|string|IP涉及到的功能的描述信息|
