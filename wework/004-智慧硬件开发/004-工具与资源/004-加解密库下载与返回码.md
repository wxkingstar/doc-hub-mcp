---
title: "加解密库下载与返回码"
doc_id: 10128
category_id: 90468
source_url: https://developer.work.weixin.qq.com/document/path/10128
---
[TOC]

## 加解密库下载及示例

### c++库
[xml版本(2018年10月11日更新,点击下载)](https://open.work.weixin.qq.com/wwopen/downloadfile/c++.zip "c++库(2014年9月22日更新,点击下载)")

注意事项：
* WXBizMsgCrypt.h声明了WXBizMsgCrypt类，提供用户接入企业微信的三个接口。WXBizMsgCrypt.cpp文件提供了三个接口的实现。Sample.cpp文件提供了如何使用这三个接口的示例。
* WXBizMsgCrypt类封装了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证接收消息的url，收到用户回复消息的解密以及开发者回复消息的加密过程。使用方法可以参考Sample.cpp文件。
* 加解密协议请参考企业微信官方文档。
* 加解密过程使用了开源的[openssl](https://www.openssl.org)和[tinyxml2](https://github.com/leethomason/tinyxml2)库，请开发者自行安装最新版本之后使用，并定期更新到最新版本。

[json版本[(2020年9月1日更新,点击下载)]](https://codeload.github.com/workweixin/weworkapi_cplusplus/zip/master "[(2020年9月1日更新,点击下载)]")

注意事项：
* 回调sdk json版本
* WXBizJsonMsgCrypt.h声明了WXBizJsonMsgCrypt类，提供用户接入企业微信的三个接口。WXBizJsonMsgCrypt.cpp文件提供了三个接口的实现。Sample.cpp文件提供了如何使用这三个接口的示例。
* WXBizJsonMsgCrypt类封装了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证回调url，收到用户回复消息的解密以及开发者回复消息的加密过程。使用方法可以参考Sample.cpp文件。
* 加解密协议请参考企业微信官方文档。
* 加解密过程使用了开源的[openssl](https://www.openssl.org/)和[rapidJson](https://github.com/Tencent/rapidjson/releases/tag/v1.1.0)库，请开发者自行安装最新版本之后使用，并定期更新到最新版本。

### python库
[(点击下载)](https://dldir1.qq.com/wework/wwopen/callback/weworkapi_python-master.zip)

注意事项：
* WXBizMsgCrypt.py文件封装了WXBizMsgCrypt接口类，提供了用户接入企业微信的三个接口，Sample.py文件提供了如何使用这三个接口的示例，ierror.py提供了错误码。
* WXBizMsgCrypt封装了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证接收消息的url、接收消息的解密以及开发者回复消息的加密过程。使用方法可以参考Sample.py文件。
* 本代码用到了PyCryptodome第三方库，请开发者自行安装此库再使用，并定期更新到最新版本。

### php库
[(点击进入)](https://dldir1.qq.com/wework/wwopen/callback/callback_php.tar.gz)

注意事项：

* WXBizMsgCrypt.php文件提供了WXBizMsgCrypt类的实现，是用户接入企业微信的接口类。Sample.php提供了示例以供开发者参考。errorCode.php, pkcs7Encoder.php, sha1.php, xmlparse.php文件是实现这个类的辅助类，开发者无须关心其具体实现。
* WXBizMsgCrypt类封装了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证接收消息的url、接收消息的解密以及开发者回复消息的加密过程。使用方法可以参考Sample.php文件。

### java库
[xml版本(2018年10月11日更新,点击下载)](https://open.work.weixin.qq.com/wwopen/downloadfile/java.zip "java库(2014年9月24日更新,点击下载)")

注意事项：

* com\qq\weixin\mp\aes目录下是用户需要用到的接入企业微信的接口，其中WXBizMsgCrypt.java文件提供的WXBizMsgCrypt类封装了用户接入企业微信的三个接口，其它的类文件用户用于实现加解密，用户无须关心。sample.java文件提供了接口的使用示例。
* WXBizMsgCrypt封装了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证接收消息的url、接收消息的解密以及开发者回复消息的加密过程。使用方法可以参考Sample.java文件。
* 请开发者使用jdk1.6或以上的版本。针对org.apache.commons.codec.binary.Base64，需要导入jar包commons-codec-1.9（或comm ons-codec-1.8等其他版本），我们有提供，官方下载地址：
[https://commons.apache.org/proper/commons-codec/download_codec.cgi](https://commons.apache.org/proper/commons-codec/download_codec.cgi "https://commons.apache.org/proper/commons-codec/download_codec.cgi")
* 异常java.security.InvalidKeyException:illegal Key Size的解决方案：在官方网站下载JCE无限制权限策略文件（请到官网下载对应的版本， 例如JDK7的下载地址：[https://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html](https://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html "https://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html") )：下载后解压，可以看到local_policy.jar和US_export_policy.jar以及readme.txt。
如果安装了JRE，将两个jar文件放到%JRE_HOME% \lib\security目录下覆盖原来的文件，如果安装了JDK，将两个jar文件放到%JDK_HOME%\jre\lib\security目录下覆盖原来文件。

[json版本(2020年9月1日更新,点击下载](https://codeload.github.com/workweixin/weworkapi_java/zip/master "json版本(2020年9月1日更新,点击下载")

注意事项：

* 企业微信回调sdk json版本
* com\qq\weixin\mp\aes目录下是用户需要用到的接入企业微信的接口，其中WXBizJsonMsgCrypt.java文件提供的WXBizJsonMsgCrypt类封装了用户接入企业微信的三个接口，其它的类文件用户用于实现加解密，用户无须关心。sample.java文件提供了接口的使用求例。
* WXBizJsonMsgCrypt封装了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证回调url，收到用户回复消息的解密以及开发者回复消息的加密过程。使用方法可以参考Sample.java文件。
* 加解密协议请参考企业微信官方文档。
* 请开发者使用jdk1.6以上的版本。针对org.apache.commons.codec.binary.Base64，需要导入架包commons-codec-1.9（或commons-codec-1.8等其他版本），我们有提供，官方下载地址：[https://commons.apache.org/proper/commons-codec/download_codec.cgi](https://commons.apache.org/proper/commons-codec/download_codec.cgi)
* 针对json解析，需要编译导入架包json.jar，我们有提供，官方源码下载地址 : [https://github.com/stleary/JSON-java](https://github.com/stleary/JSON-java)

* 异常java.security.InvalidKeyException:illegal Key Size的解决方案：
在官方网站下载JCE无限制权限策略文件（JDK7的下载地址：[https://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html](https://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)
下载后解压，可以看到local_policy.jar和US_export_policy.jar以及readme.txt。如果安装了JRE，将两个jar文件放到%JRE_HOME%\lib\security目录下覆盖原来的文件，如果安装了JDK，将两个jar文件放到%JDK_HOME%\jre\lib\security目录下覆盖原来文件

### c#库
[(2018年10月11日更新,点击下载)](https://open.work.weixin.qq.com/wwopen/downloadfile/csharp.zip "c#库(2014年9月22日更新,点击下载)")

注意事项：

* Cryptography.cs文件封装了AES加解密过程，用户无须关心具体实现。WXBizMsgCrypt.cs文件提供了用户接入企业微信的三个接口，Sample.cs文件提供了如何使用这三个接口的示例。
* WXBizMsgCrypt.cs封装了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证接收消息的url、接收消息的解密以及开发者回复消息的加密过程。使用方法可以参考Sample.cs文件。

### golang库
[xml版本(2019年1月18日更新,点击下载)](https://github.com/sbzhu/weworkapi_golang/archive/master.zip "c#库(2014年9月22日更新,点击下载)")

注意事项：

* wxbizmsgcrypt.go文件封装了AES加解密过程，并且实现了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证接收消息的url、接收消息的解密以及开发者回复消息的加密过程。用户无须关心具体实现。sample.go文件提供了如何使用这三个接口的示例。

[json版本(2020年9月1日更新,点击下载](https://codeload.github.com/workweixin/weworkapi_golang/zip/master "json版本(2020年9月1日更新,点击下载")

注意事项：
* 回调sdk json版本
* wxbizjsonmsgcrypt.go文件中声明并实现了WXBizJsonMsgCrypt类，提供用户接入企业微信的三个接口。sample.go文件提供了如何使用这三个接口的示例。
* WXBizJsonMsgCrypt类封装了VerifyURL, DecryptMsg, EncryptMsg三个接口，分别用于开发者验证回调url，收到用户回复消息的解密以及开发者回复消息的加密过程。使用方法可以参考sample.go文件。
* 加解密协议请参考企业微信官方文档。

### node库
[npm 地址](https://www.npmjs.com/package/@wecom/crypto)

````
# with npm
npm install @wecom/crypto
# with yarn
yarn add @wecom/crypto
````

## 加解密库的返回码

|返回码|说明|
|----|----|
|-40001|签名验证错误|
|-40002|xml/json解析失败|
|-40003|sha加密生成签名失败|
|-40004|AESKey 非法|
|-40005|ReceiveId 校验错误|
|-40006|AES 加密失败|
|-40007|AES 解密失败|
|-40008|解密后得到的buffer非法|
|-40009|base64加密失败|
|-40010|base64解密失败|
|-40011|生成xml/json失败|
