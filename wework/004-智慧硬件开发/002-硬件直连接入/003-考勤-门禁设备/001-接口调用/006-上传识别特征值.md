---
title: "上传识别特征值"
doc_id: 15355
category_id: 93982
source_url: https://developer.work.weixin.qq.com/document/path/15355
---
用户录入指纹或人脸信息后，将信息同步至云端。最多200人。

**请求包体：**

```
{
 "cmd":"upload_userinfo",
 "headers":{
 "req_id":"xxxxx"
 },
 "body":{
 "oper_id":"xxxx",
 "errcode":0,
 "errmsg":"ok",
 "userinfo":[
 {
 "userid":"x1",
 "user_type":0,
 "fp":[
 {
 "id":0,
 "data":"xxxx"
 },
 {
 "id":1,
 "data":"xxxx"
 }
 ],
 "fp_algorithm":"xxx1",
 "fa_list":[
 {
 "id":0,
 "data":"xxxx"
 },
 {
 "id":1,
 "data":"xxxx"
 }
 ],
 "fa_algorithm":"xxxx1"
 },
 {
 "userid":"x2",
 "fa_list":[
 {
 "id":0,
 "data":"xxxx"
 },
 {
 "id":1,
 "data":"xxxx"
 }
 ],
 "fa_algorithm":"xxxx1",
 "user_type":1
 },
 {
 "userid":"x3",
 "fa":"xxxx"
 }
 ]
 }
}
```

**参数说明：**
 
| 参数名 | 是否必须 | 类型 | 描述 |
| ------------ | ---- | ------------- | ---------------------------------------- |
| req_id | 是 | string | 请求的id，自行保证不会重复即可 |
| userid | 是 | string | 成员id（字符串），长度为1-128个字节。当为访客userid时，参见[访客userid规则说明](#15401) |
| user_type | 否 | Uint32 | 成员的类型： 0：企业员工 1：访客 2：学生 不填则默认值为0 |
| fa | 否 | string | 人脸特征值base64编码，可不填, 该字段只对企业员工进行兼容，访客请使用fa_list |
| fa_list | 否 | Array(object) | 人脸特征值列表，当fa_list存在时，忽略fa的值 |
| fa_list: id | 否 | string | 人脸特征值编号，支持0-11，共12个人脸数据 |
| fa_list：data | 否 | string | 人脸特征值base64编码，可不填 |
| fa_algorithm | 否 | string | 上报的人脸特征值对应的算法版本，如果填写default，则使用的算法版本等同于考勤机订阅时上报指纹算法为空时使用的特征值数据 |
| fp | 否 | Array(object) | 指纹特征值 |
| fp: id | 否 | string | 指纹特征值编号， 支持0-9，共十个指纹 |
| fp：data | 否 | string | 指纹特征值(base64) |
| fp_algorithm | 否 | string | 上报的指纹特征值对应的算法版本，如果填写default 等同于不填写这个字段，即使用的算法版本等同于考勤机订阅时上报人脸算法为空时使用的特征值数据 |
| oper_id | 否 | String | 录入指纹的操作id，由3.2 （进入录入信息）或者3.7（推送成员录制人脸事件）下发下去。 |
| errcode | 否 | int32 | 本次操作的返回值，0表示录入成功， 非0表示失败，非0的具体错误码可以机器自行定义。 |
| errmsg | 否 | string | 本次操作的结果描述， 如果录入成功请填写”ok”。其他errmsg可以机器自行定义。<br/>录入失败时，返回的errmsg将在企业微信录入流程中显示给用户。 |

>**注：**oper_id，errcode，errmsg这三个参数填写时机为：在操作界面录入单个成员指纹1min内调用upload_userinfo接口。如果设备断网，后续网络恢复后的补推可以不填写，用户自行在考勤机录入信息的，不用填写operid。

>访客或者企业内成员通过企业微信app录制也需要传回oper_id，页面会根据回传的errcode和errmsg展示录制结果。

>企业微信允许第三方应用设置访客人脸。此处建议设备访客的信息补推一律都不要合并，且尽量带上oper_id，errcode，errmsg，方便企业微信通知第三方应用每个访客的录制结果。

> fa_list fp字段中，数据必须为不可逆推的特征值，不可上传人脸或指纹原图。

**返回结果：** 

```
{
  "headers": {
    "req_id" : "xxxx"
  },
  "body": {
    "fail_list" : [
      {
        "userid":"x1",
        "user_type":0
      },
      {
        "userid":"x3",
        "user_type":0
      }
    ]
  },
  "errcode": 0,
  "errmsg": "ok"
}
```

**参数说明：** 

| 参数名 | 描述 |
| --------- | ------------------- |
| req_id | 透传请求的req_id |
| user_type | 成员的类型： 0：企业员工 1：访客 2：学生 不填则默认值为0 |
| errcode | 错误码 |
| errmsg | 错误码描述 |
| fail_list | 上传失败的用户， 返回值为userid |
