---
title: "访客列表变更事件"
doc_id: 15381
category_id: 93999
source_url: https://developer.work.weixin.qq.com/document/path/15381
---
登记/删除访客，或者访客人脸信息变化时推送。

**指令包体：**

```
{
  "cmd" : "push_visitor_list_change",
  "headers": 
  {
    "req_id" : "xxxx"
  },
  "body": 
  {
    "timestamp":1568185959,
    "visitor_version": 5,
    "create_visitor": [
      {
        "userid":"x1/1000006"
      },
      {
        "userid":"x2/1000006"
      }
    ],
    "update_visitor":[
      {
        "userid":"x3/1000006"
      }
    ],
    "delete_visitor":[
      {
        "userid":"x4/1000006"
      }
    ]
  }
}
```

**参数说明：**

| 参数名 | 类型 | 描述 |
| --------- | ------ | -------------------------------- |
| req_id | string | 透传请求的req_id |
| cmd | string | 指令号，此处固定为push_visitor_list_change |
| timestamp | Uint32 | Unix时间戳(秒) |
| create_visitor | Array(data) | 新增访客列表 |
| update_visitor | Array(data) | 更新访客信息列表 |
| delete_visitor | Array(data) | 删除访客列表 |
| userid | String | 访客id（字符串），长度为1-64个字节 |
| visitor_version | Uint32 | 当前云端通讯录版本号，版本号严格递增（每次增加1），当推送版本号跟考勤机版本号之间出现空洞（\>=2）时，说明考勤机可能遗漏推送事件，考勤机应记录下来，选择一定的时间全量拉取通讯录。 |
