---
title: "全量获取设备成员列表"
doc_id: 40187
category_id: 95984
source_url: https://developer.work.weixin.qq.com/document/path/40187
---
获取设备可用范围内的成员列表。

**请求方式：**POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/openhw/device/get_userinfo_by_page?device_access_token=DEVICE_ACCESS_TOKEN
**请求包体：**

```
{
  "cursor":"CURSOR",
  "limit":100,
  "only_perm_version":false
}
```

**参数说明：**
 
| 参数名 | 是否必须 | 类型 | 描述 |
| ------ | ---- | ------ | ---------------- |
| device_access_token | 是 | string | device_access_token ,获取方式见[获取设备型号调用凭证](#40195) |
| cursor | 否 | string | 上一次调用时返回的next_cursor，初次调用可以不填 |
| limit | 否 | uint32 | 返回的最大记录数，整型，最大值200，默认值100 | 
| only_perm_version | 否 | bool | 是否仅获取perm_version，若为true，会忽略输入的其他参数 |

**返回结果：** 

```
{
  "errcode": 0,
  "errmsg": "ok"，
  "next_cursor": "xxxx",
  "perm_version":5,
  "userinfo":{
    "useritems":[
      {
        "open_userid":"ww***********",
        "user_name":"张三",
        "user_type":1,
        "pass_rule":{
          "rule_list": [
            {
              "id":0, 
              "rule":"9:00-10:00 * * 1-5 *",
              "effect_time":1542874137
            },
            {
              "id":1, 
              "rule":"9:30-10:00 * * 6 *",
              "effect_time":1542874137
            }
          ]
        }
      }
    ]
  }
}
```

**参数说明：** 

| 参数名 | 描述 |
| ------------ | ----------- |
| errcode | 错误码 |
| errmsg | 错误码描述 |
| next_cursor | 当前数据最后一个key值，如果下次调用带上该值则从该key值往后拉，用于实现分页拉取，返回空字符串代表已经是最后一页 |
| perm_version | 当前云端通讯录版本号 |
| userinfo.useritems.open_userid | 成员open_userid |
| userinfo.useritems.user_name | 成员 姓名 |
| userinfo.useritems.user_type | 成员类型：0-企业成员；2-学生 |
| userinfo.useritems.pass_rule |放行规则列表，id为编号，rule为具体规则，其解析语法请参考附录[门禁放行规则语法说明](#15400) |
