---
title: "用户扫码指令"
doc_id: 43754
category_id: 97390
source_url: https://developer.work.weixin.qq.com/document/path/97390
---
最后更新：2023/01/03

企业成员使用企业微信app扫描[设备管理二维码](#44935)或者[设备身份二维码](#44936)时，此时企业微信云端向设备推送该事件

**请求方式：**POST（**HTTPS**）
**请求地址：**https://127.0.0.1/suite/receive?msg_signature=3a7b08bb8e6dbce3c9671d6fdb69d15066227608&amp;timestamp=1403610513&amp;nonce=380320359

**指令包体：**

```
{
 "msg_type":"command",
 "base_info":{
 "req_id":"xxx",
 "device_sn":"xxx",
 "createtime":1658332800,
 "model_id":"xxx",
 "auth_corpid":"xxx",
 "service_corpid":"xxx"
 },
 "command":{
 "command_type":"user_scan",
 "oper_id":"xxxxx",
 "open_userid":"xx",
 "state":"STATE",
 "user_type":1,
 "auth_code":"xxxxx",
 "expires_in":300,
 "auth_code_type":1
 }
}}
```

| 参数名 | 类型 | 描述 |
| ------ | ------ | ---------------- |
| msg_type | string | 用于表示本消息是 事件event 还是指令 command，此处固定为command , 对应command节点数据有效 |
| command | 结构体 | 指令数据 |
| command_type | string |指令类型，成员录入识别信息，此处固定为user_scan |
| oper_id | string | 本次操作的id |
| open_userid | string | 成员id（字符串） |
| state | String | 二维码上的自定义参数，参见“[生成打印机二维码](#15948)”或者“[设备登录二维码](#16638)” |
| user_type | uint32 | 扫码成员的类型。0：普通成员， 1：管理员 |
| auth_code | string | 授权码，用于其他特定接口调用 |
| expires_in | uint32 | 授权码有效时间，单位秒 |
| auth_code_type | uint32 | 授权码类型，1 扫描文件 |
| base_info | 结构体 | 固定字段基础数据 |
| req_id | string | 请求req_id，可以用于排重 |
| device_sn | string | 设备序列号，在第三方管理端登记的SN |
| createtime | uint32 | 事件触发时间戳（unix 时间戳 单位：秒）|
| model_id | string | 设备型号modelid |
| auth_corpid | string | 绑定设备企业的corpid |
| service_corpid | string | 硬件提供商企业corpid |

> 服务商的响应必须在1000ms内完成

**用户扫码被动回包**
厂商云收到此事件回调后，需要被动回报当前设备，回包加密 encrypt 字段内容回包格式如下
```
{
 "online_status":1
}
```
**参数说明：**
| 参数名 | 类型 | 描述 |
| ------ | ------ | ---------------- |
| online_status | uint32 | 设备在线状态：1-在线，2-离线 |
> 被动加密回包参考 [回调被动回包格式](#40739)
