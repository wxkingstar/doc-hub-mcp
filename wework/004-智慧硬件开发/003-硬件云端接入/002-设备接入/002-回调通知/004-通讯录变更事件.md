---
title: "通讯录变更事件"
doc_id: 40192
category_id: 95989
source_url: https://developer.work.weixin.qq.com/document/path/95989
---
最后更新：2024/01/02

当设备可用范围内有新增或减少人员时，或者可用范围内的人员user_name发生变化时，企业微信回调事件到厂商在设备型号详情中登记的回调URL

**设备可见范围成员变更事件**

**请求方式：**POST（**HTTPS**）
**请求地址：**https://127.0.0.1/suite/receive?msg_signature=3a7b08bb8e6dbce3c9671d6fdb69d15066227608&amp;timestamp=1403610513&amp;nonce=380320359
**请求包体：**

```
{
 "msg_type":"event",
 "base_info":{
 "req_id":"xxx",
 "device_sn":"xxx",
 "createtime":1658332800,
 "model_id":"xxx",
 "auth_corpid":"xxx",
 "service_corpid":"xxx"
 },
 "event":{
 "event_type":"contact_change",
 "perm_version":5,
 "create_user":[
 {
 "open_userid":"xxxt",
 "user_type":0
 },
 {
 "open_userid":"xxxy",
 "user_type":0
 }
 ],
 "update_user":[
 {
 "open_userid":"xxxu",
 "user_type":0
 }
 ],
 "delete_user":[
 {
 "open_userid":"xxxi",
 "user_type":0
 }
 ]
 }
}
```

**参数说明：**
 
| 参数名 | 类型 | 描述 |
| ------ | ------ | ---------------- |
| msg_type | string | 用于表示本消息是 事件event 还是指令 command，此处固定为event , 对应command节点数据有效 |
| event | 结构体 | 指令数据 |
| event_type | string |指令类型，通讯录成员范围变更，此处固定为 contact_change |
| create_user | array(data) | 新增成员列表 |
| update_user | array(data) | 更新成员指纹信息成员列表 |
| delete_user | array(data) | 删除成员列表 |
| open_userid | string | 成员id（字符串），长度为1-64个字节 |
| user_type | uint32 | 成员的类型： 0：企业员工 2：学生 不填则默认值为0 |
| perm_version | uint32 | 当前云端通讯录版本号，版本号严格递增（每次增加1），当推送版本号跟考勤机版本号之间出现空洞（\>=2）时，说明考勤机可能遗漏推送事件，考勤机应记录下来，选择一定的时间全量拉取通讯录。 |
| base_info | 结构体 | 固定字段基础数据 |
| req_id | string | 请求req_id，可以用于排重 |
| device_sn | string | 设备序列号，在第三方管理端登记的SN |
| createtime | uint32 | 事件触发时间戳（unix 时间戳 单位：秒）|
| model_id | string | 设备型号modelid |
| auth_corpid | string | 绑定设备企业的corpid |
| service_corpid | string | 硬件提供商企业corpid |

> 服务商的响应必须在1000ms内完成
