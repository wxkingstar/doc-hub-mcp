---
title: "推送打印转码任务"
doc_id: 42343
category_id: 97075
source_url: https://developer.work.weixin.qq.com/document/path/42343
---
用户选择文件进行打印时，在提交打印任务之前，企业微信会将用户文件加密后同打印设置参数回调到型号回调地址上
**请求方式：**POST（**HTTPS**）
**请求地址：**https://127.0.0.1/suite/receive?msg_signature=3a7b08bb8e6dbce3c9671d6fdb69d15066227608&timestamp=1403610513&nonce=380320359
**请求包体：**
```
{
 "msg_type":"command",
 "base_info":{
 "req_id":"xxx",
 "device_sn":"xxx",
 "createtime":1658332800,
 "model_id":"xxx",
 "auth_corpid":"xxx",
 "service_corpid":"xxx"
 },
 "command":{
 "command_type":"printer_job_trans",
 "open_userid":"xxx",
 "jobid":"JOBID",
 "download_url":"file_download_url",
 "encoding_aeskey":"file_aes_key",
 "doc_name":"aa.doc",
 "doc_size":3317,
 "trans_setting":{
 "version":1,
 "setting_list":[
 {
 "key":"纸张大小",
 "value":[
 "A4"
 ]
 },
 {
 "key":"单双面",
 "value":[
 "单面"
 ]
 }
 ]
 }
 }
}
```

**参数说明：**
| 参数名 | 类型 | 描述 |
| ------ | ------ | ---------------- |
| msg_type | string | 用于表示本消息是 事件event 还是指令 command，此处固定为command , 对应command节点数据有效 |
| command | 结构体 | 指令数据 |
| command_type | string |指令类型，此处固定为printer_job_trans |
| open_userid | string | 发起当前打印预览任务的用户 |
| jobid | string | 任务id |
| download_url | string | 预览文件下载链接 |
| aes_key | string | 文件下载后通过aes_key解密得到预览转码原始文件 |
| doc_name | string | 文件名称 |
| doc_size | string | 预览转码原始文件大小 |
| trans_setting | 结构体 | 转码打印信息 |
| trans_setting.version| uint32 | 预览转码设置列表 版本号，当用户更改打印配置选项时，version自增，服务商只需要对接收到的最新version进行转码即可 |
| trans_setting.setting_list | 数组列表 | 预览转码设置列表 |
| trans_setting.setting_list.key | string | 设置项名称，utf8编码 |
| trans_setting.setting_list.value | 列表 | 设置项的值，字符串数组，utf8编码，可以表示复选值 |
| base_info | 结构体 | 固定字段基础数据 |
| req_id | string | 请求req_id，可以用于排重 |
| device_sn | string | 设备序列号，在第三方管理端登记的SN |
| createtime | uint32 | 事件触发时间戳（unix 时间戳 单位：秒）|
| model_id | string | 设备型号modelid |
| auth_corpid | string | 绑定设备企业的corpid |
| service_corpid | string | 硬件提供商企业corpid |
> 服务商的响应必须在1000ms内完成
> 回调中download_url可直接下载，有效期为10分钟，获取的文件数据是经过加密数据，解密请参考 [获取打印文件](#42205)
