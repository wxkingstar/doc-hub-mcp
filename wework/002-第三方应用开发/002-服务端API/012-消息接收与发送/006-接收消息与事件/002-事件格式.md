---
title: "事件格式"
doc_id: 12974
category_id: 90376
source_url: https://developer.work.weixin.qq.com/document/path/12974
---
[TOC]

开启接收消息模式后，可以配置接收事件消息。
当企业成员通过企业微信APP或微信插件（原企业号）触发进入应用、上报地理位置、点击菜单等事件时，企业微信会将这些事件消息发送给企业后台。
如何接收消息已经在[使用接收消息](#12977/使用接收消息)说明，本小节是对事件消息结构体的说明。

<font color=red>注：以下出现的数据包仅是接收的消息包中的[Encrypt参数](#12977/使用接收消息)解密后的内容说明</font>

### 成员关注及取消关注事件

> 小程序在管理端开启接收消息配置后，也可收到关注/取消关注事件
> 本事件触发时机为：
1. 成员已经加入企业，管理员添加成员到应用可见范围(或移除可见范围)时
2. 成员已经在应用可见范围，成员加入(或退出)企业时、或者被禁用

事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[UserID]]></FromUserName>
  <CreateTime>1348831860</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[subscribe]]></Event>
  <AgentID>1</AgentID>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型，subscribe(关注)、unsubscribe(取消关注) |
 | EventKey | 事件KEY值，此事件该值为空 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 
### 进入应用
> 本事件在成员进入企业微信的应用时触发

事件示例：
```

<xml><ToUserName><
- ![CDATA[toUser]]></ToUserName>
<FromUserName><
- ![CDATA[FromUser]]></FromUserName>
<CreateTime>1408091189</CreateTime>
<MsgType><
- ![CDATA[event]]></MsgType>
<Event><
- ![CDATA[enter_agent]]></Event>
<EventKey><
- ![CDATA[]]></EventKey>
<AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：enter_agent |
 | EventKey | 事件KEY值，此事件该值为空 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 

### 上报地理位置

> 成员同意上报地理位置后，每次在进入应用会话时都会上报一次地理位置。
> 企业可以在管理端修改应用是否需要获取地理位置权限。

事件示例：
```
<xml>
 <ToUserName><
- ![CDATA[toUser]]></ToUserName>
 <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
 <CreateTime>123456789</CreateTime>
 <MsgType><
- ![CDATA[event]]></MsgType>
 <Event><
- ![CDATA[LOCATION]]></Event>
 <Latitude>23.104</Latitude>
 <Longitude>113.320</Longitude>
 <Precision>65.000</Precision>
 <AgentID>1</AgentID>
 <AppType><
- ![CDATA[wxwork]]></AppType>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：LOCATION |
 | Latitude | 地理位置纬度 |
 | Longitude | 地理位置经度 |
 | Precision | 地理位置精度 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 | AppType |app类型，在企业微信固定返回wxwork，在微信不返回该字段 |
 

### 异步任务完成事件推送

> 本事件是成员在使用异步任务接口时，用于接收任务执行完毕的结果通知。

事件示例：
```
<xml><ToUserName><
- ![CDATA[wwddddccc7775555aaa]]></ToUserName>
<FromUserName><
- ![CDATA[FromUser]]></FromUserName>
<CreateTime>1425284517</CreateTime>
<MsgType><
- ![CDATA[event]]></MsgType>
<Event><
- ![CDATA[batch_job_result]]></Event>
<BatchJob><JobId><
- ![CDATA[S0MrnndvRG5fadSlLwiBqiDDbM143UqTmKP3152FZk4]]></JobId>
<JobType><
- ![CDATA[sync_user]]></JobType>
<ErrCode>0</ErrCode>
<ErrMsg><
- ![CDATA[ok]]></ErrMsg>
</BatchJob>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |----- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：batch_job_result |
 | JobId | 异步任务id，最大长度为64字符 |
 | JobType | 操作类型，字符串，目前分别有：sync_user(增量更新成员)、 replace_user(全量覆盖成员）、invite_user(邀请成员关注）、replace_party(全量覆盖部门)|
 | ErrCode | 返回码 |
 | ErrMsg | 对返回码的文本描述内容 |

###通讯录变更事件
>当企业通过通讯录助手开通通讯录权限后，成员的变更会通知给企业。变更的事件，将推送到企业微信管理端通讯录助手中的‘接收事件服务器’。由通讯录同步助手调用接口触发的变更事件不回调通讯录同步助手本身。管理员在管理端更改组织架构或者成员信息以及企业微信的成员在客户端变更自己的个人信息将推送给通讯录同步助手。第三方通讯录变更事件参见[第三方回调协议](#10982)

#### 新增成员事件
企业内部开发参考[新增成员事件](#15004/新增成员事件)，第三方参考[新增成员事件](#14948/%E6%96%B0%E5%A2%9E%E6%88%90%E5%91%98%E4%BA%8B%E4%BB%B6)

#### 更新成员事件
企业内部开发参考[更新成员事件](#15004/更新成员事件)，第三方参考[更新成员事件](#14948/%E6%9B%B4%E6%96%B0%E6%88%90%E5%91%98%E4%BA%8B%E4%BB%B6)

#### 删除成员事件
企业内部开发参考[删除成员事件](#15004/删除成员事件)，第三方参考[删除成员事件](#14948/%E5%88%A0%E9%99%A4%E6%88%90%E5%91%98%E4%BA%8B%E4%BB%B6)

#### 新增部门事件

事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_contact]]></Event>
  <ChangeType>create_party</ChangeType>
  <Id>2</Id>
  <Name><
- ![CDATA[张三]]></Name>
  <ParentId>1</ParentId>
  <Order>1</Order>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_contact |
 |ChangeType|此时固定为create_party |
 |Id|部门Id |
 |Name|部门名称 |
 |ParentId|父部门id |
 |Order|部门排序 |
 
#### 更新部门事件
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_contact]]></Event>
  <ChangeType>update_party</ChangeType>
  <Id>2</Id>
  <Name><
- ![CDATA[张三]]></Name>
  <ParentId>1</ParentId>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_contact |
 |ChangeType|此时固定为update_party |
 |Id|部门Id |
 |Name|部门名称，仅发送变更时传递 |
 |ParentId|父部门id，仅发送变更时传递 |
 
#### 删除部门事件
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_contact]]></Event>
  <ChangeType>delete_party</ChangeType>
  <Id>2</Id>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_contact |
 |ChangeType|此时固定为delete_party |
 |Id|部门Id |

#### 标签成员变更事件
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_contact]]></Event>
  <ChangeType><
- ![CDATA[update_tag]]></ChangeType>
  <TagId>1</TagId>
  <AddUserItems><
- ![CDATA[zhangsan,lisi]]></AddUserItems>
  <DelUserItems><
- ![CDATA[zhangsan1,lisi1]]></DelUserItems>
  <AddPartyItems><
- ![CDATA[1,2]]></AddPartyItems>
  <DelPartyItems><
- ![CDATA[3,4]]></DelPartyItems>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_contact |
 |ChangeType|固定为update_tag |
 |TagId|标签Id |
 |AddUserItems|标签中新增的成员userid列表，用逗号分隔 |
 |DelUserItems|标签中删除的成员userid列表，用逗号分隔 |
 |AddPartyItems|标签中新增的部门id列表，用逗号分隔 |
 |DelPartyItems|标签中删除的部门id列表，用逗号分隔 |

### 菜单事件

> 成员点击自定义菜单后，企业微信会把点击事件推送给应用。
> 点击菜单弹出子菜单，不会产生上报。
> 企业微信iPhone1.2.2/Android1.2.2版本开始支持菜单事件，旧版本企业微信成员点击后将没有回应，应用不能正常接收到事件推送。
> 自定义菜单可以在管理后台的应用设置界面配置。

#### 点击菜单拉取消息的事件推送
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
  <CreateTime>123456789</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[click]]></Event>
  <EventKey><
- ![CDATA[EVENTKEY]]></EventKey>
  <AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：click |
 | EventKey | 事件KEY值，与自定义菜单接口中KEY值对应 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |

#### 点击菜单跳转链接的事件推送
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
  <CreateTime>123456789</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[view]]></Event>
  <EventKey><
- ![CDATA[www.qq.com]]></EventKey>
  <AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：view |
 | EventKey | 事件KEY值，设置的跳转URL |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 
 
 #### 点击菜单跳转小程序的事件推送
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
  <CreateTime>123456789</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[view_miniprogram]]></Event>
  <EventKey><
- ![CDATA[index]]></EventKey>
  <AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：view_miniprogram |
 | EventKey | 事件KEY值，设置的跳转小程序路径 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 
 
#### 扫码推事件的事件推送
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
  <CreateTime>1408090502</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[scancode_push]]></Event>
  <EventKey><
- ![CDATA[6]]></EventKey>
  <ScanCodeInfo><ScanType><
- ![CDATA[qrcode]]></ScanType>
  <ScanResult><
- ![CDATA[1]]></ScanResult>
  </ScanCodeInfo>
  <AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：scancode_push |
 | EventKey | 事件KEY值，与自定义菜单接口中KEY值对应 |
 | ScanCodeInfo | 扫描信息 |
 | ScanType | 扫描类型，一般是qrcode |
 | ScanResult | 扫描结果，即二维码对应的字符串信息 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 
 
#### 扫码推事件且弹出“消息接收中”提示框的事件推送
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
  <CreateTime>1408090606</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[scancode_waitmsg]]></Event>
  <EventKey><
- ![CDATA[6]]></EventKey>
  <ScanCodeInfo><ScanType><
- ![CDATA[qrcode]]></ScanType>
  <ScanResult><
- ![CDATA[2]]></ScanResult>
  </ScanCodeInfo>
  <AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：scancode_waitmsg |
 | EventKey | 事件KEY值，与自定义菜单接口中KEY值对应 |
 | ScanCodeInfo | 扫描信息 |
 | ScanType | 扫描类型，一般是qrcode |
 | ScanResult | 扫描结果，即二维码对应的字符串信息 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |

#### 弹出系统拍照发图的事件推送
事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
  <CreateTime>1408090651</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[pic_sysphoto]]></Event>
  <EventKey><
- ![CDATA[6]]></EventKey>
  <SendPicsInfo><Count>1</Count>
  <PicList><item><PicMd5Sum><
- ![CDATA[1b5f7c23b5bf75682a53e7b6d163e185]]></PicMd5Sum>
  </item>
  </PicList>
  </SendPicsInfo>
  <AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：pic_sysphoto |
 | EventKey | 事件KEY值，与自定义菜单接口中KEY值对应 |
 | SendPicsInfo | 发送的图片信息 |
 | Count | 发送的图片数量 |
 | PicList | 图片列表 |
 | PicMd5Sum | 图片的MD5值，开发者若需要，可用于验证接收到图片 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 
 
 
#### 弹出拍照或者相册发图的事件推送

事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
  <CreateTime>1408090816</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[pic_photo_or_album]]></Event>
  <EventKey><
- ![CDATA[6]]></EventKey>
  <SendPicsInfo><Count>1</Count>
  <PicList><item><PicMd5Sum><
- ![CDATA[5a75aaca956d97be686719218f275c6b]]></PicMd5Sum>
  </item>
  </PicList>
  </SendPicsInfo>
  <AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：pic_photo_or_album |
 | EventKey | 事件KEY值，与自定义菜单接口中KEY值对应 |
 | SendPicsInfo | 发送的图片信息 |
 | Count | 发送的图片数量 |
 | PicList | 图片列表 |
 | PicMd5Sum | 图片的MD5值，开发者若需要，可用于验证接收到图片 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 

#### 弹出微信相册发图器的事件推送

事件示例：
```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[FromUser]]></FromUserName>
  <CreateTime>1408090816</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[pic_weixin]]></Event>
  <EventKey><
- ![CDATA[6]]></EventKey>
  <SendPicsInfo><Count>1</Count>
  <PicList><item><PicMd5Sum><
- ![CDATA[5a75aaca956d97be686719218f275c6b]]></PicMd5Sum>
  </item>
  </PicList>
  </SendPicsInfo>
  <AgentID>1</AgentID>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：pic_weixin |
 | EventKey | 事件KEY值，与自定义菜单接口中KEY值对应 |
 | SendPicsInfo | 发送的图片信息 |
 | Count | 发送的图片数量 |
 | PicList | 图片列表 |
 | PicMd5Sum | 图片的MD5值，开发者若需要，可用于验证接收到图片 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |

#### 弹出地理位置选择器的事件推送
事件示例：
```
<xml><ToUserName><
- ![CDATA[toUser]]></ToUserName>
<FromUserName><
- ![CDATA[FromUser]]></FromUserName>
<CreateTime>1408091189</CreateTime>
<MsgType><
- ![CDATA[event]]></MsgType>
<Event><
- ![CDATA[location_select]]></Event>
<EventKey><
- ![CDATA[6]]></EventKey>
<SendLocationInfo><Location_X><
- ![CDATA[23]]></Location_X>
<Location_Y><
- ![CDATA[113]]></Location_Y>
<Scale><
- ![CDATA[15]]></Scale>
<Label><
- ![CDATA[ 广州市海珠区客村艺苑路 106号]]></Label>
<Poiname><
- ![CDATA[]]></Poiname>
</SendLocationInfo>
<AgentID>1</AgentID>
<AppType><
- ![CDATA[wxwork]]></AppType>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：location_select |
 | EventKey | 事件KEY值，与自定义菜单接口中KEY值对应 |
 | SendLocationInfo | 发送的位置信息 |
 | Location_X | X坐标信息|
 | Location_Y | Y坐标信息 |
 | Scale | 精度，可理解为精度或者比例尺、越精细的话 scale越高 |
 | Label | 地理位置的字符串信息 |
 | Poiname | POI的名字，可能为空 |
 | AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
 | AppType |app类型，在企业微信固定返回wxwork，在微信不返回该字段 |

[callback_set]: /api/doc#10514 "接收消息设置"

### 审批状态通知事件

> 本事件触发时机为：
1.自建/第三方应用调用审批流程引擎发起申请之后，审批状态发生变化时
2.自建/第三方应用调用审批流程引擎发起申请之后，在“审批中”状态，有任意审批人进行审批操作时

事件示例：
```
<xml>
 <ToUserName><
- ![CDATA[wwddddccc7775555aaa]]></ToUserName>
 <FromUserName><
- ![CDATA[sys]]></FromUserName>
 <CreateTime>1527838022</CreateTime>
 <MsgType><
- ![CDATA[event]]></MsgType>
 <Event><
- ![CDATA[open_approval_change]]></Event>
 <AgentID>1</AgentID>
 <ApprovalInfo>
 <ThirdNo><
- ![CDATA[201806010001]]></ThirdNo>
 <OpenSpName><
- ![CDATA[付款]]></OpenSpName>
 <OpenTemplateId><
- ![CDATA[1234567890]]></OpenTemplateId>
 <OpenSpStatus>1</OpenSpStatus>
 <ApplyTime>1527837645</ApplyTime>
 <ApplyUserName><
- ![CDATA[xiaoming]]></ApplyUserName>
 <ApplyUserId><
- ![CDATA[1]]></ApplyUserId>
 <ApplyUserParty><
- ![CDATA[产品部]]></ApplyUserParty>
 <ApplyUserImage><
- ![CDATA[http://www.qq.com/xxx.png]]></ApplyUserImage>
 <ApprovalNodes>
 <ApprovalNode>
 <NodeStatus>1</NodeStatus>
 <NodeAttr>1</NodeAttr>
 <NodeType>1</NodeType>
 <Items>
 <Item>
 <ItemName><
- ![CDATA[xiaohong]]></ItemName>
 <ItemUserId><
- ![CDATA[2]]></ItemUserId>
 <ItemImage><
- ![CDATA[http://www.qq.com/xxx.png]]></ItemImage>
 <ItemStatus>1</ItemStatus>
 <ItemSpeech><
- ![CDATA[]]></ItemSpeech>
 <ItemOpTime>0</ItemOpTime>
 </Item>
 </Items>
 </ApprovalNode>
 </ApprovalNodes>
 <NotifyNodes>
 <NotifyNode>
 <ItemName><
- ![CDATA[xiaogang]]></ItemName>
 <ItemUserId><
- ![CDATA[3]]></ItemUserId>
 <ItemImage><
- ![CDATA[http://www.qq.com/xxx.png]]></ItemImage>
 </NotifyNode>
 </NotifyNodes>
 <approverstep>0</approverstep>
 </ApprovalInfo>
</xml>

```

**参数说明：**

| 参数 | 说明 |
| ------------ | ------------ |
| ToUserName | 接收方企业Corpid |
| FromUserName | 发送方：企业微信|
| CreateTime | 消息发送时间 |
| MsgType | 消息类型|
| Event | 事件名称：open_approval_change|
| AgentID| 企业应用的id，整型。可在应用的设置页面查看|
| ApprovalInfo| 审批信息|
| ThirdNo | 审批单编号，由开发者在发起申请时自定义 |
| OpenSpName | 审批模板名称|
| OpenTemplateId | 审批模板id|
| OpenSpStatus | 申请单当前审批状态：1-审批中；2-已通过；3-已驳回；4-已取消|
| ApplyTime | 提交申请时间|
| ApplyUserName | 提交者姓名|
| ApplyUserId | 提交者userid|
| ApplyUserParty | 提交者所在部门|
| ApplyUserImage | 提交者头像 |
| ApprovalNodes | 审批流程信息 |
| ApprovalNode | 审批流程信息，可以有多个审批节点 |
| NodeStatus | 节点审批操作状态：1-审批中；2-已同意；3-已驳回；4-已转审|
| NodeAttr | 审批节点属性：1-或签；2-会签 |
| NodeType | 审批节点类型：1-固定成员；2-标签；3-上级|
| Items | 审批节点信息，当节点为标签或上级时，一个节点可能有多个分支 |
| Item | 审批节点分支，当节点为标签或上级时，一个节点可能有多个分支 |
| ItemName | 分支审批人姓名|
| ItemUserId | 分支审批人userid|
| ItemImage | 分支审批人头像 |
| ItemStatus | 分支审批审批操作状态：1-审批中；2-已同意；3-已驳回；4-已转审 |
| ItemSpeech | 分支审批人审批意见 |
| ItemOpTime | 分支审批人操作时间 |
| NotifyNodes | 抄送信息，可能有多个抄送人 |
| NotifyNode | 抄送人信息 |
| ItemName | 抄送人姓名|
| ItemUserId | 抄送人userid|
| ItemImage | 抄送人头像 |
| approverstep | 当前审批节点：0-第一个审批节点；1-第二个审批节点…以此类推 |

<!--
事件示例：
```
<xml>
<ToUserName><
- ![CDATA[toUser]]></ToUserName>
<FromUserName><
- ![CDATA[FromUser]]></FromUserName>
<CreateTime>123456789</CreateTime>
<MsgType><
- ![CDATA[event]]></MsgType>
<Event><
- ![CDATA[taskcard_click]]></Event>
<EventKey><
- ![CDATA[key111]]></EventKey>
<TaskId><
- ![CDATA[taskid111]]></TaskId >
<AgentId>1</AgentId>
</xml>

```

参数说明：

 | 参数 | 说明 |
 |---- | ----- |
 | ToUserName | 企业微信CorpID |
 | FromUserName | 成员UserID|
 | CreateTime | 消息创建时间（整型）|
 | MsgType | 消息类型，此时固定为：event |
 | Event | 事件类型：taskcard_click，点击任务卡片按钮 |
 | EventKey | 与发送任务卡片消息时指定的按钮btn:key值相同 |
 | TaskId | 与发送任务卡片消息时指定的task_id相同 |
 | AgentId | 企业应用的id，整型。可在应用的设置页面查看 |

-->

### 企业互联共享应用事件回调
> 本事件触发时机为：
> 1. 上级企业把自建应用共享给下级企业使用
> 2. 上级企业把下级企业从共享应用中移除

事件示例：
```
<xml>
 <ToUserName><
- ![CDATA[wwddddccc7775555aaa]]></ToUserName>
 <FromUserName><
- ![CDATA[sys]]></FromUserName>
 <CreateTime>1527838022</CreateTime>
 <MsgType><
- ![CDATA[event]]></MsgType>
 <Event><
- ![CDATA[share_agent_change]]></Event>
 <AgentID>1</AgentID>
</xml>

```

**参数说明：**

| 参数 | 说明 |
| ------------ | ------------------------------------------ |
| ToUserName | 上级企业CorpId |
| FromUserName | 发送方，此处固定为sys |
| CreateTime | 消息发送时间 |
| MsgType | 消息类型 |
| Event | 事件名称：share_agent_change |
| AgentID | 上级企业应用的id，整型。可在应用的设置页面查看 |

### 上下游共享应用事件回调
> 本事件触发时机为：
> 1. 上游企业把自建应用共享给下游企业使用
> 2. 上游企业把下游企业从共享应用中移除

事件示例：
```
<xml>
 <ToUserName><
- ![CDATA[wwddddccc7775555aaa]]></ToUserName>
 <FromUserName><
- ![CDATA[sys]]></FromUserName>
 <CreateTime>1527838022</CreateTime>
 <MsgType><
- ![CDATA[event]]></MsgType>
 <Event><
- ![CDATA[share_chain_change]]></Event>
 <AgentID>1</AgentID>
</xml>

```

**参数说明：**

| 参数 | 说明 |
| ------------ | ------------------------------------------ |
| ToUserName | 上游企业CorpId |
| FromUserName | 发送方，此处固定为sys |
| CreateTime | 消息发送时间 |
| MsgType | 消息类型 |
| Event | 事件名称：share_chain_change |
| AgentID | 上游企业应用的id，整型。可在应用的设置页面查看 |

### 模板卡片事件推送
> 应用下发的[模板卡片消息](#10167/模板卡片消息)，用户点击按钮之后触发此事件
> 应用收到该事件之后，可以响应回复[模板卡片更新消息](#12975/模板卡片更新消息)

事件示例：
```xml
<xml>
<ToUserName><
- ![CDATA[toUser]]></ToUserName>
<FromUserName><
- ![CDATA[FromUser]]></FromUserName>
<CreateTime>123456789</CreateTime>
<MsgType><
- ![CDATA[event]]></MsgType>
<Event><
- ![CDATA[template_card_event]]></Event>
<EventKey><
- ![CDATA[key111]]></EventKey>
<TaskId><
- ![CDATA[taskid111]]></TaskId>
<CardType><
- ![CDATA[text_notice]]></CardType>
<ResponseCode><
- ![CDATA[ResponseCode]]></ResponseCode>
<AgentID>1</AgentID>
<SelectedItems>
 <SelectedItem>
 <QuestionKey><
- ![CDATA[QuestionKey1]]></QuestionKey>
 <OptionIds>
 <OptionId><
- ![CDATA[OptionId1]]></OptionId>
 <OptionId><
- ![CDATA[OptionId2]]></OptionId>
 </OptionIds>
 </SelectedItem>
 <SelectedItem>
 <QuestionKey><
- ![CDATA[QuestionKey2]]></QuestionKey>
 <OptionIds>
 <OptionId><
- ![CDATA[OptionId3]]></OptionId>
 <OptionId><
- ![CDATA[OptionId4]]></OptionId>
 </OptionIds>
 </SelectedItem>
</SelectedItems>
</xml>

```

参数说明：

| 参数 | 说明 |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------- |
| ToUserName | 企业微信CorpID |
| FromUserName | 成员UserID |
| CreateTime | 消息创建时间（整型） |
| MsgType | 消息类型，此时固定为：event |
| Event | 事件类型：template_card_event，点击模板卡片按钮 |
| EventKey | 与发送模板卡片消息时指定的按钮btn:key值相同 |
| TaskId | 与发送模板卡片消息时指定的task_id相同 |
| CardType | 通用模板卡片的类型，类型有"text_notice", "news_notice", "button_interaction", "vote_interaction", "multiple_interaction"五种 |
| ResponseCode | 用于调用更新卡片接口的ResponseCode，72小时内有效，且只能使用一次 |
| AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
| QuestionKey | 问题的key值 |
| OptionIds | 对应问题的选项列表 |

### 通用模板卡片右上角菜单事件推送
事件示例：
```xml
<xml>
<ToUserName><
- ![CDATA[toUser]]></ToUserName>
<FromUserName><
- ![CDATA[FromUser]]></FromUserName>
<CreateTime>123456789</CreateTime>
<MsgType><
- ![CDATA[event]]></MsgType>
<Event><
- ![CDATA[template_card_menu_event]]></Event>
<EventKey><
- ![CDATA[key111]]></EventKey>
<TaskId><
- ![CDATA[taskid111]]></TaskId>
<CardType><
- ![CDATA[text_notice]]></CardType>
<ResponseCode><
- ![CDATA[ResponseCode]]></ResponseCode>
<AgentID>1</AgentID>
</xml>

```

参数说明：

| 参数 | 说明 |
| ------------ | -------------------------------------------------------------------------------- |
| ToUserName | 企业微信CorpID |
| FromUserName | 成员UserID |
| CreateTime | 消息创建时间（整型） |
| MsgType | 消息类型，此时固定为：event |
| Event | 事件类型：template_card_menu_event，点击模板卡片右上角菜单的按钮 |
| EventKey | 与发送模板卡片右上角菜单的按钮key值相同 |
| TaskId | 与发送模板卡片消息时指定的task_id相同 |
| CardType | 通用模板卡片的类型，类型有"text_notice", "news_notice", "button_interaction"三种 |
| ResponseCode | 用于调用更新卡片接口的ResponseCode |
| AgentID | 企业应用的id，整型。可在应用的设置页面查看 |

### 长期未使用应用临时停用事件
>当应用因长期无人使用被系统自动停用时，回调此事件。

事件示例：
```xml
<xml>
<ToUserName><
- ![CDATA[toUser]]></ToUserName>
<FromUserName><
- ![CDATA[FromUser]]></FromUserName>
<CreateTime>123456789</CreateTime>
<MsgType><
- ![CDATA[event]]></MsgType>
<Event><
- ![CDATA[close_inactive_agent]]></Event>
<AgentID>1</AgentID>
</xml>

```

参数说明：

| 参数 | 说明 |
| ------------ | -------------------------------------------------------------------------------- |
| ToUserName | 企业微信CorpID |
| FromUserName | 成员UserID 此时固定为：sys |
| CreateTime | 消息创建时间（整型） |
| MsgType | 消息类型，此时固定为：event |
| Event | 事件类型：close_inactive_agent |
| AgentID | 企业应用的id，整型。可在应用的设置页面查看 |

###长期未使用应用重新启用事件
>应用因长期无人使用而临时停用后，当管理员重新启用时，回调此事件。

事件示例：
```xml
<xml>
<ToUserName><
- ![CDATA[toUser]]></ToUserName>
<FromUserName><
- ![CDATA[FromUser]]></FromUserName>
<CreateTime>123456789</CreateTime>
<MsgType><
- ![CDATA[event]]></MsgType>
<Event><
- ![CDATA[reopen_inactive_agent]]></Event>
<AgentID>1</AgentID>
</xml>

```

参数说明：

| 参数 | 说明 |
| ------------ | -------------------------------------------------------------------------------- |
| ToUserName | 企业微信CorpID |
| FromUserName | 成员UserID |
| CreateTime | 消息创建时间（整型） |
| MsgType | 消息类型，此时固定为：event |
| Event | 事件类型：reopen_inactive_agent |
| AgentID | 企业应用的id，整型。可在应用的设置页面查看 |
