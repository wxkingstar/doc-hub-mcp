---
title: "情感分析模型"
doc_id: 53348
category_id: 99831
source_url: https://developer.work.weixin.qq.com/document/path/53348
---
[TOC]

应用在专区中的程序可调用本组接口对每条会话内容进行情感分析。

**详细说明**
> 该接口仅支持分析**文本、语音、音频存档消息**

| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|需具备「!!#ff0000 数据与智能专区权限!!」 |
|代开发应用|需具备「!!#ff0000 数据与智能专区权限!!」|
|第三方应用|需具备「!!#ff0000 数据与智能专区权限!!」|

## 创建情感分析任务

**请求方法**
通过SDK调用，具体方式参考[专区程序使用指引](#54006)。

**请求接口名：** 
create_sentiment_task

**请求包体：**

```
{
 "msg_list":[
 {
 "msgid": "MSGID1",
 "encrypt_info":{
 "secret_key": "SECRETKEY1"
 }
 },
 {
 "msgid": "MSGID2",
 "encrypt_info":{
 "secret_key": "SECRETKEY2"
 }
 }
 ]
}
```

**参数说明：** 

| 参数 | 是否必须 | 说明 |
| ------- | ---- | ---- |
|access_token|是|调用接口凭证|
|msg_list|是|消息列表，每次最多1000个。|
|msg_list.msgid|是|每条消息对应的msgid。多次出现同一个msgid，以首次出现的为准。目前支持文本、语音、音频存档消息|
|msg_list.encrypt_info.secret_key|是|该消息的密钥，将encrypted_secret_key用RSA私钥解密后得到|

**返回结果：**
```
{
 "errcode": 0,
 "errmsg": "ok",
 "jobid": "JOBID",
 "fail_list":[
 {
 "errcode": 710601,
 "errmsg": "xxx",
 "msgid": "MSGID2",
 "encrypt_info":{
 "secret_key": "SECRETKEY2"
 }
 }
 ]
}
```
**参数说明：**

| 参数 | 说明 |
| ------- | ---- |
| errcode |错误码 |
|errmsg|错误码说明|
|jobid|任务id。首次提交时返回|
|fail_list|提交出错的消息列表，只有msgid重复项返回至该列表|
|fail_list.errcode |错误码 |
|fail_list.errmsg|错误码说明|
|fail_list.msgid|每条消息对应的msgid，与入参对应|
|fail_list.msgid.encrypt_info|每条消息对应的加密信息，与入参对应|

## 获取情感分析结果

**请求方法**
通过SDK调用，具体方式参考[专区程序使用指引](#54006)。

**请求接口名：** 
get_sentiment_result

**请求包体：**

```
{
 "jobid": "JOBID"
}
```

**参数说明：** 

| 参数 | 是否必须 | 说明 |
| ------- | ---- | ---- |
|jobid| 是 |任务id|

**返回结果：**
```
{
 "errcode": 0,
 "errmsg": "ok",
 "status": 1,
 "analyze_result_list":[
 {
 "errcode": 0,
 "errmsg": "ok",
 "msgid": "MSGID1",
 "sentiment_result": 2
 },
 {
 "errcode": 710601,
 "errmsg": "xxx",
 "msgid": "MSGID4"
 }
 ]
}
```
**参数说明：**

| 参数 | 说明 |
| ------- | ---- |
| errcode |错误码 |
|errmsg|错误码说明|
|status|任务执行状态<br>0: 执行未完成<br>1: 执行完成<br>2: 执行失败|
|analyze_result_list|消息分析结果列表。详见**ItemResult**|

**ItemResult说明**
| 参数 | 说明 |
| ------- | ---- |
|msgid|消息对应的msgid|
|sentiment_result|情感分析结果<br>0: 无情感<br>1: 正面<br>2: 负面 |
> 注：
> analyze_result_list 列表每次都会将所有会话消息返回，如果有会话消息的分析结果已经获得，则会将其填入结果中，还未获得的则不填。

## 频率限制说明
- 每企业每天情感分析的消息条数不超过10万条（按消息条数限制，若每次提交分析的消息有1000条，则每天只能提交100次任务。）
