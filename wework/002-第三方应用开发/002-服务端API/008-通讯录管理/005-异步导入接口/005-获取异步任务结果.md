---
title: "获取异步任务结果"
doc_id: 15017
category_id: 91133
source_url: https://developer.work.weixin.qq.com/document/path/15017
---
**请求方式：**GET（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/batch/getresult?access_token=ACCESS_TOKEN&jobid=JOBID

**参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ------------ | ------------ |
| access_token | 是 | 调用接口凭证 |
| jobid | 是 | 异步任务id，最大长度为64字节 |

**权限说明：**

只能查询已经提交过的历史任务。

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "status": 1,
 "type": "replace_user",
 "total": 3,
 "percentage": 33,
  "result": [{},{}]
}

```
**参数说明：**

| 参数 | 说明 |
| ------------ | ------------ |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| status | 任务状态，整型，1表示任务开始，2表示任务进行中，3表示任务已完成 |
| type | 操作类型，字节串，目前分别有：1. sync_user(增量更新成员) 2. replace_user(全量覆盖成员)3. replace_party(全量覆盖部门)|
| total | 任务运行总条数 |
| percentage | 目前运行百分比，当任务完成时为100|
| result | 详细的处理结果，具体格式参考下面说明。当任务完成后此字段有效|

**result结构：type为sync_user、replace_user时：**
```
"result": [
  {
     "userid":"lisi",
     "errcode":0,
     "errmsg":"ok"
  },
  {
     "userid":"zhangsan",
     "errcode":0,
     "errmsg":"ok"
  }
]
```

| 参数 | 说明 |
| ------------ | ------------ |
| userid | 成员UserID。对应管理端的账号 |
| errcode | 该成员对应操作的结果错误码 |
| errmsg | 错误信息，例如无权限错误，键值冲突，格式错误等 |
**result结构：type为replace_party时：**
```
"result": [
  {
     "action":1,
     "partyid":1,
     "errcode":0,
     "errmsg":"ok"
  },
  {
     "action":4,
     "partyid":2,
     "errcode":0,
     "errmsg":"ok"
  }
]
```

| 参数 | 说明 |
| ------------ | ------------ |
| action | 操作类型（按位或）：1 新建部门 ，2 更改部门名称， 4 移动部门， 8 修改部门排序 |
| partyid | 部门ID |
| errcode | 该部门对应操作的结果错误码 |
| errmsg | 错误信息，例如无权限错误，键值冲突，格式错误等 |
