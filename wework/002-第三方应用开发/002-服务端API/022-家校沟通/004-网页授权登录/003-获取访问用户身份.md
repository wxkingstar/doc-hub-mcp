---
title: "获取访问用户身份"
doc_id: 16882
category_id: 91711
source_url: https://developer.work.weixin.qq.com/document/path/91711
---
最后更新：2024/07/19

**请求方式：**GET（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/service/getuserinfo3rd?suite_access_token=SUITE_ACCESS_TOKEN&code=CODE

**参数说明：**

| 参数 |必须|说明 |
|---- |-----|------ |
| suite_access_token |是|第三方应用的suite_access_token，参见<a href="#10975/获取第三方应用凭证">“获取第三方应用凭证”</a> |
| code | 是| 通过成员授权获取到的code，最大为512字节。每次成员授权带上的code将不一样，code只能使用一次，5分钟未被使用自动过期。 |

**权限说明：**
跳转的域名须完全匹配access_token对应第三方应用的可信域名，否则会返回50001错误。

**返回结果：**
a) 当用户属于某个企业，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "CorpId":"CORPID",
 "UserId":"USERID",
 "DeviceId":"DEVICEID"
}

```
 | 参数 | 说明 |
 |---- | ----- |
 |errcode | 返回码 |
 |errmsg | 对返回码的文本描述内容 |
 | CorpId | 用户所属企业的corpid |
 | UserId | 用户在企业内的UserID|
 | DeviceId | 手机设备号(由企业微信在安装时随机生成，删除重装会改变，升级不受影响)|

 
b) 当用户为学校的家长时，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "CorpId":"wxCorpId1",
 "DeviceId":"DEVICEID",
 "external_userid": "zhangsan_external",
 "parents":[
    {
      "corpid": "wxCorpId1",
      "parent_userid": "zhangsan",
      "external_userid": "zhangsan_external"
    },
    {
      "corpid": "wxCorpId2",
      "parent_userid": "lisi",
      "external_userid": "lisi_external"
    }
 ]
}

```
| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| DeviceId | 手机设备号(由企业微信在安装时随机生成，删除重装会改变，升级不受影响) |
| CorpId | 家长所在学校的corpid（该字段主要用于兼容旧版家校调用，与parents列表第一个元素的corpid相同，获取家长信息建议使用parents字段) |
| external_userid | 家长的外部联系人id（该字段主要用于兼容旧版家校调用，与parents列表第一个元素的external_userid相同，获取家长信息建议使用parents字段) |
|parents| 家长列表|
|parents.corpid| 家长所在学校的corpid|
|parents.parent_userid| 家长在家校通讯录里的parent_userid|
|parents.external_userid| 家长的外部联系人id|

c) 若用户不属于任何企业，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "OpenId":"OPENID",
 "DeviceId":"DEVICEID"
}

```

 | 参数 | 说明 |
 |---- | ----- |
 |errcode | 返回码 |
 |errmsg | 对返回码的文本描述内容 |
 | OpenId | 非企业成员的标识，对当前服务商唯一 |
 | DeviceId | 手机设备号(由企业微信在安装时随机生成，删除重装会改变，升级不受影响)|

**出错返回示例：**

```
{
 "errcode": 40029,
 "errmsg": "invalid code"
}

```
