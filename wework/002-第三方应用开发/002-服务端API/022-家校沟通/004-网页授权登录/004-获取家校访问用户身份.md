---
title: "获取家校访问用户身份"
doc_id: 39088
category_id: 95790
source_url: https://developer.work.weixin.qq.com/document/path/39088
---
**请求方式：**GET（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/service/school/getuserinfo3rd?suite_access_token=SUITE_ACCESS_TOKEN&code=CODE

**参数说明：**

| 参数 |必须|说明 |
|---- |-----|------ |
| suite_access_token |是|第三方应用的suite_access_token，参见<a href="#10975/获取第三方应用凭证">“获取第三方应用凭证”</a> |
| code | 是| 通过成员授权获取到的code，最大为512字节。每次成员授权带上的code将不一样，code只能使用一次，5分钟未被使用自动过期。 |

**权限说明：**
跳转的域名须完全匹配access_token对应第三方应用的可信域名，否则会返回50001错误。

**返回结果：** 
a) 当用户为学校的家长时，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "parents":[
    {
      "corpid": "wxCorpId1",
      "parent_userid": "zhangsan"
    },
    {
      "corpid": "wxCorpId2",
      "parent_userid": "lisi"
    }
 ]
}

```
| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| DeviceId | 手机设备号(由企业微信在安装时随机生成，删除重装会改变，升级不受影响) |
|parents| 家长列表|
|parents.corpid| 家长所在学校的corpid|
|parents.parent_userid| 家长在家校通讯录里的parent_userid|

b) 当用户为学校的学生时，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "students":[
    {
      "corpid": "wxCorpId1",
      "student_userid": "zhangsan"
    },
    {
      "corpid": "wxCorpId2",
      "student_userid": "lisi"
    }
 ]
}

```
| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| DeviceId | 手机设备号(由企业微信在安装时随机生成，删除重装会改变，升级不受影响) |
|students| 学生列表|
|students.corpid| 学生所在学校的corpid|
|students.student_userid| 学生在家校通讯录里的student_userid|

**出错返回示例：**

```
{
 "errcode": 40029,
 "errmsg": "invalid code"
}

```
