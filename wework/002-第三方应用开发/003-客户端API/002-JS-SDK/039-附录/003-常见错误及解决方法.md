---
title: "常见错误及解决方法"
doc_id: 14927
category_id: 90542
source_url: https://developer.work.weixin.qq.com/document/path/14927
---
以下为常见错误信息及排查方法：

**1. 错误信息：invalid url domain**
当前页面所在域名与使用的corpid没有绑定。
**排查方法：**
在企业微信的管理后台“我的应用”里，进入应用，设置/查看应用可信域名是否与当前调用域名一致。

**2. 错误信息：invalid signature**
签名错误
**排查方法：**
建议按如下顺序检查：
 1) 确认签名算法正确，可用[签名校验工具](https://developer.work.weixin.qq.com/devtool/signature)页面进行校验。
 2) 确认传入的nonceStr（js中驼峰标准大写S）, timestamp与用以签名中的对应noncestr, timestamp一致。
 3) 确认url是页面完整的url(请在当前页面`alert(location.href.split('#')[0]`)确认)，包括`http(s)://`部分，以及`？`后面的GET参数部分,但**不包括**`#hash`后面的部分。
 4) 如果使用wx.config来进行身份注册，确认config中的appid与用来获取jsapi_ticket的corpid一致。
 5) 确保一定缓存access_token和jsapi_ticket。
 6) **确保你获取用来签名的url是动态获取的，动态页面可参见实例代码中php的实现方式。如果是html的静态页面在前端通过ajax将url传到后台签名，前端需要用js获取当前页面除去'#'hash部分的链接（可用location.href.split('#')[0]获取），因为页面一旦分享，企业微信客户端会在你的链接末尾加入其它参数，如果不是动态获取当前链接，将导致分享后的页面签名失败**。
 
**3. 错误信息：the permission value is offline verifying 或者 fail_nopermission**
这个错误是因为config没有正确执行，或者是调用的JSAPI没有传入config的jsApiList参数中。
**排查方法：**
建议按如下顺序检查：
 1) 确认config/register正确通过。
 2) 如果是使用的wx.config来进行身份注册，后续的接口调用必须写在wx.ready的回调中。
 3) 确认config/register中jsApiList参数包含了这个JSAPI。
 
**4. 错误信息：permission denied**
该应用没有权限使用这个接口。
**排查方法：**
确认该应用是否已经获取到了相关接口所需要的权限。

**5. 错误信息：function not exist**
当前客户端版本不支持该接口，请升级到新版体验。

**6. 服务上线之后无法获取jsapi_ticket，自己测试时没问题**
因为access_token和jsapi_ticket必须要在自己的服务器缓存，否则上线后会触发频率限制。请确保在**服务上线前一定全局缓存access_token和jsapi_ticket，两者有效期均为7200秒（以返回结果中的expires_in为准），否则一旦上线触发频率限制，服务将不再可用**。

**7. uploadImage怎么传多图**
目前只支持一次上传一张，多张图片需通过队列的方式来进行调用。等前一张图片上传之后再次调用该接口上传下一张图片。

**8. 没法对本地选择的图片进行预览**
chooseImage接口本身就支持预览，不需要额外支持。

**9. 通过a链接(例如先通过企业微信授权登录)跳转到b链接，invalid signature签名失败**
后台生成签名的链接为使用jssdk的当前链接，也就是跳转后的b链接，请不要用企业微信登录的授权链接进行签名计算，后台签名的url一定是使用jssdk的当前页面的完整url除去'#'部分。

**10. 错误信息：config:fail**
这是由于在身份注册时，传入的参数不全导致，请参考[相关文档](#29484)确保传入正确的参数.

**11. 如何把jsapi上传到企业微信的多媒体资源下载到自己的服务器**
请参见文档中uploadVoice和uploadImage接口的备注说明。

**12. Android通过jssdk上传到企业微信服务器，第三方再从企业微信下载到自己的服务器，会出现杂音**
企业微信团队已经修复此问题，目前后台已优化上线。

**13. 绑定父级域名，是否其子域名也是可用的**
是的，合法的子域名在绑定父域名之后是完全支持的。

**14. 是否需要对低版本自己做兼容**
jssdk都是兼容低版本的，不需要第三方自己额外做更多工作，但有的接口是新引入的，只有新版才可调用。

**15. getLocation返回的坐标在openLocation有偏差**
因为getLocation返回的是gps坐标，openLocation打开的腾讯地图为火星坐标，getLocation也可以直接获取火星坐标。
