---
title: "获取激活码详情"
doc_id: 37633
category_id: 97189
source_url: https://developer.work.weixin.qq.com/document/path/97189
---
最后更新：2023/12/13

[TOC]

##获取激活码详情

查询某个账号激活码的状态以及激活绑定情况。

**请求方式：** POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/license/get_active_info_by_code?provider_access_token=ACCESS_TOKEN

**请求包体：**

```
{
  "corpid":"xxx",
  "active_code" : "XXXXXXXX"
}
```

**参数说明：** 

| 参数 | 是否必须 | 说明 |
| ------- | ---- | ---- |
| provider_access_token | 是 | 应用服务商的接口调用凭证，获取方法参见[服务商的凭证](#15143 ) |
| corpid | 是 | 要查询的企业的corpid |
| active_code | 是 | 激活码 |

**返回结果：** 
```
{
  "errcode": 0,
  "errmsg": "ok",
  "active_info": {
    "active_code": "code1",
    "type": 1,
    "status": 1,
    "userid": "USERID",
    "create_time":1640966400,
    "active_time": 1640966400,
    "expire_time":1640966400,
    "merge_info":
    {
       "to_active_code":"code_new",
       "from_active_code":"code_old"
    },
    "share_info":
    {
      "to_corpid":"CORPID",
      "from_corpid":"CORPID"
    }
  }
}
```

**参数说明：** 

| 参数 | 说明 |
| ------- | ---- |
| errcode |错误码 |
|errmsg|错误码说明|
|active_info|账号码信息|
|active_info.active_code|账号激活码|
|active_info.type|账号类型：1:基础账号，2:互通账号|
|active_info.status|账号状态：</br>1: 未绑定</br>2: 已绑定且有效</br>3: 已过期</br>4: 待转移(企业开启自动激活时，成员离职或者被移出可见范围，第二天凌晨会更新为该状态)</br>5: 已合并（激活码本身激活了userid，后续使用新的激活码重新激活了该userid，则该码变为已合并状态。若被合并时，该激活码未过期则合并后会重置expire_time为合并时间。若被合并时，激活码已过期则不重置expire_time。**注：该状态的激活码是已经失效的，不能重新用于激活或者继承。**）</br>6: 已分配给下游 |
|active_info.userid|账号绑定激活的企业成员userid，未激活则不返回该字段。返回加密的userid|
|active_info.create_time|创建时间，订单支付成功后立即创建。|
|active_info.active_time|首次激活绑定用户的时间，未激活则不返回该字段|
|active_info.expire_time|过期时间。为首次激活绑定的时间加上购买时长。未激活则不返回该字段|
|active_info.merge_info|合并信息，合并的激活码或者被合并的激活码才返回该字段。|
|active_info.merge_info.to_active_code|该激活码合并到的新激活码信息|
|active_info.merge_info.from_active_code|激活码激活userid时，若userid原来已经绑定了一个激活码，则会返回该字段|
|active_info.share_info|分配信息，当激活码在上下游/企业互联场景下，从上游分配给下游时，获取上游或者下游企业该激活码详情时返回|
|active_info.share_info.to_corpid|下游企业corpid。当激活码通过上游分配给下游时，获取上游企业该激活码详情时返回该字段，表示被分配给了哪个下游企业|
|active_info.share_info.from_corpid|上游企业corpid。当激活码通过上游分配给下游时，获取下游企业该激活码详情时返回该字段，表示从哪个上游企业分配过来|

##批量获取激活码详情
批量查询账号激活码的状态以及激活绑定情况。

**请求方式：** POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/license/batch_get_active_info_by_code?provider_access_token=ACCESS_TOKEN

**请求包体：**

```
{
  "corpid":"xxx",
  "active_code_list" : ["XXXXXXXX","YYYYYYYY","ZZZZZZZZ"]
}
```

**参数说明：** 

| 参数 | 是否必须 | 说明 |
| ------- | ---- | ---- |
| provider_access_token | 是 | 应用服务商的接口调用凭证，获取方法参见[服务商的凭证](#15143 ) |
| corpid | 是 | 要查询的企业的corpid |
| active_code_list | 是 | 激活码列表，最多不超过1000个 |

**返回结果：** 
```
{
  "errcode": 0,
  "errmsg": "ok",
  "active_info_list": [
    {
      "active_code": "XXXXXXXX",
      "type": 1,
      "status": 1,
      "userid": "USERID1",
      "create_time":1640966400,
      "active_time": 1640966400,
      "expire_time":1640966400,
      "merge_info":
       {
        "to_active_code":"code_new",
        "from_active_code":"code_old"
      },
      "share_info":
      {
        "to_corpid":"CORPID",
        "from_corpid":"CORPID"
      }
    },
    {
      "active_code": "YYYYYYYY",
      "type": 2,
      "status": 1,
      "userid": "USERID2",
      "create_time":1640966400,
      "active_time": 1640966400,
      "expire_time":1640966400,
      "merge_info":
       {
        "to_active_code":"code_new",
        "from_active_code":"code_old"
      },
      "share_info":
      {
        "to_corpid":"CORPID",
        "from_corpid":"CORPID"
      }
    }
  ],
  "invalid_active_code_list":["ZZZZZZZZ"]
}
```

**参数说明：** 

| 参数 | 说明 |
| ------- | ---- |
| errcode |错误码 |
|errmsg|错误码说明|
|active_info_list|账号码信息列表|
|active_info_list.active_code|账号激活码|
|active_info_list.type|账号类型：1:基础账号，2:互通账号|
|active_info_list.status|账号状态：</br>1: 未绑定</br>2: 已绑定且有效</br>3: 已过期</br>4: 待转移(企业开启自动激活时，成员离职或者被移出可见范围，第二天凌晨会更新为该状态)</br>5: 已合并（激活码本身激活了userid，后续使用新的激活码重新激活了该userid，则该码变为已合并状态。若被合并时，该激活码未过期则合并后会重置expire_time为合并时间。若被合并时，激活码已过期则不重置expire_time）</br>6: 已分配给下游|
|active_info_list.userid|账号绑定激活的企业成员userid，未激活则不返回该字段。返回加密的userid|
|active_info_list.create_time|创建时间，订单支付成功后立即创建。|
|active_info_list.active_time|首次激活绑定用户的时间，未激活则不返回该字段|
|active_info_list.expire_time|过期时间。为首次激活绑定的时间加上购买时长。未激活则不返回该字段|
|active_info.merge_info|合并信息。功能灰度中，目前仅通过api新续期过的才一定返回|
|active_info.merge_info.to_active_code|该激活码合并到的新激活码信息|
|active_info.merge_info.from_active_code|合并信息，合并的激活码或者被合并的激活码才返回该字段。功能灰度中，目前仅通过api新续期过的才一定返回|
|active_info.share_info|分配信息，当激活码在上下游/企业互联场景下，从上游分配给下游时，获取上游或者下游企业该激活码详情时返回|
|active_info.share_info.to_corpid|下游企业corpid。当激活码通过上游分配给下游时，获取上游企业该激活码详情时返回该字段，表示被分配给了哪个下游企业|
|active_info.share_info.from_corpid|上游企业corpid。当激活码通过上游分配给下游时，获取下游企业该激活码详情时返回该字段，表示从哪个上游企业分配过来|
|invalid_active_code_list|无效的激活码列表|
