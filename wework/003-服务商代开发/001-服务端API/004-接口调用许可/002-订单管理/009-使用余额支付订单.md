---
title: "使用余额支付订单"
doc_id: 50103
category_id: 99420
source_url: https://developer.work.weixin.qq.com/document/path/50103
---
[TOC]

可以调用以下接口以使用充值账户余额进行订单支付，详情见 [充值功能指引](https://open.work.weixin.qq.com/wwopen/common/readDocument/50159)。
可以支付的订单包括[单企业购买](#38195)、[单企业续期](#38197)、[多企业购买](#47529)创建的订单，支付成功后自动扣款，且服务商可接收到[支付成功](#39161)的回调。

## 提交余额支付订单任务
使用该接口创建支付任务，该接口默认使用**充值账户余额**进行支付。提交成功后，该订单**无法再变更支付方式**。
> 提交支付任务成功后，支付任务异步进行，服务商还需要调用“获取订单支付结果”以获取支付的最终结果

**请求方式：** POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/license/submit_pay_job?provider_access_token=ACCESS_TOKEN

**请求包体：**

```
{
  "payer_userid": "USERID",
  "order_id": "ORDERID"
}
```

**参数说明：** 

| 参数 | 是否必须 | 说明 |
| ------- | ---- | ---- |
| provider_access_token | 是 |应用服务商的接口调用凭证，获取方法参见[服务商的凭证](#15143 ) |
|payer_userid|是|支付人，服务商企业内成员的明文userid，用于充值账户的流水记录。该userid必须登录过企业微信，并且企业微信已绑定微信，且必须为服务商企业内具有“购买接口许可”权限的管理员。|
|order_id|是|要使用充值账户余额支付的接口许可订单id|

**返回结果：**
```
{
  "errcode": 0,
  "errmsg": "ok",
  "jobid": "JOBID"
}
```

**参数说明：** 

| 参数 | 说明 |
| ------- | ---- |
| errcode |错误码 |
|errmsg|错误码说明|
|jobid|支付任务的jobid|

## 获取订单支付结果
使用该接口获取余额订单支付任务的执行结果。仅在提交了 “余额支付订单任务” 后的7天内可获取 。

**请求方式：** POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/license/pay_job_result?provider_access_token=ACCESS_TOKEN

**请求包体：**

```
{
  "jobid": "JOBID"
}
```

**参数说明：** 

| 参数 | 是否必须 | 说明 |
| ------- | ---- | ---- |
| provider_access_token | 是 |应用服务商的接口调用凭证，获取方法参见[服务商的凭证](#15143 ) |
|jobid|是| “提交余额支付订单任务” 返回的jobid|

**返回结果：**
```
{
  "errcode": 0,
  "errmsg": "ok",
  "status": 3,
  "pay_job_result": {
    "errcode": 700001,
    "errmsg": "xxx",
    "fail_corp_list": [{
      "corpid": "wwxxx",
      "errcode": 700002,
      "errmsg": "xxx"
    }]
  }
}
```

**参数说明：** 

| 参数 | 说明 |
| ------- | ---- |
| errcode |错误码，表示接口调用是否成功（而非支付是否成功）。<br>如：支付失败时，该错误码会返回0。 |
|errmsg|错误码说明|
|status|支付任务结果。<br> 1：支付成功 <br>2：支付任务执行中，稍后再试<br>3：支付失败 |
|pay_job_result|支付结果的信息，仅在支付失败时返回，详见**PayJobResult**|

**PayJobResult 说明**

| 参数 | 说明 |
| ------- | ---- |
|errcode|支付失败原因的错误码，可能包含账户原因和企业原因，可能的错误码见 **pay_job_result.errcode说明**|
|errmsg|支付失败原因的错误码描述|
|fail_corp_list| 当支付失败原因属于**企业原因**时长度非0，单企业下单时列表长度为1，详见**FailCorp**|

**FailCorp 说明**

| 参数 | 说明 |
| ------- | ---- |
|corpid| 企业corpid|
|errcode| 本企业支付失败原因的错误码，可能的错误码见 **pay_job_result.errcode说明**|
|errmsg| 本企业支付失败原因的错误码说明|

**pay_job_result.errcode说明**

| 错误码 | 说明 | 分类 |
| ------- | ---- | ---- | 
|701160| 存在未通过支付检查的企业| 企业原因|
|90432| 充值账户未开通| 账户原因|
|90433| 账户余额不足| 账户原因|
|701161|订单已经指定使用微信网银支付 | 账户原因|
|48001| 支付人无权限| 其他原因|
|701005| 无效的接口许可订单id| 其他原因|
|701084| 订单不是待支付状态| 其他原因|
|701147|部分订单超过了单比支付金额上限|其他原因|

**fail_corp_list.errcode说明**

| 错误码 | 说明 |
| ------- | ---- |
|701129| 企业下无服务商的应用订单|
|701130| 企业下服务商应用订单均已过期|
