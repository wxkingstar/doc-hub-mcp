---
title: "获取审批申请详情"
doc_id: 18615
category_id: 96510
source_url: https://developer.work.weixin.qq.com/document/path/18615
---
[TOC]

**请求方式：**POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/oa/getapprovaldetail?access_token=ACCESS_TOKEN

**请求示例：**

```
{
 "sp_no" : "201909270001"
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ------------ |
| access_token | 是 | 调用接口凭证。 |
| sp_no | 是 | 审批单编号。 |
> 接口频率限制 600次/分钟

**权限说明：**
| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「[审批 - 可调用接口的应用](#17893/配置可调用接口的应用)」中 |
|代开发应用|具有「审批」权限| 
|第三方应用|具有「审批」权限|
*注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)

------------

**返回结果 ：**
```
{
  "errcode": 0,
  "errmsg": "ok",
  "info": {
    "sp_no": "201909270002",
    "sp_name": "全字段",
    "sp_status": 1,
    "template_id": "Bs5KJ2NT4ncf4ZygaE8MB3779yUW8nsMaJd3mmE9v",
    "apply_time": 1569584428,
    "applyer": {
      "userid": "WuJunJie",
      "partyid": "2"
    },
    "sp_record": [{
      "sp_status": 1,
      "approverattr": 1,
      "details": [{
          "approver": {
            "userid": "WuJunJie"
          },
          "speech": "",
          "sp_status": 1,
          "sptime": 0,
          "media_id": []
        },
        {
          "approver": {
            "userid": "WangXiaoMing"
          },
          "speech": "",
          "sp_status": 1,
          "sptime": 0,
          "media_id": []
        }
      ]
    }],
    "notifyer": [{
      "userid": "LiuXiaoGang"
    }],
    "apply_data": {
      "contents": [{
        "control": "Text",
        "id": "Text-15111111111",
        "title": [{
          "text": "文本控件",
          "lang": "zh_CN"
        }],
        "value": {
          "text": "文本填写的内容",
          "tips": [],
          "members": [],
          "departments": [],
          "files": [],
          "children": [],
          "stat_field": []
        }
      }]
    },
    "comments": [{
      "commentUserInfo": {
        "userid": "WuJunJie"
      },
      "commenttime": 1569584111,
      "commentcontent": "这是备注信息",
      "commentid": "6741314136717778040",
      "media_id": [
        "WWCISP_Xa1dXIyC9VC2vGTXyBjUXh4GQ31G-a7jilEjFjkYBfncSJv0kM1cZAIXULWbbtosVqA7hprZIUkl4GP0DYZKDrIay9vCzeQelmmHiczwfn80v51EtuNouzBhUBTWo9oQIIzsSftjaVmd4EC_dj5-rayfDl6yIIRdoUs1V_Gz6Pi3yH37ELOgLNAPYUSJpA6V190Xunl7b0s5K5XC9c7eX5vlJek38rB_a2K-kMFMiM1mHDqnltoPa_NT9QynXuHi"
      ]
    }],
 "process_list": {
 "node_list": [
 {
 "node_type": 1,
 "sp_status": 1,
 "apv_rel": 1,
 "sub_node_list": [
 {
 "userid": "userid1",
 "speech": "",
 "sp_yj": 1,
 "sptime": 0,
 "media_ids": []
 },
 {
 "userid": "userid2",
 "speech": "",
 "sp_yj": 1,
 "sptime": 0,
 "media_ids": []
 }
 ]
 },
 {
 "node_type": 1,
 "sp_status": 1,
 "apv_rel": 2,
 "sub_node_list": [
 {
 "userid": "userid3",
 "speech": "",
 "sp_yj": 1,
 "sptime": 0,
 "media_ids": []
 }
 ]
 }
 ]
 }
  }
}
```

**参数说明：**

| 参数 | 说明 
| ------------ | ------------ |
| **sp_no** | 审批编号 |
| **sp_name** | 审批申请类型名称（审批模板名称）|
| **sp_status** | 申请单状态：1-审批中；2-已通过；3-已驳回；4-已撤销；6-通过后撤销；7-已删除；10-已支付 |
| **template_id** | 审批模板id。可在“获取审批申请详情”、“审批状态变化回调通知”中获得，也可在审批模板的模板编辑页面链接中获得。|
| **apply_time** | 审批申请提交时间,Unix时间戳 |
| **applyer**| 申请人信息|
| └ userid | 申请人userid|
| └ partyid | 申请人所在部门id|
| **batch_applyer**| 批量申请人信息（和applyer字段互斥）|
| └ userid | 实际申请人userid|
| **sp_record** | 审批流程信息，可能有多个审批节点。|
| └ sp_status | 审批节点状态：1-审批中；2-已同意；3-已驳回；4-已转审；11-已退回；12-已加签；13-已同意并加签|
| └ approverattr | 节点审批方式：1-或签；2-会签|
| └ details | 审批节点详情,一个审批节点有多个审批人|
| └ └ approver | 分支审批人|
| └ └ └ userid | 分支审批人userid|
| └ └ speech | 审批意见|
| └ └ sp_status | 分支审批人审批状态：1-审批中；2-已同意；3-已驳回；4-已转审；11-已退回；12-已加签；13-已同意并加签|
| └ └ sptime | 节点分支审批人审批操作时间戳，0表示未操作 |
| └ └ media_id | 节点分支审批人审批意见附件，微盘文件无法获取，media_id具体使用请参考：[文档-获取临时素材](https://work.weixin.qq.com/api/doc#90000/90135/90254 "获取临时素材") |
| **notifyer** | 抄送信息，可能有多个抄送节点|
| └ userid | 节点抄送人userid|
| **apply_data** | 审批申请数据|
| └ contents | 审批申请详情，由多个表单控件及其内容组成|
| └ └ control | 控件类型：Text-文本；Textarea-多行文本；Number-数字；Money-金额；Date-日期/日期+时间；Selector-单选/多选；；Contact-成员/部门；Tips-说明文字；File-附件；Table-明细；Attendance-假勤；Vacation-请假；PunchCorrection-补卡;DateRange-时长|
| └ └ id | 控件id|
| └ └ title | 控件名称 ，若配置了多语言则会包含中英文的控件名称|
| └ └ value | 控件值 ，包含了申请人在各种类型控件中输入的值，不同控件有不同的值，具体说明详见附录|
| └ └ hidden | 控件隐藏标识，为1表示控件被隐藏|
| **comments** | 审批申请备注信息，可能有多个备注节点|
| └ commentUserInfo | 备注人信息 |
| └ └ userid | 备注人userid |
| └ commenttime | 备注提交时间戳，Unix时间戳 |
| └ commentcontent | 备注文本内容 |
| └ commentid | 备注id |
| └ media_id | 备注附件id，可能有多个，微盘文件无法获取，media_id具体使用请参考：[文档-获取临时素材](https://work.weixin.qq.com/api/doc#90000/90135/90254 "获取临时素材") |
| process_list | 审批流程列表 |
| └ node_list | 流程节点 |
| └ └ node_type | 节点类型 1 审批人 2 抄送人 3办理人|
| └ └ sp_status | 节点状态 1-审批中；2-同意；3-驳回；4-转审；11-退回给指定审批人；12-加签；13-同意并加签；14-办理；15-转交|
| └ └ apv_rel | 多人办理方式 1-会签；2-或签 3-依次审批|
| └ └ sub_node_list | 子节点列表 |
| └ └ └ userid | 处理人信息 |
| └ └ └ speech | 审批/办理意见 |
| └ └ └ sp_yj | 子节点状态 1-审批中；2-同意；3-驳回；4-转审；11-退回给指定审批人；12-加签；13-同意并加签；14-办理；15-转交|
| └ └ └ sptime | 操作时间 |
| └ └ └ media_ids | 附件，微盘文件无法获取，media_id具体使用请参考：[文档-获取临时素材](https://work.weixin.qq.com/api/doc#90000/90135/90254 "获取临时素材") |

---

### **附录：各控件apply_data/contents/value参数介绍**

#### **附1 文本/多行文本控件（control参数为Text或Textarea）**
```json
{
 "text": "文本填写的内容"
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| text | 文本内容，即申请人在此控件填写的文本内容 |

#### **附2 数字控件（control参数为Number）**
```json
{
 "new_number": "700"
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| new_number | 数字内容，即申请人在此控件填写的数字内容 |

#### **附3 金额控件（control参数为Money）**
```json
{
 "new_money": "700"
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| new_money | 金额内容，即申请人在此控件填写的金额内容 |

#### **附4 日期/日期+时间控件（control参数为Date）**
```json
{
  "type": "day",
   "s_timestamp": "1702134000",
   "timezone_info": {
   "zone_offset": "-9",
   "zone_desc": "UTC+9"
 }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| date | 日期/日期+时间内容，即申请人在此控件选择的 日期/日期+时间内容 |
| └ type | 时间展示类型：day-日期；hour-日期+时间 |
| └ s_timestamp |时间戳，字符串类型 |
| └ timezone_info| 时区信息，**只有在非UTC+8的情况下会返回** |
| └ └ zone_offset| 时区偏移量|
| └ └ zone_desc | 时区描述 |

#### **附5 单选/多选控件（control参数为Selector）**
```json
{
 "selector": {
 "type": "multi",
 "options": [
 {
 "key": "option-15111111111",
 "value": [
 {
 "text": "选项1",
 "lang": "zh_CN"
 }
 ]
 },
 {
 "key": "option-15222222222",
 "value": [
 {
 "text": "选项2",
 "lang": "zh_CN"
 }
 ]
 }
 ]
 }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| selector | 选择内容，即申请人在此控件选择的选项内容 |
| └ type | 选择类型：single-单选；multi-多选 |
| └ options | 申请人所选择的选项，多选情况下可能有多个（仅包含申请人说选择的选项，并非所有选项，若需要了解所有选项，需使用“获取审批模板详情”接口）|
| └ └ key | 选项key，选项的唯一id，可通过“获取审批模板详情”接口获得|
| └ └ value | 选项值，若配置了多语言则会包含中英文的选项值|

#### **附6 成员控件（control参数为Contact，且value参数为members）**
```json
{
 "members": [
 {
 "userid": "WuJunJie",
 "name": "Jackie"
 },
    {
 "userid": "WangXiaoMing",
      "name": "Tom"
 }
 ]
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| members | 成员内容，即申请人在此控件选择的成员，多选模式下可能有多个 |
| └ userid | 成员的userid |
| └ name | 成员名 |

#### **附7 部门控件（control参数为Contact，且value参数为departments）**
```json
{
 "departments": [
 {
 "openapi_id": "2",
 "name": "销售部"
 },
 {
 "openapi_id": "3",
 "name": "生产部"
 }
 ]
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| departments | 部门内容，即申请人在此控件选择的部门，多选模式下可能有多个 |
| └ openapi_id | 部门id |
| └ name | 部门名 |

#### **附8 说明文字控件（control参数为Tips）**
```json
{
 "new_tips": {
 "tips_content": [
 {
 "text": {
 "sub_text": [
 {
 "type": 1,
 "content": {
 "plain_text": {
 "content": "说明文字"
 }
 }
 },
 {
 "type": 2,
 "content": {
 "link": {
 "title": "这是一个链接",
 "url": "https://work.weixin.qq.com"
 }
 }
 }
 ]
 },
 "lang": "zh_CN"
 },
 {
 "text": {
 "sub_text": [
 {
 "type": 1,
 "content": {
 "plain_text": {
 "content": "tips"
 }
 }
 },
 {
 "type": 2,
 "content": {
 "link": {
 "title": "this is a link",
 "url": "https://work.weixin.qq.com"
 }
 }
 }
 ]
 },
 "lang": "en"
 }
 ]
 }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| tips_content  | 说明文字内容，可参考[获取审批模板详情](#18596) -「附7：Tips控件（说明文字控件）config说明」一节说明|

#### **附9 附件控件（control参数为File）**
```json
{
 "files": [
 {
 "file_id": "WWCISP_v2z8qZENw2qwSiNroVKykbxxMXvmI1lELzG-fo25Y9n1duozezKEu6zSIvOHPCd9_8s934AJncRz5f9G4E_nCQonUHLdiAnCLjfZQQwVaiG7krKzyGB1MpYa9ZVkk0gQ7P8HvO_SOdwzLwpyUZ3Tm2ApyoO_78nTM-iEkf_TILqXuYxKd7ByYL34wMA9Czf6Iy151tHbcYNvbNZZHTnL4UMQdohJ_MPYA2Wz00IebZb3_UuIk5MdJSH_IKlZn9Ms5"
 },
 {
 "file_id": "WWCISP_gZ3BMg5hwI1Adi16NwzJgpi9zp6QQjMdYcuemVWBeHnmMK3QJOYiIIkHvRIh0ysZcAo6gJp069o5tx7qxVzin1Q9LKswff624E1qCCmt088ISBVPScoqEiG4YTI_Kltrqn7b0wvMTudd9lIE3ywgHatPRWKxsHNsSxEY_FuaFWlGHzxcYKNq_LIfVBXZGji-C5bXp23MwpTcCXYfWPfSEpEeXW5c5sQscY_MeW5uc0gITpeFKFXARXmKC62_u7Ln"
 }
 ]
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| files | 文件内容，即申请人在此控件上传的文件内容，可能有多个 |
| └ file_id | 文件的media_id，微盘文件无法获取，具体使用请参考：[文档-获取临时素材](https://work.weixin.qq.com/api/doc#90000/90135/90254 "获取临时素材") |

#### **附10 明细控件（control参数为Table）**
```json
{
 "children": [
 {
 "list": [
 {
 "control": "Text",
 "id": "Text-15111111111",
 "title": [
 {
 "text": "明细内文本控件",
 "lang": "zh_CN"
 }
 ],
 "value": {
 "text": "明细文本"
 }
 }
 ]
 }
 ]
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| children | 明细内容，一个明细控件可能包含多个子明细 |
| └ list | 子明细列表，包含了申请人在子明细的所有子控件中填写的内容，子控件的数据接口同一般控件 |

#### **附11 假勤组件-请假组件（control参数为Vacation）**
```json
{
 "vacation": {
 "selector": {
 "type": "single",
 "options": [
 {
 "key": "3",
 "value": [
 {
 "text": "病假",
 "lang": "zh_CN"
 }
 ]
 }
 ],
 "exp_type": 0
 },
 "attendance": {
 "date_range": {
 "type": "hour",
 "new_begin": 1568077200,
 "new_end": 1568368800,
 "new_duration": 291600
 },
 "type": 1
 }
 }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| vacation | 请假内容，即申请人在此组件内选择的请假信息 |
| └ selector | 请假类型，所选选项与假期管理关联，为假期管理中的假期类型 |
| └ └ type | 选择类型：single-单选；multi-多选，在假勤控件中固定为单选 |
| └ └ options | 用户所选选项 |
| └ └ └ key | 选项key，选项的唯一id，可通过“获取审批模板详情”接口获得 |
| └ └ └ value | 选项值，若配置了多语言则会包含中英文的选项值 |
| └ attendance | 假勤组件 |
| └ └ date_range | 假勤组件时间选择范围, 参考DateRange控件 |
| └ └ type| 假勤组件类型：1-请假；2-补卡；3-出差；4-外出；5-加班 |
|└ └ slice_info|分片时长信息相关，详情见下述Attendance控件

#### **附12 假勤组件-出差/外出/加班组件（control参数为Attendance）**
```json
{
 "attendance": {
 "date_range": {
 "type": "halfday",
 "new_begin": 1599494400,
 "new_end": 1599667199,
 "new_duration": 172800
 },
 "type": 4,
    "slice_info":{
      "day_items" :[
      {
        "daytime":1599494400,
        "duration":86400
      },
      {
        "daytime":1599580800,
        "duration":86400
      }
      ],
      "duration":172800,
      "state":1
    
    }
 }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| attendance | 假勤内容，即申请人在此组件内选择的假勤信息 |
| └ date_range | 假勤组件时间选择范围, 参考DateRange控件 |
| └ type| 假勤组件类型：1-请假；2-补卡；3-出差；4-外出；5-加班 |
|└ slice_info|时长支持按天分片信息， 2020/10/01之前的历史表单不支持时长分片|
|└ └ duration|总时长，单位是秒|
|└ └ state|时长计算来源类型: 1--系统自动计算;2--用户修改|
|└ └day_items|每一天的分片时长信息|
|└ └└ daytime|日期的00:00:00时间戳，Unix时间|
|└ └└ duration|分隔当前日期的时长秒数|

#### **附13 补卡组件（control参数为PunchCorrection）**
```json
{
 "punch_correction": {
 "state": "上班-未打卡",
 "time": 1699146000,
 "version": 1,
 "daymonthyear": 1699113600
 }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| punch_correction | 补卡信息|
| └ state | 异常状态说明 |
| └ time | 补卡时间，Unix时间戳 |
|└ version |版本标识，为1的时候为新版补卡，daymonthyear有值 |
|└ daymonthyear |补卡日期0点Unix时间戳 |

#### **附14 时长组件（control参数为DateRange）**
```json
{
 "date_range": {
    "type": "halfday",
 "new_begin": 1570550400,
 "new_end": 1570593600,
 "new_duration": 86400,
    "perday_duration": 86400,
    "timezone_info": {
      "zone_offset": "-9",
      "zone_desc": "UTC+9"
    }
 }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| date_range | 时长组件|
| └ type | 时间展示类型：halfday-日期；hour-日期+时间 |
| └ new_begin | 开始时间,unix时间戳 |
| └ new_end | 结束时间，unix时间戳 |
| └ new_duration | 时长范围， 单位秒 |
| └ timezone_info | 时区信息，**只有在非UTC+8的情况下会返回** |
| └ └ zone_offset | 时区偏移量 |
| └ └ zone_desc | 时区描述 |

#### **附15 位置控件（control参数为Location）**
```json
{
 "location": {
    "latitude": "30.547239",
    "longitude": "104.063291",
    "title": "腾讯科技(成都)有限公司(腾讯成都大厦)",
    "address": "四川省成都市武侯区天府三街198号腾讯成都大厦A座",
    "time": 1605690460
  }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| latitude | 纬度，精确到6位小数 |
| longitude| 经度，精确到6位小数|
| title |地点标题 |
| address |地点详情地址 |
| time | 选择地点的时间|

#### **附16 关联审批单控件（control参数为RelatedApproval）**
```json
{
 "related_approval": [
  {
    "template_names": [{
      "text": "模板A",
      "lang": "zh_CN"
    }, 
    {
     "text": "",
 "lang": "en"
 }],
 "sp_status": 1,
 "name": "小明",
 "create_time": 1605690437,
 "sp_no": "202011180001"
 }
 ]
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| template_names | 关联审批单的模板名|
| sp_no | 关联审批单的审批单号 |
| sp_status | 关联审批单的状态 |
| create_time | 关联审批单的提单时间 |
| name | 关联审批单的提单者 |

#### **附17 公式控件（control参数为Formula）**
```json
{
 "formula": {
 "value": "5.0"
 }
}
```
| 参数 | 说明 |
| ------------ | ------------ |
| value | 公式的值 |

#### **附18 收款账户控件（control参数为BankAccount）**
```json
{
 "bank_account": {
 "account_type": 1,
 "account_name": "账户名",
 "account_number": "621200000000000111",
 "remark": "备注",
 "bank": {
 "bank_alias": "工商银行",
 "bank_alias_code": "1000009547",
 "province": "上海市",
 "province_code": 2,
 "city": "上海市",
 "city_code": 21,
 "bank_branch_name": "中国工商银行股份有限公司上海市新江湾城支行",
 "bank_branch_id": "102290000121"
 }
 }
}
```
| 参数 | 说明 |
|--|--|
|account_type | 账户类型 ：<br>1： 对公账户<br>2： 个人账户 |
|account_name |账户名 |
|account_number |账号 |
|remark |备注 |
|bank |银行信息 |
|bank_alias |银行名称 |
|bank_alias_code |银行代码 |
|province |省份 |
|province_code |省份代码 |
|city |城市 |
|city_code |城市代码 |
|bank_branch_name |银行支行 |
|bank_branch_id |银行支行联行号 |

### **错误说明**
| 错误码 | 说明 |
| ------------ | ------------ |
| 301055 |无审批应用数据拉取权限|
|301025|请求参数错误|
|301026|拉取审批申请详情内部接口失败|
