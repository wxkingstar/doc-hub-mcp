---
title: "获取企业微信回调IP段"
doc_id: 19996
category_id: 98988
source_url: https://developer.work.weixin.qq.com/document/path/98988
---
最后更新：2019/12/11

企业微信在回调企业指定的URL时，是通过特定的IP发送出去的。如果企业需要做防火墙配置，那么可以通过这个接口获取到所有相关的IP段。IP段有变更可能，当IP段变更时，新旧IP段会同时保留一段时间。建议企业每天定时拉取IP段，更新防火墙设置，避免因IP段变更导致网络不通。

**请求方式：**GET（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/getcallbackip?access_token=ACCESS_TOKEN （[获取ACCESS_TOKEN](#15074)）

**请求参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ------------ | ------------ |
| access_token | 是 | 调用接口凭证 |

**权限说明：**

无限定。

**返回结果：** 

```
{
 "ip_list":[
 "1.2.3.4",
 "2.3.3.3"
 ],
 "errcode":0,
 "errmsg":"ok"
}
```

**返回参数说明：** 

| 参数 | 类型 | 说明 |
| ---- | ----| ---- |
| ip_list | StringArray | 企业微信服务器IP段 |
| errcode | int | 错误码，0表示成功，非0表示调用失败 |
| errmsg | string | 错误信息，调用失败会有相关的错误信息返回 |

根据errcode值非0，判断调用失败。以下是access_token过期的返回示例：
```
{
 "ip_list":[],
 "errcode":42001,
 "errmsg":"access_token expired, hint: [1576065934_28_e0fae07666aa64636023c1fa7e8f49a4], from ip: 9.30.0.138, more info at https://open.work.weixin.qq.com/devtool/query?e=42001"
}
```
