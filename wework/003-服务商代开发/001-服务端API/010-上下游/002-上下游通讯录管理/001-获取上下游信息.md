---
title: "获取上下游信息"
doc_id: 35438
category_id: 96876
source_url: https://developer.work.weixin.qq.com/document/path/96876
---
最后更新：2023/11/29

[TOC]

## 获取上下游列表
**请求方式：**GET（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/corpgroup/corp/get_chain_list?access_token=ACCESS_TOKEN

**参数说明**:

| 参数 | 必须 | 类型 | 说明 |
| :----------- | :--- | :----- | :------------------------------------- |
| access_token | 是 | string | 调用接口凭证。上游企业应用access_token |

**权限说明：**
* 自建应用/代开发应用可调用，仅返回应用可见范围内的上下游列表
* 「[上下游- 可调用接口的应用](#42599/配置可调用接口的应用)」调用，返回全部的上下游列表

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "chains": [
 {
 "chain_id": "chainid1",
 "chain_name": "能源供应链"
 },
 {
 "chain_id": "chainid2",
 "chain_name": "原材料供应链"
 }
 ]
}
```
**参数说明：**

| 参数 | 说明 |
| :---------------- | :--------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| chains | 企业上下游列表 |
| chains.chain_id | 上下游id |
| chains.chain_name | 上下游名称 |

## 获取上下游通讯录分组
自建应用/代开发应用可通过该接口获取企业上下游通讯录分组详情
**请求方式：**POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/corpgroup/corp/get_chain_group?access_token=ACCESS_TOKEN

**请求示例**

```json
{
 "chain_id":"Chxxxxxx",
 "groupid":1
}
```
**参数说明 ：**

| 参数 | 必须 | 说明 |
| ------------ | ---- | -------------------------------------- |
| access_token | 是 | 调用接口凭证。上游企业应用access_token |
| chain_id | 是 | 上下游id |
| groupid | 否 | 分组id。填写此参数返回指定分组，不填则返回全部分组 |

**权限说明：**
* 自建应用/代开发应用可调用，仅可指定或返回应用可见范围内的分组列表
* [上下游- 可调用接口的应用](#42599/配置可调用接口的应用)」调用，可指定或返回全部的分组列表

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "groups": [
 {
 "groupid": 2,
 "group_name": "一级经销商",
 "parentid": 1,
 "order": 1
 },
 {
 "groupid": 3,
 "group_name": "二级经销商",
 "parentid": 2,
 "order": 3
 }
 ]
}

```
**参数说明：**

| 参数 | 说明 |
| --------------- | -------------------------------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| groups | 分组列表数据。 |
| groups.groupid | 分组id |
| groups.group_name | 分组名称 |
| groups.parentid | 父分组id。根分组id为1 |
| groups.order | 父部门中的次序值。order值大的排序靠前。值范围是[0, 2^32) |

## 获取企业上下游通讯录分组下的企业详情列表
自建应用/代开发应用可通过该接口获取企业上下游通讯录的某个分组下的企业列表

**请求方式：**POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/corpgroup/corp/get_chain_corpinfo_list?access_token=ACCESS_TOKEN

**请求示例**

```json
{
 "chain_id":"Chxxxxxx",
 "groupid":1,
 "need_pending":false,
 "cursor": "",
 "limit": 0
}
```
**参数说明 ：**

| 参数 | 必须 | 说明 |
| ------------ | ---- | ----------------------------------------------------------------------------------------------------- |
| access_token | 是 | 调用接口凭证。上游企业应用access_token |
| chain_id | 是 | 上下游id |
| groupid | 否 | 分组id。如果不填，表示根目录 |
| need_pending | 否 | 是否需要返回未加入的企业。默认不返回 |
| cursor | 否 | 开启分页使用，传入返回值next_cursor |
| limit | 否 | >0开启分页功能。 |

>如需获取该分组及其子分组的所有企业详情，需先获取该分组下的所有子分组，然后再获取子分组下的企业，逐层递归获取。

**权限说明：**
* 自建应用/代开发应用可调用，仅返回应用可见范围内的企业列表
* [上下游- 可调用接口的应用](#42599/配置可调用接口的应用)」应用调用，返回全部的企业列表

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "has_more": false,
 "next_cursor": "xxx",
 "group_corps": [
 {
 "groupid": 2,
 "corpid": "wwxxxx",
 "corp_name":"美馨粮油公司",
 "custom_id":"custom_id",
 "invite_userid":"zhangsan",
 "pending_corpid":"wwxxxx",
 "is_joined":1
 }
 ]
}

```
**参数说明：**

| 参数 | 说明 |
| ------------------------- | -------------------------------------------------------------------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| group_corps | 分组列表数据。 |
| group_corps.groupid | 企业所属上下游的分组id |
| group_corps.corpid | 企业id，最多64个字节，已加入的企业返回 |
| group_corps.corp_name | 企业名称 |
| group_corps.custom_id | 上下游企业自定义id，返回批量导入上下游联系人时指定的企业自定义id，如未指定则该字段为空 |
| group_corps.invite_userid | 该上下游的邀请人的userid，仅 [上下游- 可调用接口的应用](#42599/配置可调用接口的应用)」应用调用时返回，切成员需在应用的可见范围内 |
| group_corps.pending_corpid | 未加入企业id，未加入的企业返回 |
| group_corps.is_joined | 企业是否已加入 |
| next_cursor | 下次请求时应传入的cursor |
| has_more | 开启分页时告知是否还有更多记录 |

## 获取企业上下游通讯录下的企业信息
自建应用/代开发应用可通过该接口获取企业上下游通讯录的某个企业的自定义id和所属分组的分组id
**请求方式：**POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/corpgroup/corp/get_chain_corpinfo?access_token=ACCESS_TOKEN

**请求示例**

```json
{
 "chain_id":"Chxxxxxx",
 "corpid":"xxxxx",
 "pending_corpid":"xxxxx"
}
```
**参数说明 ：**

| 参数 | 必须 | 说明 |
| ------------ | ---- | -------------------------------------- |
| access_token | 是 | 调用接口凭证。上游企业应用access_token |
| chain_id | 是 | 上下游id |
| corpid | 否 | 已加入企业id |
| pending_corpid | 否 | 待加入企业id（corpid和pending_corpid至少填一个，同时填corpid生效 |

**权限说明：**
* 自建应用/代开发应用可调用，仅可指定应用可见范围内的企业
* [上下游- 可调用接口的应用](#42599/配置可调用接口的应用)」应用调用，可指定上下游内的所有企业

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok",
 "corp_name":"美馨粮油公司",
 "qualification_status":1,
 "custom_id": "xxxxx",
 "groupid": 1,
 "is_joined": false
}

```
**参数说明：**

| 参数 | 说明 |
| --------------- | -------------------------------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| corp_name | 企业名称|
| qualification_status | 企业是否验证或认证，1表示未验证，2表示已验证，3表示已认证，已加入的企业返回|
| custom_id | 上下游企业自定义id，返回批量导入上下游联系人时指定的企业自定义id，如未指定则该字段为空 |
| groupid | 企业所属上下游的分组id|
| is_joined | 企业是否已加入|
