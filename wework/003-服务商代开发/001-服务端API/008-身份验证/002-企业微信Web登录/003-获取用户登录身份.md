---
title: "获取用户登录身份"
doc_id: 45858
category_id: 98177
source_url: https://developer.work.weixin.qq.com/document/path/45858
---
该接口可使用用户登录成功颁发的`code`来获取成员信息，适用于自建应用与代开发应用

**请求方式：**GET（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/auth/getuserinfo?access\_token=ACCESS\_TOKEN&code=CODE
**参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ---- | ---------------------------------------- |
| access_token | 是 | [调用接口凭证](#15074) |
| code | 是 | 通过成员授权获取到的code，最大为512字节。每次成员授权带上的code将不一样，code只能使用一次，5分钟未被使用自动过期。 |
**权限说明：**
跳转的域名须完全匹配access\_token对应应用的可信域名，否则会返回50001错误。
**返回结果：**
a) 当用户为企业成员时（无论是否在应用可见范围之内）返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "userid":"USERID"
}

```
| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| userid | 成员UserID。若需要获得用户详情信息，可调用通讯录接口：[读取成员](#10019)。|

b) 非企业成员时，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "openid":"OPENID",
 "external_userid":"EXTERNAL_USERID"
}

```

| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| openid | 非企业成员的标识，对当前企业唯一。不超过64字节 |
|external_userid|外部联系人id，当且仅当用户是企业的客户，且跟进人在应用的可见范围内时返回。如果是第三方应用调用，针对同一个客户，同一个服务商不同应用获取到的id相同|

**出错返回示例：**

```
{
 "errcode": 40029,
 "errmsg": "invalid code"
}

```
