---
title: "获取部门学生详情"
doc_id: 18835
category_id: 96739
source_url: https://developer.work.weixin.qq.com/document/path/18835
---
**请求方式：**GET（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/school/user/list?access_token=ACCESS_TOKEN&department_id=DEPARTMENT_ID

**参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ------------ | ------------ |
| access_token | 是 | 调用接口凭证 |
| department_id | 是 | 获取的部门id |

> 如需获取该部门及其子部门的所有学生，需先获取该部门下的子部门，然后再获取子部门下的学生，逐层递归获取。

**权限说明：**

调用的应用需要满足如下的权限
| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「 [家校沟通- 读取和编辑家校通讯录的应用](#16678/通过api读取和编辑家校通讯录)」或「 [家校沟通- 读取家校通讯录的应用](#16678/通过api读取家校通讯录)」或“[家长可使用应用](#16678/配置“家长可使用的应用”)”列表中|
|代开发应用|具有 !!#ff0000 「家校沟通」!!权限| 
|第三方应用|具有 !!#ff0000 「家校沟通」使用!!权限|
*注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)

**返回结果：**

```
{
  "errcode": 0,
  "errmsg": "ok",
  "students":[
    {
      "student_userid": "zhangsan",
      "name": "张三",
      "department": [1, 2],
      "parents": [
        {
          "parent_userid": "zhangsan_parent1",
          "relation": "爸爸",
          "mobile": "18000000001",
          "is_subscribe": 1,
          "external_userid":"xxx"
        },
        {
          "parent_userid": "zhangsan_parent2",
          "relation": "妈妈",
          "mobile": "18000000002",
          "is_subscribe": 0
        }
      ]
    },
    {
      "student_userid": "lisi",
      "name": "李四",
      "department": [4, 5],
      "parents": [
        {
          "parent_userid": "lisi_parent1",
          "relation": "爷爷",
          "mobile": "18000000003",
          "is_subscribe": 1,
          "external_userid":"xxx"
        },
        {
          "parent_userid": "lisi_parent2",
          "relation": "妈妈",
          "mobile": "18000000004",
          "is_subscribe": 1,
          "external_userid":"xxx"
        }
      ]
    }
  ]
}
```
**参数说明：**

| 参数 | 说明 |
| ------------ | ------------ | ------------ |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| students | 学生列表 |
| students.student_userid | 学生UserID|
| students.name | 学生名字|
| students.department | 学生所在的班级id列表,不超过20个|
| students.parents |学生家长列表|
| students.parents.parent_userid | 家长的userid|
| students.parents.relation | 学生与家长的关系|
| students.parents.mobile | 家长手机号，第三方不可获取|
| students.parent.is_subscribe|家长是否关注了“学校通知”，0-未关注，1-已关注|
| students.parent.external_userid | 家长的external_userid,仅当家长已关注才返回。|
