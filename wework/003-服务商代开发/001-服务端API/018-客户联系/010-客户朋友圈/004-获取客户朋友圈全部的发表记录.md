---
title: "获取客户朋友圈全部的发表记录"
doc_id: 25254
category_id: 96352
source_url: https://developer.work.weixin.qq.com/document/path/96352
---
最后更新：2023/12/01

[TOC]
##获取企业全部的发表列表
企业和第三方应用可通过该接口获取企业全部的发表内容。

**请求方式：**POST(**HTTPS**)
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/get_moment_list?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "start_time":1605000000,
 "end_time":1605172726,
 "creator":"zhangsan",
 "filter_type":1,
 "cursor":"CURSOR",
 "limit":10
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| start_time   | 是 | 朋友圈记录开始时间。Unix时间戳 |
| end_time | 是 | 朋友圈记录结束时间。Unix时间戳 |
|creator|否|朋友圈创建人的userid|
| filter_type | 否 | 朋友圈类型。0：企业发表 1：个人发表 2：所有，包括个人创建以及企业创建，默认情况下为所有类型|
|cursor|否|用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填|
|limit|否|返回的最大记录数，整型，最大值20，默认值20，超过最大值时取默认值

**补充说明:**
> 朋友圈记录的起止时间间隔不能超过30天
> 在朋友圈发表列表中，按时间只能取到(start_time, end_time)范围内的数据
>web管理端会展示企业成员所有已经发表的朋友圈（包括已经删除朋友圈），而API接口将不会返回已经删除的朋友圈记录

**权限说明：**
- 企业需要使用配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 自建应用调用，只会返回应用可见范围内用户的发送情况。
- 第三方应用调用需要企业授权**客户朋友圈**下**获取企业全部的发表记录**的权限

**返回结果：**
```
{
  "errcode":0,
  "errmsg":"ok",
  "next_cursor":"CURSOR",
  "moment_list":[
    {
      "moment_id":"momxxx",
      "creator":"xxxx",
      "create_time":1605000000,
      "create_type":1,
      "visible_type":1,
      "text":{
        "content":"test"
      },
      "image":[
          {"media_id":"WWCISP_xxxxx"}
      ],
      "video":{
        "media_id":"WWCISP_xxxxx",
        "thumb_media_id":"WWCISP_xxxxx"
      },
      "link":{
        "title":"腾讯网-QQ.COM",
        "url":"https://www.qq.com"
      },
      "location":{
        "latitude":"23.10647",
        "longitude":"113.32446",
        "name":"广州市 · 广州塔"
      }
    }
  ]
}
```

**参数说明：**

| 参数 | 说明 |
| :----------- | :----------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| next_cursor | 分页游标，下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则返回空|
|moment_list|朋友圈列表|
| moment_list.moment_id |朋友圈id|
|moment_list.creator|朋友圈创建者userid，[企业发表内容到客户的朋友圈](#34646 )接口创建的朋友圈不再返回该字段|
|moment_list.create_time|创建时间|
|moment_list.create_type|朋友圈创建来源。0：企业 1：个人 |
|moment_list.visible_type|可见范围类型。0：部分可见 1：公开|
|moment_list.text.content|文本消息结构|
|moment_list.image.media_id |图片的media_id列表，可以通过[获取临时素材](#10115 )下载资源|
|moment_list.video.media_id|视频media_id，可以通过[获取临时素材](#10115 )下载资源|
|moment_list.video.thumb_media_id|视频封面media_id，可以通过[获取临时素材](#10115 )下载资源|
|moment_list.link.title|网页链接标题|
|moment_list.link.url|网页链接url|
|moment_list.location.latitude|地理位置纬度|
|moment_list.location.longitude|地理位置经度|
|moment_list.location.name|地理位置名称|

##获取客户朋友圈企业发表的列表
企业和第三方应用可通过该接口获取企业发表的朋友圈成员执行情况

**请求方式：**POST(**HTTPS**)
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/get_moment_task?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "moment_id":"momxxx",
 "cursor":"CURSOR",
 "limit":10
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| moment_id |是|朋友圈id,仅支持企业发表的朋友圈id|
|cursor|否|用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填|
|limit|否|返回的最大记录数，整型，最大值1000，默认值500，超过最大值时取默认值|

**权限说明：**
- 企业需要使用[“客户联系”secret](#13473/开始开发)或配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 自建应用调用，只会返回应用可见范围内用户的发送情况。
- 第三方应用调用需要企业授权**客户朋友圈**下**获取企业全部的发表记录**的权限

**返回结果：**
```
{
  "errcode":0,
  "errmsg":"ok",
  "next_cursor":"CURSOR",
  "task_list":[
    {
      "userid":"zhangsan",
      "publish_status":1
    }
  ]
}
```

**参数说明：**

| 参数 | 说明 |
| :----------- | :----------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| next_cursor | 分页游标，再下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则返回空|
|task_list|发表任务列表|
|task_list.userid|发表成员用户userid|
|task_list.publish_status|成员发表状态。0:未发表 1：已发表 |

##获取客户朋友圈发表时选择的可见范围
企业和第三方应用可通过该接口获取客户朋友圈创建时，选择的客户可见范围
**请求方式：**POST(**HTTPS**)
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/get_moment_customer_list?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "moment_id":"momxxx",
 "userid":"xxx",
 "cursor":"CURSOR",
 "limit":10
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| moment_id |是|朋友圈id|
|userid|是|企业发表成员userid，如果是企业创建的朋友圈，可以通过[获取客户朋友圈企业发表的列表](#获取客户朋友圈企业发表的列表)获取已发表成员userid，如果是个人创建的朋友圈，创建人userid就是企业发表成员userid|
|cursor|否|用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填|
|limit|否|返回的最大记录数，整型，最大值1000，默认值500，超过最大值时取默认值|

**权限说明：**
- 企业需要使用[“客户联系”secret](#13473/开始开发)或配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 自建应用调用，只会返回应用可见范围内用户的发送情况。
- 第三方应用调用需要企业授权**客户朋友圈**下**获取企业全部的发表记录**的权限

**返回结果：**
```
{
  "errcode":0,
  "errmsg":"ok",
  "next_cursor":"CURSOR",
  "customer_list":[
    {
      "userid":"xxx",
      "external_userid":"woAJ2GCAAAXtWyujaWJHDDGi0mACCCC "
    }
  ]
}
```

**参数说明：**

| 参数 | 说明 |
| :----------- | :----------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| next_cursor | 分页游标，再下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则返回空|
| customer_list | 成员可见客户列表|
|customer_list.userid|发表成员用户userid|
|customer_list.external_userid|发送成功的外部联系人userid|

##获取客户朋友圈发表后的可见客户列表
企业和第三方应用可通过该接口获取客户朋友圈发表后，可在微信朋友圈中查看的客户列表
**请求方式：**POST(**HTTPS**)
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/get_moment_send_result?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "moment_id":"momxxx",
 "userid":"xxx",
 "cursor":"CURSOR",
 "limit":100
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| moment_id |是|朋友圈id|
|userid|是|企业发表成员userid，如果是企业创建的朋友圈，可以通过[获取客户朋友圈企业发表的列表](#获取客户朋友圈企业发表的列表)获取已发表成员userid，如果是个人创建的朋友圈，创建人userid就是企业发表成员userid|
|cursor|否|用于分页查询的游标，字符串类型，由上一次调用返回，首次调用可不填|
|limit|否|返回的最大记录数，整型，最大值5000，默认值3000，超过最大值时取默认值|

**权限说明：**
- 企业需要使用[“客户联系”secret](#13473/开始开发)或配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 自建应用调用，只会返回应用可见范围内用户的发送情况。
- 第三方应用调用需要企业授权**客户朋友圈**下**获取企业全部的发表记录**的权限

**返回结果：**
```
{
  "errcode":0,
  "errmsg":"ok",
  "next_cursor":"CURSOR",
  "customer_list":[
    {
      "external_userid":"woAJ2GCAAAXtWyujaWJHDDGi0mACCCC"
    }
  ]
}
```

**参数说明：**

| 参数 | 说明 |
| :----------- | :----------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| next_cursor | 分页游标，再下次请求时填写以获取之后分页的记录，如果已经没有更多的数据则返回空|
| customer_list | 成员发送成功客户列表|
|customer_list.external_userid|成员发送成功的外部联系人userid|

##获取客户朋友圈的互动数据
企业和第三方应用可通过此接口获取客户朋友圈的互动数据。

**请求方式：**POST(**HTTPS**)
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/get_moment_comments?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "moment_id":"momxxx",
 "userid":"xxx"
}
```

**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| moment_id |是|朋友圈id|
|userid|是|企业发表成员userid，如果是企业创建的朋友圈，可以通过[获取客户朋友圈企业发表的列表](#获取客户朋友圈企业发表的列表)获取已发表成员userid，如果是个人创建的朋友圈，创建人userid就是企业发表成员userid|

**权限说明：**
- 企业需要使用[“客户联系”secret](#13473/开始开发)或配置到“[可调用应用](#13473/开始开发)”列表中的自建应用secret所获取的accesstoken来调用（[accesstoken如何获取？](#10013/第三步：获取access_token)）。
- 自建应用调用，只会返回应用可见范围内用户的发送情况。
- 第三方应用调用需要企业授权**客户朋友圈**下**获取企业全部的发表记录**的权限

**返回结果：**
```
{
  "errcode":0,
  "errmsg":"ok",
  "comment_list":[
    {
      "external_userid":"woAJ2GCAAAXtWyujaWJHDDGi0mACAAAA ",
      "create_time":1605172726
    },
    {
      "userid":"zhangshan ",
      "create_time":1605172729
    }
  ],
  "like_list":[
    {
      "external_userid":"woAJ2GCAAAXtWyujaWJHDDGi0mACBBBB ",
      "create_time":1605172726
    },
    {
      "userid":"zhangshan ",
      "create_time":1605172720
    }
  ]
}
```

**参数说明：**

| 参数 | 说明 |
| :----------- | :----------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| comment_list | 评论列表|
| comment_list.external_userid | 评论的外部联系人userid|
|comment_list.userid|评论的企业成员userid，userid与external_userid不会同时出现|
| comment_list.create_time | 评论时间|
| like_list | 点赞列表|
| like_list.external_userid | 点赞的外部联系人userid|
|like_list.userid|点赞的企业成员userid，userid与external_userid不会同时出现|
| like_list.create_time | 点赞时间|
