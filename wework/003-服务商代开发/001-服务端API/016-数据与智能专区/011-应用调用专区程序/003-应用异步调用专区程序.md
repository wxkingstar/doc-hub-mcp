---
title: "应用异步调用专区程序"
doc_id: 53296
category_id: 100021
source_url: https://developer.work.weixin.qq.com/document/path/53296
---
[TOC]

**调用流程**
- ![enter image description here](https://wework.qpic.cn/wwpic3az/476341_lqAIItxiS7y2nwN_1718099832/0)

**权限说明**

| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|需具备「!!#ff0000 数据与智能专区权限!!」 |
|代开发应用|需具备「!!#ff0000 数据与智能专区权限!!」|
|第三方应用|需具备「!!#ff0000 数据与智能专区权限!!」|

## 创建专区程序调用任务
**请求方式：** POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/chatdata/async_program_task?access_token=ACCESS_TOKEN

**请求包体：**

```
{
   "program_id": "xxx",
  "ability_id": "xxx",
  "request_data": "{\"input\":\"xxx\"}"
}
```

**参数说明：** 

| 参数 | 是否必须 | 说明 |
| ------- | ---- | ---- |
|program_id|是|应用关联的程序id|
|ability_id|是|程序关联的能力id|
|request_data|是| 请求的输入JSON，要求与配置的格式匹配|

**返回结果：**
```
{
  "errcode": 0,
  "errmsg": "ok",
  "jobid": "JOBID"
}
```
**参数说明：**

| 参数 | 说明 |
| ------- | ---- |
| errcode |错误码 |
|errmsg|错误码说明|
| jobid | 任务id |

## 获取专区程序任务结果
**请求方式：** POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/chatdata/async_program_result?access_token=ACCESS_TOKEN

**请求包体：**

```
{
   "jobid": "JOBID"
}
```

**参数说明：** 

| 参数 | 是否必须 | 说明 |
| ------- | ---- | ---- |
|jobid|是|任务id|
 
**返回结果：**
```
{
  "errcode": 0,
  "errmsg": "ok",
  "response_errcode": 0,
  "response_data": "{\"output\":\"xxx\"}"
}
```
**参数说明：**

| 参数 | 说明 |
| ------- | ---- |
| errcode |错误码 |
|errmsg|错误码说明|
| response_errcode | [上报异步任务结果](#53367)中上报的errcode。代表专区程序返回的错误码 |
| response_data | [上报异步任务结果](#53367)中上报的result。代表专区程序的输出结果，为自定义的JSON字符串，要求与管理端配置的**输出协议**格式匹配 |
