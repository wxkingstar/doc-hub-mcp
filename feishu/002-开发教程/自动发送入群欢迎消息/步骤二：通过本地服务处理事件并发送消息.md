---
title: "æ­¥éª¤äºŒï¼šé€šè¿‡æœ¬åœ°æœåŠ¡å¤„ç†äº‹ä»¶å¹¶å‘é€æ¶ˆæ¯"
source_url: https://open.feishu.cn/document/event-based-messaging/message-card-reference
last_remote_update: 2024-02-18
last_remote_update_timestamp: 1708253158000
---
æœ€åæ›´æ–°äº 2024-02-18

# æ­¥éª¤äºŒï¼šé€šè¿‡æœ¬åœ°æœåŠ¡å¤„ç†äº‹ä»¶å¹¶å‘é€æ¶ˆæ¯

æœ¬åœ°æœåŠ¡æ”¶åˆ°è®¢é˜…çš„ **ç”¨æˆ·è¿›ç¾¤** äº‹ä»¶åï¼Œéœ€è¦å¤„ç†äº‹ä»¶æ•°æ®å¹¶å‘ç›®æ ‡ç¾¤å‘é€æ¶ˆæ¯ã€‚æœ¬ç« èŠ‚ä¸»è¦ä»‹ç»å®ç°æ¶ˆæ¯å‘é€çš„ä»£ç é€»è¾‘ï¼Œå¹¶æä¾›ç›¸åº”çš„ JavaScript ä»£ç ç‰‡æ®µä¾›ä½ å‚è€ƒã€‚ä½ éœ€è¦æ ¹æ®æœ¬åœ°æœåŠ¡çš„å®é™…æƒ…å†µï¼Œè‡ªè¡Œå®Œå–„ä»£ç ä»¥å®ç°äº‹ä»¶å¤„ç†ä¸æ¶ˆæ¯å‘é€ã€‚

## ä»£ç é€»è¾‘è¯´æ˜

1. è¯†åˆ«ç”¨æˆ·è¿›ç¾¤äº‹ä»¶ã€‚

ç”±äºè®¢é˜…çš„äº‹ä»¶å¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼Œå› æ­¤éœ€è¦é€šè¿‡ **ç”¨æˆ·è¿›ç¾¤** äº‹ä»¶çš„ç‰¹å¾ï¼Œè¯†åˆ«è¯¥äº‹ä»¶ã€‚æ ¹æ® [ç”¨æˆ·è¿›ç¾¤](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/im-v1/chat-member-user/events/added) äº‹ä»¶æ–‡æ¡£ï¼Œè·å–è¯¥äº‹ä»¶çš„å…³é”®ç‰¹å¾ï¼šäº‹ä»¶ç±»å‹ï¼ˆ`header.event_type`ï¼‰ä¸º`im.chat.member.user.added_v1`ã€‚

2. è·å–äº‹ä»¶ä¸­çš„ç”¨æˆ·ä¿¡æ¯ã€‚

å½“æ”¶åˆ° **ç”¨æˆ·è¿›ç¾¤** äº‹ä»¶åï¼Œå‚è€ƒ[ç”¨æˆ·è¿›ç¾¤](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/im-v1/chat-member-user/events/added)äº‹ä»¶æ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‚æ•°å®šä½ç”¨æˆ·ä¸ç¾¤ä¿¡æ¯ï¼Œåç»­ç”¨äºæ„é€ æ¶ˆæ¯å¹¶å‘æŒ‡å®šç¾¤å‘é€æ¶ˆæ¯ã€‚

- `event.users`ï¼šæ·»åŠ è¿›ç¾¤çš„ç”¨æˆ·åˆ—è¡¨ã€‚
    - `event.chat_id`ï¼šå¯¹åº”çš„ç¾¤ IDã€‚

3. è°ƒç”¨é£ä¹¦ OpenAPI å‘é€æ¶ˆæ¯ã€‚

è°ƒç”¨[å‘é€æ¶ˆæ¯](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/im-v1/message/create) OpenAPIï¼Œæ„é€ ä¸€æ¡æ¬¢è¿æ¶ˆæ¯å¹¶@è¿›ç¾¤ç”¨æˆ·ï¼Œé€šè¿‡æŒ‡å®šç¾¤ ID å‘è¯¥ç¾¤å‘é€æ¶ˆæ¯ã€‚

## ç¤ºä¾‹ä»£ç 

æ•´ä½“é€»è¾‘ç”¨ JavaScript ä»£ç æè¿°å¦‚ä¸‹ã€‚

```JavaScript
const axios = require('axios')
// å‡è®¾dataä¸ºå›è°ƒè¿‡æ¥çš„äº‹ä»¶ä½“åŸå§‹å†…å®¹ã€‚
async function group_member_greet(data) {
    if (data.header.event_type !== 'im.chat.member.user.added_v1') {
      // ä¸æ˜¯ç”¨æˆ·è¿›ç¾¤äº‹ä»¶åˆ™å¿½ç•¥ã€‚
      return
    }
  // åœ¨äº‹ä»¶ä¸­è·å–ç”¨æˆ· open_idã€‚
  const users_info = data.event.users.map(x=>`<at id=${x.user_id.open_id}></at>`).join("")
  // æ„é€ æ¬¢è¿æ¶ˆæ¯ã€‚
  const card = {
    "header": {
      "title": {
        "tag": "lark_md",
        "i18n": {
          "zh_cn": "æ¬¢è¿æ–°åŒå­¦"
        }
      }
    },
    "i18n_elements": {
      "zh_cn": [
        {
          "tag": "div",
          "fields": [
            {
              "is_short": false,
              "text": {
                "tag": "markdown",
                "content": `äº²çˆ±çš„${users_info}ï¼Œæ¬¢è¿å…¥ç¾¤ï¼ğŸ‘ğŸ»`
              }
            }
          ]
        }
      ]
    }
  }
  try {
    // è°ƒç”¨å‘é€æ¶ˆæ¯ OpenAPIã€‚
    const resp = await axios.post("https://open.feishu.cn/open-apis/im/v1/messages?receive_id_type=chat_id", {
      receive_id: data.event.chat_id,
      msg_type: "interactive",
      content: JSON.stringify({card})
    })
    return {
      code: resp.data.code,
      msg: resp.data.msg
    }
  } catch(e) {
    return {
      code: -1,
      msg: `${e}`
    }
  }
}
```
