---
title: "获取定制工作台小组件访问数据"
source_url: https://open.feishu.cn/document/workplace-v1/workplace_access_data/search-2
---
最后更新于 2023-07-03

# 获取定制工作台小组件访问数据

获取定制工作台小组件访问数据

## 请求

基本 | 
--- | ---
HTTP URL | https://open.feishu.cn/open-apis/workplace/v1/workplace_block_access_data/search
HTTP Method | POST
接口频率限制 | [20 次/秒](https://open.feishu.cn/document/ukTMukTMukTM/uUzN04SN3QjL1cDN)
支持的应用类型 | 自建应用、商店应用
权限要求  
            **调用该 API 所需的权限。开启其中任意一项权限即可调用** | 查看工作台的使用数据(workplace:workplace_using_data:read)

### 请求头

名称 | 类型 | 必填 | 描述
--- | --- | --- | ---
Authorization | string | 是 | `tenant_access_token`  
**值格式**："Bearer `access_token`"  
**示例值**："Bearer t-7f1bcd13fc57d46bac21793a18e560"  
[了解更多：如何选择与获取 access token](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-choose-which-type-of-token-to-use)

### 查询参数

名称 | 类型 | 必填 | 描述
--- | --- | --- | ---
from_date | string | 是 | 数据检索开始时间，精确到日。格式yyyy-MM-dd。  
**示例值**：2023-02-01
to_date | string | 是 | 数据检索结束时间，精确到日。格式yyyy-MM-dd。  
**示例值**：2023-03-02
page_size | int | 是 | 分页大小，最小为 1，最大为 200，默认为 20。  
**示例值**：20  
**默认值**：`20`  
**数据校验规则**：  
- 取值范围：`1` ～ `200`
page_token | string | 否 | 分页标记，第一次请求不填，表示从头开始遍历；分页查询结果还有更多项时会同时返回新的 page_token，下次遍历可采用该 page_token 获取查询结果  
**示例值**：ddowkdkl9w2d
block_id | string | 否 | 小组件id（BlockID）。  
可前往 飞书管理后台 > 工作台 > 定制工作台，选择指定的工作台并进入工作台编辑器，点击某个小组件，即可查看页面右侧面板中该小组件名称下方的“BlockID”  
**示例值**：283438293839422334

## 响应

### 响应体

名称 | 类型 | 描述
--- | --- | ---
code | int | 错误码，非 0 表示失败
msg | string | 错误描述
data | \- | \-
items | block_access_data\[\] | 工作台中block的访问数据
date | string | 时间,精确到天,格式yyyy-MM-dd
block_id | string | 小组件id（BlockID）。可前往 飞书管理后台 > 工作台 > 定制工作台，选择指定的工作台并进入工作台编辑器，点击某个小组件，即可查看页面右侧面板中该小组件名称下方的“BlockID”
access_data | access_data | block访问数据信息。
pv | int | 访问次数
uv | int | 访问用户数(去重)
has_more | boolean | 是否还有更多项
page_token | string | 分页标记，当 has_more 为 true 时，会同时返回新的 page_token，否则不返回 page_token

### 响应体示例
```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "items": [
            {
                "date": "2023-03-12",
                "block_id": "283438293839422334",
                "access_data": {
                    "pv": 100,
                    "uv": 30
                }
            }
        ],
        "has_more": true,
        "page_token": "ddowkdkl9w2d"
    }
}
```

### 错误码

HTTP状态码 | 错误码 | 描述 | 排查建议
--- | --- | --- | ---
400 | 1629001 | invalid  time format | 传入正确的时间格式 【yyyy-MM-dd】,eg.2023-05-22
400 | 1629002 | from_date can't be greater than to_date | 数据检索结束时间要小于开始时间
400 | 1629005 | invalid page_token | 请使用上一次请求接口返回的page_token
400 | 1629006 | invalid page_size | 分页大小必须是正整数
400 | 1629004 | internal service error | 后端服务异常或网络异常，可重新请求
