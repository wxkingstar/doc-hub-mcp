---
title: "历史版本拉用户进群接口增加应用可用范围校验"
source_url: https://open.feishu.cn/document/platform-notices/breaking-change/added-application-available-range-check-in-invitations
---
最后更新于 2024-10-22

# 历史版本拉用户进群接口增加应用可用范围校验
### 变更说明
为了提升服务的安全性，我们将为以下历史版本的拉用户进群OAPI增加**应用可用范围校验**
- v3版本：`/open-apis/chat/v3/chatter/add`
- [v4版本](https://open.feishu.cn/document/ukTMukTMukTM/ucTO5QjL3kTO04yN5kDN)：`/open-apis/chat/v4/chatter/add`

调用上述接口拉用户进群时，要求用户必须在开发者后台配置的可用范围中，否则应用可用范围校验无法通过。

>  是否跟随客户端版本：不跟随特定客户端版本<br>
>  预计生效时间：2024-11-25

### 潜在影响

若存在未通过校验的用户，这部分用户不会被加入群中，但是会在结果中返回，其余用户可正常被添加进群，接口不会报错。<br><br>
1. **v3版本**群加人接口结果返回示例如下，可用范围校验不通过的用户在`invisible_open_ids`或`invisible_employee_ids`字段中返回
- 应用可用范围校验通过

```json 
 {
    "code": 0,
    "msg": "ok"
}
``` 
- 入参通过`open_ids`拉用户进群，应用可用范围校验不通过
```json
{
    "code": 0,
    "invisible_open_ids": [
        "ou_c255c3630bce49ba3a91ec37b9b99a64"
    ],
    "msg": "ok"
}
```
- 入参通过`employee_ids`拉用户进群，应用可用范围校验不通过
```json
{
    "code": 0,
    "invisible_employee_ids": [
        "d3egb612"
    ],
    "msg": "ok"
}
```

2. **v4版本**群加人接口结果返回示例如下，可用范围校验不通过的用户在`invisible_open_ids`或`invisible_user_ids`字段中返回
- 应用可用范围校验通过
```json
{
    "code": 0,
    "data": {
        "invalid_open_ids": [],
        "invalid_user_ids": []
    },
    "msg": "ok"
}
```
- 入参通过`open_ids`拉用户进群，应用可用范围校验不通过
```json
{
    "code": 0,
    "data": {
        "invalid_open_ids": [],
        "invalid_user_ids": [],
        "invisible_open_ids": [
            "ou_c255c3630bce49ba3a91ec37b9b99a64"
        ]
    },
    "msg": "ok"
}
```
- 入参通过`user_ids`拉用户进群，应用可用范围校验不通过
```json
{
    "code": 0,
    "data": {
        "invalid_open_ids": [],
        "invalid_user_ids": [],
        "invisible_user_ids": [
            "d3egb612"
        ]
    },
    "msg": "ok"
}
```

### 解决方案
可在开发者后台中，将校验不通过的用户加入到**可用范围**中，以使其通过校验。配置方式请参考：[配置应用可用范围](https://open.feishu.cn/document/home/introduction-to-scope-and-authorization/availability)。

<br>若你未能及时确认并调整，管控生效后，可能会导致相关场景受损。<br>
变更预计在**2024年11月25日**生效，请于此前确认以上信息，并根据情况做好相应适配。<br>
如需适配协助，请联系开放平台技术支持。
