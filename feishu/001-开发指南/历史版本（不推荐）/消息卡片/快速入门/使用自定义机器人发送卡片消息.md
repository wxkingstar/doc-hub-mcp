---
title: "ä½¿ç”¨è‡ªå®šä¹‰æœºå™¨äººå‘é€å¡ç‰‡æ¶ˆæ¯"
source_url: https://open.feishu.cn/document/common-capabilities/message-card/getting-started/send-message-cards-with-a-custom-bot
---
æœ€åæ›´æ–°äº 2024-08-20

# ä½¿ç”¨è‡ªå®šä¹‰æœºå™¨äººå‘é€å¡ç‰‡æ¶ˆæ¯

é£ä¹¦æ¶ˆæ¯å¡ç‰‡å…è®¸é€šè¿‡æœºå™¨äººæˆ–åº”ç”¨ï¼Œä»¥ç»“æ„åŒ–ï¼ˆJSON æ•°æ®ç»“æ„ï¼‰çš„æ–¹å¼å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚å› æ­¤ï¼Œä½ å¯ä»¥ä½¿ç”¨æ¶ˆæ¯å¡ç‰‡æ¨é€æ´»åŠ¨é€šçŸ¥ã€ä¸šåŠ¡å®¡æ‰¹ã€ç›‘æ§å‘Šè­¦ä»¥åŠæ—¥ç¨‹ç­‰ä¿¡æ¯ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ç¾¤æœºå™¨äººå‘é€æ¶ˆæ¯å¡ç‰‡é€šçŸ¥ã€‚warning
è¯¥æ–‡æ¡£ä¸ºå†å²æ¶ˆæ¯å¡ç‰‡æ–‡æ¡£ï¼Œå·²ä¸å†ç»´æŠ¤ã€‚äº†è§£å¯¹åº”æ–°ç‰ˆæ–‡æ¡£ï¼Œå‚è€ƒ[ä½¿ç”¨è‡ªå®šä¹‰æœºå™¨äººå‘é€é£ä¹¦å¡ç‰‡](https://open.feishu.cn/document/uAjLw4CM/ukzMukzMukzM/feishu-cards/quick-start/send-message-cards-with-custom-bot)ã€‚
## ç¤ºä¾‹æ•ˆæœ

é€šè¿‡æœ¬æ–‡æ“ä½œå¯å®ç°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ•ˆæœï¼Œå³é€šè¿‡ç¾¤è‡ªå®šä¹‰æœºå™¨äººæ¨é€ä¸€ä¸ªç¤ºä¾‹å¡ç‰‡æ¶ˆæ¯ã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/a61642e3fad1c9220f8c817b34fe2c30_hH3uZYZEha.png?height=1350&lazyload=true&maxWidth=600&width=2120)

## æ“ä½œæ­¥éª¤

### æ­¥éª¤ä¸€ï¼šå‡†å¤‡å·¥ä½œ

æœ¬æ–‡å°†ä½¿ç”¨ Python ä»£ç å®ç°æ¶ˆæ¯å¡ç‰‡çš„å‘é€ï¼Œå› æ­¤éœ€è¦å®Œæˆä»¥ä¸‹å‡†å¤‡å·¥ä½œã€‚

1. åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒå®‰è£… Python è¿è¡Œç¯å¢ƒã€‚

å®˜æ–¹å®‰è£…æ–¹å¼ï¼Œå‚è§[Python](https://www.python.org/)ã€‚

2. åœ¨æœ¬åœ°ç»ˆç«¯å†…ï¼Œä½¿ç”¨ pip å‘½ä»¤å®‰è£… `requests` åŒ…ã€‚

Python ç‰ˆæœ¬ä¸åŒï¼Œå‘½ä»¤ä¹Ÿä¸åŒï¼š

- å¦‚æœä½ å®‰è£…çš„ Python2ï¼Œåˆ™å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºã€‚

```
        pip install requests
        ```
    - å¦‚æœä½ å®‰è£…çš„ Python3ï¼Œåˆ™å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºã€‚

```
        pip3 install requests
        ```

### æ­¥éª¤äºŒï¼šåˆ›å»ºæ¶ˆæ¯å¡ç‰‡

1. æ‰“å¼€[æ¶ˆæ¯å¡ç‰‡æ­å»ºå·¥å…·](https://open.feishu.cn/tool/cardbuilder)é¡µé¢ã€‚

2. åœ¨æ¶ˆæ¯å¡ç‰‡æ­å»ºå·¥å…·é¡µé¢ï¼Œå•å‡»å·¦ä¾§ **å‚è€ƒæ¡ˆä¾‹**ï¼Œé€‰æ‹©æ¶ˆæ¯å¡ç‰‡æ¨¡ç‰ˆï¼Œç„¶åå•å‡» **ä½¿ç”¨**ã€‚

æœ¬æ–‡é€‰æ‹©ä½¿ç”¨ **æ´»åŠ¨é€šçŸ¥** æ¨¡ç‰ˆã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/0703dccf7ac75cdb9b930d8fafebbfa7_ekYH8qm4Tg.png?height=1442&lazyload=true&maxWidth=600&width=2882)

3. ï¼ˆå¯é€‰ï¼‰ç¼–è¾‘å¡ç‰‡å†…å®¹ã€‚

ä½ å¯ä»¥åœ¨ **å¡ç‰‡é¢„è§ˆ** åŒºåŸŸï¼Œç‚¹å‡»å¡ç‰‡å†…å®¹è¿›è¡Œä¿®æ”¹ã€‚å…³äºå¡ç‰‡å†…å®¹æ„é€ çš„ç›¸å…³è¯´æ˜ï¼Œå‚è§[æ¶ˆæ¯å¡ç‰‡è®¾è®¡è§„èŒƒ](https://open.feishu.cn/document/ukTMukTMukTM/ugDOwYjL4gDM24CO4AjN)ã€[å¡ç‰‡ç»“æ„ä»‹ç»](https://open.feishu.cn/document/ukTMukTMukTM/uEjNwUjLxYDM14SM2ATN)ã€‚
æœ¬ç¤ºä¾‹ä¸­ï¼Œä¸å¯¹ **æ´»åŠ¨é€šçŸ¥** å¡ç‰‡åšä»»ä½•å¤„ç†ï¼Œç›´æ¥ä½¿ç”¨è¯¥æ¨¡æ¿è¿›è¡Œæ¼”ç¤ºã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/99d6a41b10eaa358737ba6f8afd456fc_JdLX6DhWiI.png?height=1418&lazyload=true&maxWidth=600&width=2882)

4. åœ¨é¡µé¢å³ä¸Šè§’ï¼Œç‚¹å‡» **ä¿å­˜å¹¶å‘å¸ƒ**ï¼Œç„¶ååœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ç‚¹å‡» **å‘å¸ƒ**ã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/dc05b773eec13b60e816a54ed67ffe94_X9rQwrp3kZ.png?height=1390&lazyload=true&maxWidth=600&width=2882)

### æ­¥éª¤ä¸‰ï¼šåˆ›å»ºç¾¤è‡ªå®šä¹‰æœºå™¨äºº

1. ç™»å½•é£ä¹¦å®¢æˆ·ç«¯ï¼ˆPC ç«¯ï¼‰ã€‚

2. é€‰æ‹©ä¸€ä¸ªç›®æ ‡ç¾¤ç»„ï¼Œåœ¨ç¾¤è®¾ç½®ä¸­ç‚¹å‡» **ç¾¤æœºå™¨äºº**ã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/8b428c13cfc712451a4bf00e691ba1df_8hfyh110qu.png?height=1526&lazyload=true&maxWidth=600&width=1814)

3. ç‚¹å‡» **æ·»åŠ æœºå™¨äºº**ï¼Œå¹¶é€‰æ‹© **è‡ªå®šä¹‰æœºå™¨äºº**ã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/0f985396ea78e017d70bf3af3a7781ad_0Bz9biJxxP.png?height=1528&lazyload=true&maxWidth=600&width=2290)

4. ç¡®è®¤æœºå™¨äººå¤´åƒã€åç§°ä¸æè¿°ï¼Œç„¶åç‚¹å‡» **æ·»åŠ **ã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/57a5eaf0017d148e4227b96def376110_m5zSBQ13y4.png?height=1174&lazyload=true&maxWidth=600&width=1686)

5. æ·»åŠ åï¼Œå¦¥å–„ä¿ç®¡æœºå™¨äºº webhook åœ°å€ï¼Œå¹¶ç‚¹å‡» **å®Œæˆ**ã€‚    
åç»­éœ€è¦å‘æœºå™¨äººçš„ webhook åœ°å€å‘é€è¯·æ±‚ï¼Œä»¥å‘é€æ¶ˆæ¯å¡ç‰‡ï¼Œå› æ­¤ä½ éœ€è¦ä¿å­˜è¯¥ webhookï¼Œå¹¶ç¡®ä¿æ•°æ®å®‰å…¨ï¼Œé¿å…æœºå™¨äººè¢«ä»–äººæ¶æ„è°ƒç”¨ã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/bfaaf7316f9a5a43db7554da58eb6b8f_g4L2H75YdJ.png?height=1136&lazyload=true&maxWidth=600&width=1664)

### æ­¥éª¤å››ï¼šå‘é€æ¶ˆæ¯å¡ç‰‡

1. åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªåä¸º `main.py` çš„ Python æ–‡ä»¶ã€‚

2. ä½¿ç”¨æœ¬åœ°çš„ä»£ç ç¼–è¾‘å·¥å…·æ‰“å¼€ main.py æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œå¹¶å‚è€ƒæ³¨é‡Šæ‰‹åŠ¨é…ç½®ç›¸å…³å‚æ•°ã€‚
    ```PYTHON
    import requests
    import json
    ## æ›¿æ¢ä¸ºä½ çš„è‡ªå®šä¹‰æœºå™¨äººçš„ webhook åœ°å€ã€‚
	url = "https://open.feishu.cn/open-apis/bot/v2/hook/xxxx"
    ## å°†æ¶ˆæ¯å¡ç‰‡å†…å®¹ç²˜è´´è‡³æ­¤å¤„ã€‚
    card_json = r'''
    {
      "config": {
        "wide_screen_mode": true
      },
      "elements": [
        {
          "alt": {
            "content": "",
            "tag": "plain_text"
          },
          "img_key": "img_v2_bfd72a81-1533-4699-995d-12a675708d0g",
          "tag": "img"
        },
        {
          "tag": "div",
          "text": {
            "content": "ä½ æ˜¯å¦æ›¾å› ä¸ºä¸€æœ¬ä¹¦è€Œäº§ç”Ÿå¿ƒçµå…±æŒ¯ï¼Œå¼€å§‹æ„Ÿæ‚Ÿäººç”Ÿï¼Ÿ\nä½ æœ‰å“ªäº›æƒ³æåŠ›æ¨èç»™ä»–äººçš„çè—å¥½ä¹¦ï¼Ÿ\n\nåŠ å…¥ **4Â·23 é£ä¹¦è¯»ä¹¦èŠ‚**ï¼Œåˆ†äº«ä½ çš„**æŒšçˆ±ä¹¦å•**åŠ**è¯»ä¹¦ç¬”è®°**ï¼Œ**èµ¢å–åƒå…ƒè¯»ä¹¦ç¤¼**ï¼\n\nğŸ“¬ å¡«å†™é—®å·ï¼Œæ™’å‡ºä½ çš„çè—å¥½ä¹¦\nğŸ˜ æƒ³çŸ¥é“å…¶ä»–äººéƒ½æ¨èäº†å“ªäº›å¥½ä¹¦ï¼Ÿé©¬ä¸Š[å…¥ç¾¤å›´è§‚](https://open.feishu.cn/)\nğŸ“ ç”¨[è¯»ä¹¦ç¬”è®°æ¨¡æ¿](https://open.feishu.cn/)ï¼ˆæ¡Œé¢ç«¯æ‰“å¼€ï¼‰ï¼Œè®°å½•ä½ çš„å¿ƒå¾—ä½“ä¼š\nğŸ™Œ æ›´æœ‰æƒŠå–œç‰¹é‚€å˜‰å®¾ 4æœˆ12æ—¥èµ·å¸¦ä½ å…±è¯»",
            "tag": "lark_md"
          }
        },
        {
          "actions": [
            {
              "tag": "button",
              "text": {
                "content": "ç«‹å³æ¨èå¥½ä¹¦",
                "tag": "plain_text"
              },
              "type": "primary",
              "url": "https://open.feishu.cn/"
            },
            {
              "tag": "button",
              "text": {
                "content": "æŸ¥çœ‹æ´»åŠ¨æŒ‡å—",
                "tag": "plain_text"
              },
              "type": "default",
              "url": "https://open.feishu.cn/"
            }
          ],
          "tag": "action"
        }
      ],
      "header": {
        "template": "turquoise",
        "title": {
          "content": "ğŸ“šæ™’æŒšçˆ±å¥½ä¹¦ï¼Œèµ¢è¯»ä¹¦ç¤¼é‡‘",
          "tag": "plain_text"
        }
      }
    }
    '''
    body = json.dumps({"msg_type": "interactive", "card": card_json})
    headers = {"Content-Type": "application/json"}
    res = requests.post(url=url, data=body, headers=headers)
    print(res.request.body)
    print(res.text)
    ```

å‚æ•°å€¼é…ç½®è¯´æ˜ï¼š

- è‡ªå®šä¹‰æœºå™¨äºº webhook åœ°å€ï¼šå¡«å†™ä½ å·²ä¿å­˜çš„ç¾¤æœºå™¨äºº webhook åœ°å€ã€‚

- æ¶ˆæ¯å¡ç‰‡çš„å†…å®¹æ˜¯æŒ‡å¡ç‰‡çš„ JSON æ•°æ®ï¼Œè·å–æ–¹å¼å¦‚ä¸‹ï¼š

1. æ‰“å¼€[æ¶ˆæ¯å¡ç‰‡æ­å»ºå·¥å…·](https://open.feishu.cn/tool/cardbuilder)é¡µé¢ã€‚

2. æ‰“å¼€å·²åˆ›å»ºå¹¶ä¿å­˜çš„ **æ´»åŠ¨é€šçŸ¥** å¡ç‰‡ã€‚

3. åœ¨ **ç¼–è¾‘å¡ç‰‡** åŒºåŸŸï¼Œç‚¹å‡»ä»£ç å›¾æ ‡ï¼Œè·å– JSON æ•°æ®ã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/6938acf0f2a295a39f79c061acc68349_MpTRXqsaGb.png?height=1440&lazyload=true&maxWidth=600&width=2882)

3. ä¿å­˜æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶æ‰€åœ¨è·¯å¾„æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿è¡Œ `main.py` æ–‡ä»¶ã€‚

- Python2 ç¯å¢ƒæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
        python main.py
        ```

- Python3 ç¯å¢ƒæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
        python3 main.py
        ```

4. åœ¨é£ä¹¦å®¢æˆ·ç«¯ç¾¤ç»„ä¸­ï¼ŒæŸ¥çœ‹æ¶ˆæ¯å¡ç‰‡ä¿¡æ¯ã€‚

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/a8a9bb0ad7a5113216504bd98addd51f_GU0FkmwaER.png?height=1634&lazyload=true&maxWidth=600&width=2882)
