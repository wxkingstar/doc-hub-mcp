---
title: "更新员工花名册信息"
doc_id: 48936
category_id: 99133
source_url: https://developer.work.weixin.qq.com/document/path/99133
---
最后更新：2024/01/04

>通过这个接口更新指定员工的花名册信息
>调用参数中的字段id信息可以通过[获取员工字段配置](#48934/获取员工字段配置)接口获取
>有一些字段不支持更新，参考[不支持更新字段表](#forbidden_fields)

**请求方式：**POST(**HTTPS**)
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/hr/update_staff_info?access_token=ACCESS_TOKEN

**请求包体：**
```
{
  "userid":"xxxxx",
  "update_items":[
    {
      "fieldid":11020,
      "sub_idx":0,
      "value_string":"xxxxx"
    },
    {
      "fieldid":17003,
      "sub_idx":1,
      "value_mobile":{
        "value_mobile_country_code":"xxx",
        "value_mobile":"xxxxxxxx"
      }
    }
  ],
  "remove_items":[
    {
      "group_type":1,
      "sub_idx":1
    },
    {
      "group_type":1,
      "sub_idx":2
    }
  ],
  "insert_items":[
    {
      "group_type":4,
      "item":[
        {
          "fieldid":17001,
          "sub_idx":0,
          "value_string":"孙悟空"
        },
        {
          "fieldid":17002,
          "sub_idx":0,
          "value_uint32":1
        },
        {
          "fieldid":17003,
          "sub_idx":0,
          "value_mobile":{
            "value_country_code":"xxx",
            "value_mobile":"xxxxxxxx"
          }
        },
        {
          "fieldid":17004,
          "sub_idx":0,
          "value_string":"娜美克星"
        }
      ]
    }
  ]
}
```

**参数说明：**

|参数|必须|说明|
|---|---|---|
|access_token|是|调用接口凭证 |
|userid|是|需要更新花名册信息的员工的userid<br>该员工需要在调用应用的可见范围内，否则将返回错误码|
|update_items|否|需要更新、增加或清空单个字段的内容，参考[更新字段说明](#update_items)。<br>有一些字段不支持更新，参考[不支持更新字段表](#forbidden_fields)。<br>这个字段和remove_items、insert_items字段不能全部为空|
|remove_items|否|可重复的字段组(参考[可重复字段组列表](#multigroup))中需要整组字段进行删除的字段组，参考[删除字段说明](#remove_items)。<br>这个字段和update_items、insert_items字段不能全部为空|
|insert_items|否|可重复的字段组(参考[可重复字段组列表](#multigroup))中需要增加一组字段的字段组，参考[增加字段说明](#addfield_items)。<br>这个字段和update_items、remove_items字段不能全部为空|

**可重复字段组列表：**
|编号|名称|
|---|---|
|1|教育经历|
|2|工作经历|
|3|家庭成员|
|4|紧急联系人|
|5|合同信息|

**更新字段说明：**
|参数|必须|说明|
|---|---|---|
|fieldid|是|字段id|
|sub_idx|否|可重复组中的字段下标，非可重复组中的字段时需要填0|
|value_xxxxx|否|需要更新、增加或清空的员工信息字段内容。<br>根据员工信息字段的类型，需要填写的这个字段的名称和类型也不同，参考[字段值类型对照表](#value_type)。<br>除了对应的字段外，在其他字段填写的内容将被忽略。|

**不支持更新字段表：**
>以字段id为准

|名称|字段id|
|---|---|
|年龄|11006|
|社会工龄|11012|
|员工状态|12004|

**删除字段说明：**
|参数|必须|说明|
|---|---|---|
|group_type|是|需要删除的字段组类型，参考[可重复字段组列表](#multigroup)|
|sub_idx|是|需要删除的是第几组字段|

**增加字段说明：**
|参数|必须|说明|
|---|---|---|
|group_type|是|需要增加的字段组类型，参考[可重复字段组列表](#multigroup)|
|item|否|列表，需要增加的字段内容；<br>填写要求与[更新字段说明](#update_items)相同，但sub_idx字段的内容将被忽略；<br>没有找到对应字段id的字段内容将被忽略。|

**字段值类型对照表：**
|字段类型|对应的内容字段名称|对应的内容字段类型|
|---|---|---|---|
|字符串|value_string|字符串|
|64位非负整数|value_uint64|非负整数|
|32位非负整数|value_uint32|非负整数|
|64位整数|value_int64|整数|
|电话号码|value_mobile|参考[电话号码类型字段结构](#value_mobile)|

**电话号码类型字段结构：**
|参数|说明|
|---|---|
|value_country_code|字符串，表示电话号码的区号|
|value_mobile|字符串，表示电话号码<br>这个字段如果不填/填写空串，则视为整个电话号码字段传入为空|

**返回数据：**
```
{
  "errcode":0,
  "errmsg":"ok",
  "update_results":[
    {
      "fieldid":11001,
      "sub_idx":0,
      "result":1
    }
  ],
  "remove_results":[
    {
      "group_type":1,
      "sub_idx":20,
      "result":3
    }
  ],
  "insert_result":[
    {
      "group_type":1,
      "idx":1,
      "result":4
    }
  ]
}
```

**参数说明：**
|参数|说明|
|---|---|
|errcode|返回码|
|errmsg|对返回码的文本描述|
|---|---|
|update_results|更新字段的结果|
|update_results.fieldid|尝试更新的字段id|
|update_results.sub_idx|尝试更新的字段下标|
|update_results.result|更新的结果，参考[结果类型对照表](#result)|
|---|---|
|remove_results|删除字段组的结果|
|remove_results.group_type|尝试删除的字段组类型|
|remove_results.sub_idx|尝试删除的字段组下标|
|remove_results.result|删除的结果，参考[结果类型对照表](#result)|
|---|---|
|insert_results|增加字段组的结果|
|insert_results.group_type|尝试增加的字段组类型|
|insert_results.idx|尝试增加的字段组输入时的下标|
|insert_results.result|增加的结果，参考[结果类型对照表](#result)|

**结果类型对照表：**
|参数|结果类型|
|---|---|
|1|成功|
|2|失败|
|3|未找到的字段id/字段下标|
|4|必填字段未填写/被清空|
|5|不支持更新的字段类型|
