---
title: "查询付款记录"
doc_id: 11546
category_id: 90279
source_url: https://developer.work.weixin.qq.com/document/path/90279
---
最后更新：2023/08/01

说明：「向员工付款」功能暂不支持新增，已开通商户的功能使用不受影响。
## API接口协议
用于商户的企业微信企业付款操作进行结果查询，返回付款操作详细结果。
查询企业微信企业付款API只支持查询30天内的订单，30天之前的订单请登录商户平台查询。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://api.mch.weixin.qq.com/mmpaymkttransfers/promotion/querywwsptrans2pocket
**是否需要证书：**请求需要双向证书。 详见证书使用
**数据格式：**xml

**请求示例：**

```
<xml>
 <sign><
- ![CDATA[E1EE61A91C8E90F299DE6AE075D60A2D]]></sign>
 <partner_trade_no><
- ![CDATA[0010010404201411170000046545]]></partner_trade_no>
 <mch_id ><
- ![CDATA[10000097]]></mch_id >
 <appid><
- ![CDATA[wxe062425f740c8888]]></appid>
 <nonce_str><
- ![CDATA[50780e0cca98c8c8e814883e5caa672e]]></nonce_str>
</xml>

```
 **参数说明：**

| 字段名|字段|必填|示例值 | 类型 | 说明 |
| ------------ | ------------ |
| 随机字符串 | nonce_str |是| 5K8264ILTKCH16CQ2502SI8ZNMTM67VS | String(32) |随机字符串，不长于32位
| 微信支付签名 | sign |是| C380BEC2BFD727A4B6845133519F3AD6| String(32) |参见“[签名算法](#11652)”
| 商户订单号 | partner_trade_no |是| 10000098201411111234567890| String(28) |商户调用企业微信企业付款API时使用的商户订单号
| 商户号 | mch_id |是| 10000098| String(32) |微信支付分配的商户号
| Appid | appid |是| wxe062425f740d30d8| String(128) |商户号的appid

**返回结果 ：**

```
<xml>
<return_code><
- ![CDATA[SUCCESS]]></return_code>
<return_msg><
- ![CDATA[获取成功]]></return_msg>
<result_code><
- ![CDATA[SUCCESS]]></result_code>
<mch_id>10000098</mch_id>
<appid><
- ![CDATA[wxe062425f740c30d8]]></appid>
<detail_id><
- ![CDATA[1000000000201503283103439304]]></detail_id>
<partner_trade_no><
- ![CDATA[0010010404201411170000046545]]></partner_trade_no>
<status><
- ![CDATA[SUCCESS]]></status>
<payment_amount>100</payment_amount >
<openid ><
- ![CDATA[oxTWIuGaIt6gTKsQRLau2M0yL16E]]></openid>
<transfer_time><
- ![CDATA[2017-07-22 20:10:15]]></transfer_time>
<transfer_name ><
- ![CDATA[测试]]></transfer_name >
<desc><
- ![CDATA[付款测试]]></desc>
</xml>

```
**返回参数:**

| 字段名|字段|必填|示例值 | 类型 | 说明 |
| ------------ | ------------ |
| 返回状态码 | return_code |是| SUCCESS |String(16)|SUCCESS/FAIL此字段是通信标识，非交易标识，交易是否成功需要查看result_code来判断
| 返回信息 | return_msg |否| 签名失败 | String(128) |返回信息，如非空，为错误原因

**以下字段在return_code为SUCCESS的时候有返回:**

| 字段名|字段|必填|示例值 | 类型 | 说明 |
| ------------ | ------------ |
| 业务结果 | result_code |是| SUCCESS | String(16) |SUCCESS/FAIL
| 错误代码 | err_code | 否 | SYSTEMERROR | String(32) |错误码信息
| 错误代码描述 | err_code_des | 否 | 系统错误 | String(128) |结果信息描述

**以下字段在return_code 和result_code都为SUCCESS的时候有返回:**

| 字段名|字段|必填|示例值 | 类型 | 说明 |
| ------------ | ------------ |
| 商户订单号 | partner_trade_no |是| 10000098201411111234567890 | String(32) | 商户使用查询API填写的单号的原路返回
| 商户号 | mch_id |是| 10000098 | String(32) |微信支付分配的商户号
| 付款单号 | detail_id | 是 | 1000000000201503283103439304 | String(64) | 调用企业微信企业付款API时，微信系统内部产生的单号
| 转账状态 | status | 是 | SUCCESS | string(16) | SUCCESS:转账成功 FAILED:转账失败 PROCESSING:处理中
| 失败原因 | reason | 否 | 余额不足 | String(128) | 如果失败则有失败原因
| 收款用户openid | openid | 是 | oxTWIuGaIt6gTKsQRLau2M0yL16E | String(64) | 转账的openid
| 收款用户姓名 | transfer_name | 否 | 马华 | String(64) | 收款用户姓名
| 付款金额 | payment_amount | 是 | 5000 | int | 付款金额单位分
| 转账时间 | transfer_time | 是 | 2015-04-21 20:00:00 | String(32) | 发起转账的时间
| 付款描述 | desc | 是 | 用车补贴 | String(100) | 付款时候的描述

**错误码:**

| 错误码 | 错误描述 | 解决方式 
| ------------ | ------------ |
| CA_ERROR | 请求未携带证书，或请求携带的证书出错 | 到商户平台下载证书，请求带上证书后重试
| SIGN_ERROR | 微信支付签名错误 | 按文档要求重新生成签名后再重试
| NO_AUTH | 没有权限 | 请联系微信支付开通api权限
| FREQ_LIMIT | 受频率限制 | 请对请求做频率控制
| XML_ERROR | 请求的xml格式错误，或者post的数据为空 | 检查请求串，确认无误后重试
| PARAM_ERROR | 参数错误 | 请查看err_code_des，修改设置错误的参数
| SYSTEMERROR | 系统繁忙，请再试 | 系统繁忙
| NOT_FOUND | 指定单号数据不存在 | 查询单号对应的数据不存在，请使用正确的商户订单号查询
| WORKWX_MCHID_ERROR | 企业微信商户号和企业关系校验失败 | 确认是否已经绑定商户号和企业微信的关系
| WORKWX_SIGN_ERROR | 企业微信签名错误 | 按文档要求重新生成签名后再重试
