---
title: "获取支付签名"
doc_id: 45655
category_id: 98130
source_url: https://developer.work.weixin.qq.com/document/path/98130
---
最后更新：2023/02/02

商户系统获取完预支付交易会话标识（prepay_id）后，在小程序端调用wxsdk前，需要调用本接口获取到必要的签名字段，再调起微信支付。

---

**请求方式：**POST(HTTPS)
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/miniapppay/get_sign?access_token=ACCESS_TOKEN

**请求包体：**
```
{
  "appid": "wx1cce664e7cdcf31a",
  "prepay_id": "wx111925097328382762a266f5cefb640000",
  "sign_type": "RSA",
  "nonce": "fqDdjLywAmNDZleCWfPsfhlInxnwnOLK",
  "timestamp": 1675219608
}
```

**参数说明：**
| 参数名 | 变量 | 类型[长度限制] | 必填 | 说明 |
| ------ | ------ | ------ | ------ | ------ |
| 应用ID | appid | string[1,32] | 是 | 二级商户申请的公众号或移动应用appid。 |
| 预支付交易会话标识 | prepay_id | string[1,128] | 是 | 小程序下单接口返回的prepay_id参数值.仅支持下单两小时内的prepay_id |
|签名方式 | sign_type | string[1,32] | 否 | 签名类型，默认为RSA，仅支持RSA。|
|随机字符串 | nonce | string[1,32] | 是 | 随机字符串，不长于32位，内容仅支持数字、大小写字母。 |
| 时间戳 | timestamp | int | 是 | 当前的秒级时间戳 |

**返回结果：**

```
{
  "pay_sign": "mHIpSqqf1EnBHAOZ5EE3CJRmgHeRcEsfHg0zhOWs+recA6LrHiHZwWT1M6/+ZvzztOkwjnnx8We4n/xX0mNWM5A6eUQYXE9CEgQKVKPIHVXmsheJqPUIiOXXoRaFY7byLzjkQXcGrNG9iDXdhzwCFeQSNXs072uN+2QRoA+mk0pBiY/uPdFXPBPx8nd5FJshrsnzEGmS+nLbyOfJjTH7SkJPCHuxaDPsf24LD5HRT8bjxMzt/92PZY07NQIQhgcCSqpm758xvEnw43iMNsR2ieUNjwkWyQo+SHvDxr2jn/zmT6JmWhtF+ull+jdptfoRPm/oZsPoqGZfHpc2VSrzMA==",
  "errcode": 0,
  "errmsg": "ok"
}
```

**参数说明**
| 参数名 | 变量 | 类型[长度限制] |说明 |
| ------ | ------ | ------ | ------ |
| 签名值 | pay_sign | string[1,512] | 签名，使用字段appid、timestamp、nonce、prepay_id计算得出的签名值 |
