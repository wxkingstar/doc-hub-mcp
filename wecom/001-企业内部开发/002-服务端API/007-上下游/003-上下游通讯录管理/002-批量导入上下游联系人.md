---
title: "批量导入上下游联系人"
doc_id: 38752
category_id: 95821
source_url: https://developer.work.weixin.qq.com/document/path/95821
---
最后更新：2023/11/30

## 背景

若企业的经销商、供应商较多，
我们建议使用 Excel 或 API 导入数据的方式，邀请下级企业（经销商、供应商）加入上下游。

## 优点
1. 支持批量导入
2. 导入后通过「微信服务通知」进行邀请
3. 导入后，上下游通讯录中的企业、成员有唯一 id，可跟其他系统数据匹配
4. 支持「仅导入的企业可加入」选项，避免无关企业加入，安全性高
5. 导入后，除了服务通知，也支持链接、扫码、群迁移、进上下游群等多种邀请方式并用，加快邀请进度

## 注意事项
1. 微信用户加入上下游需要企业身份
  - 选择已有身份或注册企业均可
  - 若被导入者有多个企业身份，可自行选择用哪个企业身份加入上下游
2. 导入的企业名、成员名，导入者可修改，故导入的信息和上下游通讯录最终信息可能有差别
  - 导入时建议填写「自定义企业 id」，方便识别下级企业
  - 导入时建议填写「自定义成员 id」，方便识别下级企业成员

## 用户侧表现

被导入者本人加入上下游
- ![image](https://wdoc-76491.picgzc.qpic.cn/MTY4ODg1MDY3ODI0MzMyMg_724613_QQg9BNWlYE2mdYTV_1652693790?w=1280&amp;h=894.0851553509781)
 

被导入者本人加入上下游+帮同事确认加入上下游
- ![image](https://wdoc-76491.picgzc.qpic.cn/MTY4ODg1MDY3ODI0MzMyMg_521459_4lo1SKZpTqwkcvrk_1652693814?w=1280&amp;h=533.1078224101481)
 
用户若未加入上下游，会连续 3 天收到微信服务通知

## 数据格式
1、企业负责人指老板、法人、IT 管理员或主要对接人；单企业最多填写 5 人，也可以不填；
2、上下游企业名称请填写完整、准确；
3、支持国内、国际手机号（国内手机号直接输入手机号即可；国际手机号必须包含加号以及国家地区码，格式示例：“+85259\*\*\*\*4”）；
4、表格中填写的企业负责人/成员会在企业微信、微信上收到邀请，确认后即可加入当前上下游；
5、若上下游企业未创建，需任一企业负责人查收微信服务通知，点击激活企业后，成员才会收到邀请；
6、单次导入的企业总数不得超过1000个，导入的企业数加上下游空间的企业数不能超过上下游空间的企业限制;
7、单个企业导入人数不得超过200人;
8、单次最多能导入2000人;
9、每天最多能导入20000人
10、只允许串行调用

### 数据用途
1. 「手机号」用来给对应的微信发服务通知
2. 「企业名称」
  - 用途一：匹配下级企业
  - 用途二：被导入者新建企业时作为默认企业名
3. 「身份」用途：导入了多个人时，负责人有权选择以哪个企微身份加入上下游
 - 若导入的下级企业有「负责人」，只给「负责人」发服务通知，他决定加入上下游的企业身份
    - 多个负责人都会收到服务通知，以最先确认加入上下游的负责人为准
    - 负责人可选择已有的企业、也可新建企业加入上下游
    - 负责人加入上下游后，还要帮其他人确认加入企业、加入上下游
  - 若导入的下级企业无「负责人」
    - 举例：导入下级企业 A 有 3 个人，每个人身份都是「成员」，则每个人自行选择加入上下游的企业身份，最终会在上下游通讯录裂变出 3 个不同的下级企业
    - 此时，导入企业 A 时填写的「自定义企业 id」会丢失

## 提交批量导入上下游联系人任务

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/corpgroup/import_chain_contact?access_token=ACCESS_TOKEN

**请求包体：**

```
{
  "chain_id":"xxxxxx",
  "contact_list":[
    {
      "corp_name":"飞飞培训学校",
      "group_path":"华北区/北京市/海淀区",
      "custom_id":"wof3du51quo5sl1is",
      "contact_info_list":[
        {
          "name":"张三",
          "identity_type":1,
          "mobile":"13000000001",
          "user_custom_id":"100"
        },
        {
          "name":"李四",
          "identity_type":2,
          "mobile":"13000000001",
          "user_custom_id":"100"
        }
      ]
    }
  ]
}

```

**参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ------------ | ------------ |
| chain_id | 是 | 上下游id。文件中的联系人将会被导入此上下游中|
| contact_list | 是 | 上下游联系人列表。这些联系人将会被导入此上下游中|
| contact_list.corp_name | 是 | 上下游企业名称。长度为1-32个utf8字符。只能由中文、字母、数字和“ -_()（）”六种字符组成|
| contact_list.group_path | 否 | 导入后企业所在分组。分组为空的企业会放在根分组下。仅针对新导入企业生效，不会修改已导入企业的分组。|
| contact_list.custom_id | 否 | 上下游企业自定义 id。长度为0～64 个字节，只能由数字和字母组成|
| contact_list.contact_info_list | 是 | 上下游联系人信息列表|
| contact_list.contact_info_list.name | 是 | 上下游联系人姓名。长度为1～32个utf8字符|
| contact_list.contact_info_list.identity_type | 是 | 联系人身份类型。1:成员，2:负责人。|
| contact_list.contact_info_list.mobile | 是 | 手机号。支持国内、国际手机号（国内手机号直接输入手机号即可，格式示例：“138\*\*\*\*0001”；国际手机号必须包含加号以及国家地区码，格式示例：“+85259\*\*\*\*45”|
| contact_list.contact_info_list.user_custom_id | 否 | 上下游用户自定义 id。类型为字符串，暂时只支持传入64比特无符号整型，取值范围1到2^64-2，必须是全数字，不得传入前置0，且不能为11位或13位数字。|

**权限说明：**
调用的应用需要满足如下的权限，仅已验证的企业可调用
| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「[上下游- 可调用接口的应用](#42599/配置可调用接口的应用)」中 |
 *注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)

**导入任务限制：** 
同时只能存在一个导入任务。导入任务包括通过API提交的任务和从管理后台提交的导入任务。

**返回结果：**

```
{
  "errcode": 0,
  "errmsg": "ok",
  "jobid": "xxxxx"
}

```
> 可使用jobid通过[获取异步任务结果](#38785)接口查询任务执行状态及结果
> 当开启了[上下游应用回调通知](#39114)后，任务运行完成时会推送[异步任务完成通知](#38773)

**参数说明 ：**

| 参数 | 说明 |
| ------------ | ------------ |
| errcode   | 返回码。仅表示提交任务的结果。任务执行结果需在任务提交成功后调用[获取异步任务结果](#38785)接口查询|
| errmsg   | 对返回码的文本描述内容|
|jobid   | 异步任务id，最大长度为64字节|
