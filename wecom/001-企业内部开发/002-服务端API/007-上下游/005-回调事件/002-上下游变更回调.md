---
title: "上下游变更回调"
doc_id: 38768
category_id: 95796
source_url: https://developer.work.weixin.qq.com/document/path/95796
---
最后更新：2023/11/29

[TOC]

由上下游系统应用触发的变更不会进行回调
| 应用类型 | 权限要求 | 接收事件开关|
| -------- | ---- | 
|自建应用|配置到「[上下游- 可调用接口的应用](#39114/自建应用上下游回调通知)」中 |[上下游变更回调](#12977/开启接收消息)|
|代开发应用|暂不支持| 无|
|第三方应用|暂不支持|无|

## 创建上下游空间事件
该事件会回调给上下游系统应用
xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[create_chain]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]]</ChainId>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为create_chain|
 |ChainId|上下游Id|

## 更新上下游空间事件
该事件会回调给上下游系统应用
xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[update_chain]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]]</ChainId>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为update_chain |
 |ChainId|上下游Id|
 
 ## 删除上下游空间事件
 该事件会回调给上下游系统应用
xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[delete_chain]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]]</ChainId>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为delete_chain |
 |ChainId|上下游Id|
 
 
## 新增上下游分组事件
该事件会回调给上下游系统应用

xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[create_group]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]]</ChainId>
  <GroupIds>
    <GroupId>5</GroupId>
    <GroupId>6</GroupId>
  </GroupIds>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为create_group |
 |ChainId|上下游Id|
 |GroupIds|分组Id列表|
 |GroupId|分组Id|
 
 ## 更新上下游分组事件
该事件会回调给上下游系统应用

xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[update_group]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]]</ChainId>
  <GroupIds>
    <GroupId>5</GroupId>
    <GroupId>6</GroupId>
  </GroupIds>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为update_group |
 |ChainId|上下游Id|
 |GroupIds|分组Id列表|
 |GroupId|分组Id|
 
 ## 删除上下游分组事件
该事件会回调给上下游系统应用

xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[delete_group]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]]</ChainId>
  <GroupIds>
    <GroupId>5</GroupId>
    <GroupId>6</GroupId>
  </GroupIds>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为delete_group |
 |ChainId|上下游Id|
 |GroupIds|分组Id列表|
 |GroupId|分组Id|
 
 
 ## 企业加入上下游事件
该事件会回调给上下游应用

仅已加入上下游的企业会产生对应事件

xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[corp_join]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]</ChainId>
  <CorpIds>
    <CorpId>
- ![CDATA[xxxxxx]]</CorpId>
    <CorpId>
- ![CDATA[xxxxxx]]</CorpId>
  </CorpIds>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为corp_join |
 |ChainId|上下游Id|
 |CorpIds|企业Id列表|
 |CorpId|企业Id|
 
 
## 更新企业事件
该事件会回调给上下游应用，在变更企业分组时会触发更新企业事件

仅已加入上下游的企业会产生对应事件

xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[update_corp]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]]</ChainId>
  <CorpIds>
    <CorpId>
- ![CDATA[xxxxxx]]</CorpId>
    <CorpId>
- ![CDATA[xxxxxx]]</CorpId>
  </CorpIds>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为update_corp |
 |ChainId|上下游Id|
 |CorpIds|企业Id列表|
 |CorpId|企业Id|

## 移除企业事件
该事件会回调给上下游应用

仅已加入上下游的企业会产生对应事件

xml请求示例：

```
<xml>
  <ToUserName><
- ![CDATA[toUser]]></ToUserName>
  <FromUserName><
- ![CDATA[sys]]></FromUserName> 
  <CreateTime>1403610513</CreateTime>
  <MsgType><
- ![CDATA[event]]></MsgType>
  <Event><
- ![CDATA[change_chain]]></Event>
  <ChangeType><
- ![CDATA[remove_corp]]></ChangeType>
  <ChainId>
- ![CDATA[xxxxxx]]</ChainId>
  <CorpIds>
    <CorpId>
- ![CDATA[xxxxxx]]</CorpId>
    <CorpId>
- ![CDATA[xxxxxx]]</CorpId>
  </CorpIds>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |ToUserName|企业微信CorpID |
 |FromUserName|此事件该值固定为sys，表示该消息由系统生成 |
 |CreateTime|消息创建时间 （整型） |
 |MsgType|消息的类型，此时固定为event |
 |Event|事件的类型，此时固定为change_chain |
 |ChangeType|变更类型，此时固定为remove_corp |
 |ChainId|上下游Id|
 |CorpIds|企业Id列表|
 |CorpId|企业Id|
