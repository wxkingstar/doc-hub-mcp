---
title: "wx.qy.getEmail"
doc_id: 16574
category_id: 91621
source_url: https://developer.work.weixin.qq.com/document/path/91621
---
最后更新：2022/08/17

### wx.qy.getEmail(Object object)

>**调用前提：**
>1、必须先调用过wx.qy.login，且session_key未过期，开发者可调用checkSession 检查当前登录态
>2、要求用户在应用可见范围内，且每次调用都需要用户同意确认
>3、仅自建应用可调用，代开发应用需要管理员勾选授权了邮箱，第三方应用不可调用

获取企业成员邮箱地址

#### 参数

##### Object object

| 参数名 | 类型 | 必填 | 说明 |
| -------- | -------- | ---- | ------------------------ |
| timeout | Number | 否 | 超时时间，单位 ms |
| success | Function | 否 | 接口调用成功的回调函数 |
| fail | Function | 否 | 接口调用失败的回调函数 |
| complete | Function | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |

###### object.success 回调函数
**参数**

**Object res**

| 参数 | 类型 | 说明 |
| ------------- | ------ | ---------------------------------------- |
| encryptedData | String | 包括敏感数据在内的完整用户信息的加密数据，详细见[加密数据解密算法](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95) |
| iv | String | 加密算法的初始向量，详细见[加密数据解密算法](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95) |

**示例代码：**

```
wx.qy.getEmail ({
 success: function(res) {
 console.log(res.encryptedData)
 console.log(res.iv)
 }
})

```

encryptedData 解密后为以下 json 结构，详见[加密数据解密算法](https://mp.weixin.qq.com/debug/wxadoc/dev/api/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95)

```
{
 "email": "EMAIL",
 "watermark":
 {
 "appid":"APPID",
 "timestamp":TIMESTAMP
 }
}
```

**encryptedData解密后json参数说明：**

| 参数 | 类型 | 说明 |
| ---------------- | ------ | ---------------------------------------- |
| email | String | 当前企业成员的邮箱地址 |
| watermark | | 数据水印，应用可以依此校验数据的有效性 |
| watermark::appid | String | 敏感数据归属的小程序appid，开发者可校验此参数与自身appid是否一致，注意此appid不是企业微信的corpid |
| watermark::timestamp | DateInt | 敏感数据获取的时间戳, 开发者可以用于数据时效性校验 |
