---
title: "获取打卡人员排班信息"
doc_id: 25721
category_id: 96500
source_url: https://developer.work.weixin.qq.com/document/path/96500
---
最后更新：2023/12/18

应用可通过此接口，获取应用可见范围内、打卡规则为“按班次上下班”规则的指定员工指定时间段内的排班信息。

**请求方式**:POST(**HTTPS**)

**请求地址:**https://qyapi.weixin.qq.com/cgi-bin/checkin/getcheckinschedulist?access_token=ACCESS_TOKEN

**请求示例**

```json
{
 "starttime": 1492617600,
 "endtime": 1492790400,
  "useridlist": [
 "james",
 "paul"
 ]
}
```

**参数说明**:

|参数|必须|类型|说明|
|:-----------|:---|:-------|:------------|
| access_token | 是 | string | 调用接口凭证，获取方式参考：[文档-获取access_token](https://work.weixin.qq.com/api/doc#90000/90135/91039 "文档")|
|useridlist|是|string[]|需要获取排班信息的用户列表（不超过100个）|
|starttime|是|uint32|获取排班信息的开始时间。Unix时间戳|
|endtime|是|uint32|获取排班信息的结束时间。Unix时间戳（与starttime跨度不超过一个月）|

**权限说明**:
调用的应用需要满足如下的权限：

| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「!!#ff0000 打卡 - 可调用接口的应用!!」中 |
|代开发应用|具有「!!#ff0000 打卡!!」权限| 
|第三方应用|具有「!!#ff0000 打卡!!」权限|
 *注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)

**调用频率**:
接口调用频率限制为60次/分钟。

**返回结果**:

```json
{
 "schedule_list":[
 {
 "userid":"james",
 "yearmonth":202011,
 "groupid":11,
      "groupname":"排班",
 "schedule":{
 "scheduleList":[
 {
 "day":25,
 "schedule_info":{
 "schedule_id":229,
 "schedule_name":"早班",
 "time_section":[
 {
 "id":1,
 "work_sec":32400,
 "off_work_sec":43200,
 "remind_work_sec":32400, "remind_off_work_sec":43200
 }
 ]
 }
 },
 {
 "day":26,
 "schedule_info":{
 "schedule_id":171,
 "schedule_name":"晚班",
 "time_section":[
 {
 "id":2,
 "work_sec":64800,
 "off_work_sec":79200,
 "remind_work_sec":64800,
 "remind_off_work_sec":79200
 }
 ]
 }
 },
 {
 "day":30,
 "schedule_info":{
 "schedule_id":0,
 "schedule_name":"休息",
 "time_section":[

 ]
 }
 }
 ]
 }
 }
 ],
 "errcode":0,
 "errmsg":"ok"
}

```

**参数说明**:

|参数|类型|说明|
|:-----------|:-------------|:----------|
|errcode|int32|返回码|
|errmsg|string|错误码描述|
|schedule_list|obj[]|排班表信息|
|schedule_list.userid|string|打卡人员userid|
|schedule_list.yearmonth|uint32|排班表月份，格式为年月，如202011|
|schedule_list.groupid|uint32|打卡规则id|
|schedule_list.groupname|string|打卡规则名|
|schedule_list.schedule|obj|个人排班信息|
|schedule_list.schedule.scheduleList|obj[]|个人排班表信息|
|schedule_list.schedule.scheduleList.day|uint32|排班日期，为表示当月第几天的数字|
|schedule_list.schedule.scheduleList.schedule_info|obj|个人当日排班信息|
|schedule_list.schedule.scheduleList.schedule_info.schedule_id|uint32|当日安排班次id，班次id也可在打卡规则中查询获得|
|schedule_list.schedule.scheduleList.schedule_info.schedule_name|string|班次名称|
|schedule_list.schedule.scheduleList.schedule_info.time_section|obj[]|班次上下班时段信息|
|schedule_list.schedule.scheduleList.schedule_info.time_section.id|uint32|时段id，为班次中某一堆上下班时间组合的id|
|schedule_list.schedule.scheduleList.schedule_info.time_section.work_sec|uint32|上班时间。距当天00:00的秒数|
|schedule_list.schedule.scheduleList.schedule_info.time_section.off_work_sec|uint32|下班时间。距当天00:00的秒数|
|schedule_list.schedule.scheduleList.schedule_info.time_section.remind_work_sec|uint32|上班提醒时间。距当天00:00的秒数|
|schedule_list.schedule.scheduleList.schedule_info.time_section.remind_off_work_sec|uint32|下班提醒时间。距当天00:00的秒数|

**错误说明**:

|错误码|说明|
|:-------------|:----------|
|301021|userid错误|
|301070|系统错误，请稍后再试|
|301075|输入参数错误|
