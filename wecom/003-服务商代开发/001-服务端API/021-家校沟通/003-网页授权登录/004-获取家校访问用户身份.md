---
title: "获取家校访问用户身份"
doc_id: 39090
category_id: 96715
source_url: https://developer.work.weixin.qq.com/document/path/96715
---
最后更新：2022/06/07

该接口用于根据code获取家长或者学生信息

**请求方式：**GET（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/school/getuserinfo?access\_token=ACCESS\_TOKEN&code=CODE
**参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ---- | ---------------------------------------- |
| access_token | 是 | 调用接口凭证 |
| code | 是 | 通过成员授权获取到的code，最大为512字节。每次成员授权带上的code将不一样，code只能使用一次，5分钟未被使用自动过期。 |
**权限说明：**
跳转的域名须完全匹配access\_token对应应用的可信域名，否则会返回50001错误。
**返回结果：**

a) 当用户为学校的家长时，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "DeviceId":"DEVICEID",
 "parent_userid": "parent_userid"
}

```
| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| DeviceId | 手机设备号(由企业微信在安装时随机生成，删除重装会改变，升级不受影响) |
| parent_userid | 家校通讯录里家长的userid|

b) 当用户为学校的学生时，返回示例如下：
```
{
 "errcode": 0,
 "errmsg": "ok",
 "DeviceId":"DEVICEID",
 "student_userid": "student_userid"
}

```
| 参数 | 说明 |
| -------- | ----------------------------------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| DeviceId | 手机设备号(由企业微信在安装时随机生成，删除重装会改变，升级不受影响) |
| student_userid | 家校通讯录里学生的userid|

**出错返回示例：**

```
{
 "errcode": 40029,
 "errmsg": "invalid code"
}

```
