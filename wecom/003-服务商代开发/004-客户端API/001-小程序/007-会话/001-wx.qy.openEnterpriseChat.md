---
title: "wx.qy.openEnterpriseChat"
doc_id: 16064
category_id: 96967
source_url: https://developer.work.weixin.qq.com/document/path/96967
---
最后更新：2020/11/05

### wx.qy.openEnterpriseChat(Object object)

>**调用前提：**
> 必须先调用过wx.qy.login，且session_key未过期，开发者可调用checkSession 检查当前登录态
> 当前成员必须在应用的可见范围。
> externalUserIds由外部联系人选人接口selectExternalContact获得。
> 如果创建的会话有微信联系人，群成员人数不能超过40人。
>在企业微信3.0.36及以上的版本，创建会话成功之后，接口会返回chatId。
>在企业微信3.0.36及以上的版本，支持传入chatId打开已有的会话，此时会忽略userIds、externalUserIds与groupName参数。注意：<font color="red">目前仅支持打开客户群</font>，若不是客户群，将报错 unsupported chat.

打开会话接口

#### 参数

##### Object object

| 参数名 | 类型 | 必填 | 说明 |
| --------------- | -------- | ------------------------------- | ---------------------------------------- |
| userIds | String | 否（userIds和externalUserIds至少填一个） | 参与会话的企业成员列表，格式为userid1;userid2;...，用分号隔开。 |
| externalUserIds | String | 否（userIds和externalUserIds至少填一个） | 参与会话的外部联系人列表，格式为userId1;userId2;…，用分号隔开。 |
| groupName | String | 否 | 会话名称。单聊时该参数传入空字符串""即可 |
| chatId | String | 否 | 打开chatId指定的会话 |
| success | Function | 否 | 接口调用成功的回调函数 |
| fail | Function | 否 | 接口调用失败的回调函数 |
| complete | Function | 否 | 接口调用结束的回调函数（调用成功、失败都会执行） |

#### 示例代码：

```js

wx.qy.openEnterpriseChat({
 // 注意：userIds和externalUserIds至少选填一个，且userIds+externalUserIds总数不能超过2000，如果externalUserIds有微信联系人，则总数不能超过40人。
 userIds: 'zhangsan;lisi;wangwu', //参与会话的企业成员列表，格式为userid1;userid2;...，用分号隔开。
 externalUserIds: 'wmSAlECoAAHrbWYDjK5u3Af13xlYAAAA;wmESkECwAAHrNWYDOK5u3Af13xlYAAAA', // 参与会话的外部联系人列表，格式为userId1;userId2;…，用分号隔开。
 groupName: '讨论组', // 必填，会话名称。单聊时该参数传入空字符串""即可。
  chatId: "CHATID", //新建会话时，chatId必须为空串
 success: function(res) {
 // 回调
   var chatId = res.chatId; //返回chatId仅在企业微信3.0.36及以后版本支持；
 },
 fail: function(res) {
 // 失败处理
 }
});

```
