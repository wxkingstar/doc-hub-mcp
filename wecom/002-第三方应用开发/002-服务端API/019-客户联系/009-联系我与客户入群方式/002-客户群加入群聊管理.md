---
title: "客户群「加入群聊」管理"
doc_id: 19243
category_id: 99546
source_url: https://developer.work.weixin.qq.com/document/path/99546
---
最后更新：2024/05/29

[TOC]

企业可通过接口配置客户群「加入群聊」的方式。配置后，客户通过扫描群二维码或点击小程序上的按钮，即可进入企业的客户群

## 权限说明
调用的应用需要满足如下的权限：

| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「[客户联系 - 可调用接口的应用](#13473/开始开发)」中 |
|代开发应用|具有!!#ff0000 企业客户权限-客户群-配置「加入群聊」二维码!!权限，且已购买!!#ff0000 「加入群聊」!!高级接口| 
|第三方应用|具有!!#ff0000 企业客户权限-客户群-配置「加入群聊」二维码!!权限，且已购买!!#ff0000 「加入群聊」!!高级接口|
  
::: tip 提示
应用仅能获取和管理由本应用创建的「加入群聊」二维码/小程序组件
:::
 *注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)

## 配置客户群进群方式

企业可调用此接口来生成并配置「加入群聊」的二维码或者小程序按钮，客户通过扫描二维码或点击小程序上的按钮，即可加入特定的客户群
如果配置的是小程序按钮，需要开发者的小程序接入[小程序插件](#19445)。

> 通过API添加的配置不会在管理端进行展示，每个企业可通过API最多配置50万个「加入群聊」(与「联系我」共用50万的额度)

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/groupchat/add_join_way?access_token=ACCESS_TOKEN

**请求示例：**
```
{
  "scene": 2,
  "remark": "aa_remark",
  "auto_create_room": 1,
  "room_base_name" : "销售客服群",
  "room_base_id" : 10,
  "chat_id_list": [
    "wrOgQhDgAAH2Yy-CTZ6POca8mlBEdaaa",
    "wrOgQhDgAALPUthpRAKvl7mgiQRwAAA"
  ],
  "state" : "klsdup3kj3s1"
}
```
**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
| scene | 是 | 场景。</br>1 - 群的小程序插件</br>2 - 群的二维码插件|
|remark|否|联系方式的备注信息，用于助记，超过30个字符将被截断 |
|auto_create_room|否|当群满了后，是否自动新建群。0-否；1-是。 默认为1|
|room_base_name|否|自动建群的群名前缀，当auto_create_room为1时有效。最长40个utf8字符|
|room_base_id|否|自动建群的群起始序号，当auto_create_room为1时有效|
|chat_id_list|是|使用该配置的客户群ID列表，最多支持5个。见[客户群ID获取方法](#19330)|
|state|否|企业自定义的state参数，用于区分不同的入群渠道。不超过30个UTF-8字符</BR>如果有设置此参数，在调用获取客户群详情接口时会返回每个群成员对应的该参数值，详见文末[附录2](#附录2：获取客户群详情，返回state参数)|

> room_base_name 和 room_base_id 两个参数配合，用于指定自动新建群的群名
> 例如，假如 room_base_name = "销售客服群", room_base_id = 10
> 那么，自动创建的第一个群，群名为“销售客服群10”；自动创建的第二个群，群名为“销售客服群11”，依次类推

**返回结果：**

```
{
  "errcode": 0,
  "errmsg": "ok",
  "config_id": "9ad7fa5cdaa6511298498f979c472aaa"
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| config_id | 配置id |

## 获取客户群进群方式配置
获取企业配置的群二维码或小程序按钮。
**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/groupchat/get_join_way?access_token=ACCESS_TOKEN

**请求示例：**
```
{
 "config_id":"9ad7fa5cdaa6511298498f979c472aaa"
}
```
**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
|config_id|是|联系方式的配置id|

**返回结果：**

```
{
  "errcode": 0,
  "errmsg": "ok",
  "join_way": {
    "config_id": "9ad7fa5cdaa6511298498f979c472aaa",
    "scene": 2,
    "remark": "aa_remark",
    "auto_create_room": 1,
    "room_base_name" : "销售客服群",
    "room_base_id" : 10,
    "chat_id_list": ["wrOgQhDgAAH2Yy-CTZ6POca8mlBEdaaa", "wrOgQhDgAALPUthpRAKvl7mgiQRw_aaa"],
    "qr_code": "http://p.qpic.cn/wwhead/nMl9ssowtibVGyrmvBiaibzDtp703nXuzpibnKtbSDBRJTLwS3ic4ECrf3ibLVtIFb0N6wWwy5LVuyvMQ22/0",
    "state" : "klsdup3kj3s1"
  }
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |
| join_way | 配置详情 |
| config_id | 新增联系方式的配置id |
| scene | 场景。</br>1 - 群的小程序插件</br>2 - 群的二维码插件|
|remark|联系方式的备注信息，用于助记，超过30个字符将被截断 |
|auto_create_room|当群满了后，是否自动新建群。0-否；1-是。 默认为1|
|room_base_name|自动建群的群名前缀，当auto_create_room为1时有效。最长40个utf8字符|
|room_base_id|自动建群的群起始序号，当auto_create_room为1时有效|
|chat_id_list|使用该配置的客户群ID列表。见[客户群ID获取方法](#19330)|
|qr_code|联系二维码的URL或[小程序插件](#19445)的URL|
|state|企业自定义的state参数，用于区分不同的入群渠道。不超过30个UTF-8字符</BR>如果有设置此参数，在调用获取客户群详情接口时会返回每个群成员对应的该参数值，详见文末[附录2](#附录2：获取客户群详情，返回state参数)|

## 更新客户群进群方式配置
更新进群方式配置信息。注意：使用覆盖的方式更新。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/groupchat/update_join_way?access_token=ACCESS_TOKEN

**请求示例：**
```
{
  "config_id": "9ad7fa5cdaa6511298498f979c4722de",
  "scene": 2,
  "remark": "bb_remark",
  "auto_create_room": 1,
  "room_base_name" : "销售客服群",
  "room_base_id" : 10,
  "chat_id_list": ["wrOgQhDgAAH2Yy-CTZ6POca8mlBEdaaa", "wrOgQhDgAALPUthpRAKvl7mgiQRw_aaa"],
  "state" : "klsdup3kj3s1"
}
```
**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
|config_id|是|企业联系方式的配置id|
| scene | 是 | 场景。</br>1 - 群的小程序插件</br>2 - 群的二维码插件|
|remark|否|联系方式的备注信息，用于助记，超过30个字符将被截断 |
|auto_create_room|否|当群满了后，是否自动新建群。0-否；1-是。 默认为1|
|room_base_name|否|自动建群的群名前缀，当auto_create_room为1时有效。最长40个utf8字符|
|room_base_id|否|自动建群的群起始序号，当auto_create_room为1时有效|
|chat_id_list|是|使用该配置的客户群ID列表，最多支持5个。见[客户群ID获取方法](#19330)|
|state|否|企业自定义的state参数，用于区分不同的入群渠道。不超过30个UTF-8字符</BR>如果有设置此参数，在调用获取客户群详情接口时会返回每个群成员对应的该参数值，详见文末[附录2](#附录2：获取客户群详情，返回state参数)|

**返回结果：**

```
{
 "errcode": 0,
 "errmsg": "ok"
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |

## 删除客户群进群方式配置
删除一个进群方式配置。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/externalcontact/groupchat/del_join_way?access_token=ACCESS_TOKEN

**请求示例：**
```
{
  "config_id":"42b34949e138eb6e027c123cba77faaa"
}
```
**参数说明：**

| 参数 | 必须 | 说明 |
| :----------- | :--- | :----------------- |
| access_token | 是 | 调用接口凭证 |
|config_id|是|企业联系方式的配置id|

**返回结果：**

``` json
{
 "errcode": 0,
 "errmsg": "ok"
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| errcode | 返回码 |
| errmsg | 对返回码的文本描述内容 |

## 附录：获取客户群详情，返回state参数

如果在配置入群方式时，配置了state参数，那么在[获取客户群详情](#19412)时，通过该方式入群的成员，会额外获取到相应的state参数。此处单独说明带state参数的返回示例。

**返回示例：**

```json
{
  "errcode": 0,
  "errmsg": "ok",
  "group_chat": {
    "chat_id": "wrOgQhDgAAMYQiS5ol9G7gK9JVAAAA",
    "name": "销售客服群",
    "owner": "ZhuShengBen",
    "create_time": 1572505490,
    "notice": "文明沟通，拒绝脏话",
    "member_list": [{
      "userid": "abel",
      "type": 1,
      "join_time": 1572505491,
      "join_scene": 3,
      "state" : "klsdup3kj3s1",
      "invitor": {
        "userid": "jack"
      }
    }, {
      "userid": "sam",
      "type": 1,
      "join_time": 1572505491,
      "join_scene": 1
    }],
    "admin_list": [{
      "userid": "sam"
    }, {
      "userid": "pony"
    }]
  }
}
```
**参数说明：**

| 参数 | 说明 |
| :------- | :---------- |
| group_chat.member_list.state|该成员入群方式对应的state参数|
