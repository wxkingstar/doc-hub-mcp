---
title: "获客助手事件通知"
doc_id: 50651
category_id: 99485
source_url: https://developer.work.weixin.qq.com/document/path/99485
---
最后更新：2024/09/14

[TOC]
## 微信客户打开获客链接事件
当微信客户通过获客链接进入成员的profile页时，企业微信将向组件的“指令回调URL”推送该事件。仅部分经营类目企业支持，当前企业是否支持可在「高级功能-获客助手」中查看该类目对应的功能是否包含「链接打开回调」。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1689171577</TimeStamp>
  <ChangeType><
- ![CDATA[open_profile]]></ChangeType>
  <LinkId><
- ![CDATA[cawcdea7783d7330c6]]></LinkId>
  <State><
- ![CDATA[STATE]]></State>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|第三方应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_aqcuisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为open_profile|
 |LinkId|点击的获客链接ID|
  |State|点击的获客链接配置的customer_channel值|

## 发起好友请求事件
当微信用户通过获客链接点击添加到通讯录，成功发起好友请求，且State非空时，企业微信将向对应组件的“指令回调URL”推送该事件。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1689171577</TimeStamp>
  <ChangeType><
- ![CDATA[friend_request]]></ChangeType>
  <LinkId><
- ![CDATA[cawcdea7783d7330c6]]></LinkId>
  <State><
- ![CDATA[STATE]]></State>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为friend_request|
 |LinkId|点击的获客链接ID|
  |State|点击的获客链接配置的customer_channel值|
  
## 添加成功事件
当微信用户通过获客链接添加外部联系人且State非空时，企业微信将向对应组件的“指令回调URL”推送该事件。

请求示例：
```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[change_external_contact]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[add_external_contact]]></ChangeType>
  <LinkId><
- ![CDATA[cawcdea7783d7330c6]]></LinkId>
  <State><
- ![CDATA[teststate]]></State>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为change_external_contact |
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为add_external_contact |
 |LinkId|添加此用户的获客链接Id|
 |State|添加此用户配置的state参数，可用于识别添加此用户的渠道|

## 成员首次收消息事件
当成员首次收到客户消息，且客户的State非空时，企业微信将向对应组件的“指令回调URL”推送该事件

请求示例：
```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[customer_start_chat]]></ChangeType>
  <LinkId><
- ![CDATA[cawcdea7783d7330c6]]></LinkId>
  <State><
- ![CDATA[STATE]]></State>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition |
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为customer_start_chat |
 |LinkId|获客链接ID|
 |State|[在获客链接中指定的customer_channel参数](#50644)，可用于识别添加此用户的渠道|

## 成员多次收消息事件
当成员第3、5、10次收到客户消息，且客户的State非空时，企业微信将向对应组件的“指令回调URL”推送该事件，该事件仅在获客助手内测期限时免费提供。

注：3次、5次、10次为近期新增统计，仅能针对上线后才第1次收到消息的客户生效。

请求示例：
```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[message_from_customer]]></ChangeType>
  <LinkId><
- ![CDATA[cawcdea7783d7330c6]]></LinkId>
  <State><
- ![CDATA[STATE]]></State>
  <ChatSeq>3</ChatSeq>
  <ChatKey><
- ![CDATA[CHATKEY]]></ChatKey>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition |
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为message_from_customer |
 |LinkId|获客链接ID|
 |State|[在获客链接中指定的customer_channel参数](#50644)，可用于识别添加此用户的渠道<font color=red>(2024年12月19号0点开始将不再回调该字段，请根据ChatKey参数查询收消息数据)</font>|
 |ChatSeq|成员收到消息的次数<font color=red>(2024年12月19号0点开始将不再回调该字段，请根据ChatKey参数查询收消息数据)</font>|
 |ChatKey|成员收消息的会话信息凭据，可通过调用[获取获客链接使用成员接受消息数据](#55201)接口获取详细的收消息信息，回调后30分钟内有效|

## 企业使用量即将耗尽事件
当获客助手的使用量低于20次时，企业微信将向对应组件的“指令回调URL”推送该事件。当企业授权的是代支付模式时，企业使用量即将耗尽时，不会回调给组件。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[balance_low]]></ChangeType>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为balance_low |

 
## 企业使用量已经耗尽事件
当获客助手的使用量已经消耗完时，企业微信将向对应组件的“指令回调URL”推送该事件。当企业授权的是代支付模式时，企业使用量已经耗尽时，不会回调给组件。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[balance_exhausted]]></ChangeType>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为balance_exhausted |
 
 ## 企业使用量增加事件
当获客助手的使用量从0变为非0时，企业微信将向对应组件的“指令回调URL”推送该事件。当企业授权的是代支付模式时，企业的获客使用量增加时，不会回调给组件。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[balance_increased]]></ChangeType>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为balance_increased |

## 服务商获客使用量即将耗尽事件
当服务商获客助手的使用量低于20次时，企业微信将向对应组件的“指令回调URL”推送该事件。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[service_balance_low]]></ChangeType>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为service_balance_low |

## 服务商获客使用量已经耗尽事件
当服务商的获客使用量已经消耗完时，企业微信将向对应组件的“指令回调URL”推送该事件。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[service_balance_exhausted]]></ChangeType>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为service_balance_exhausted |

## 消耗服务商使用量事件
当微信用户通过获客链接添加外部联系人时，若消耗的是服务商使用量，企业微信将向对应组件的“指令回调URL”推送该事件。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1689171577</TimeStamp>
  <ChangeType><
- ![CDATA[service_balance_consumed]]></ChangeType>
  <LinkId><
- ![CDATA[cawcdea7783d7330c6]]></LinkId>
  <State><
- ![CDATA[STATE]]></State>
  <OnceKey><
- ![CDATA[OnceKey]]></OnceKey>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为service_balance_consumed|
 |LinkId|获客链接ID|
  |State|获客链接配置的customer_channel值|
  |OnceKey|拼接的once_key参数|
  
## 获客链接异常事件
若链接中的成员暂时无法添加客户时，会在分配时自动跳过该成员。当链接中配置的全部成员账号异常，暂时无法继续添加客户时，企业微信将向对应组件的“指令回调URL”推送该事件，可及时调整链接配置或流量曝光策略，避免流量浪费。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[link_unavailable]]></ChangeType>
  <LinkId><
- ![CDATA[cawcdea7783d7330c6]]></LinkId>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|获客助手组件应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为link_unavailable|
  |LinkId|失效的获客链接ID|

 ## 删除获客链接事件
当授权给组件的链接被删除时，企业微信服务器会向组件的“指令回调URL”推送该事件。

事件示例：

```
<xml>
  <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
  <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
  <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
  <TimeStamp>1403610513</TimeStamp>
  <ChangeType><
- ![CDATA[delete_link]]></ChangeType>
  <LinkId><
- ![CDATA[cawcdea7783d7330c6]]></LinkId>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|第三方应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为delete_link|
  |LinkId|被删除的获客链接ID|

> [在获客链接中指定customer_channel参数](#50644)，当有客户通过对应的联系方式添加企业成员时，State即为用户配置的customer_channel参数。

## 获客链接服务商代付价格调整事件
当因授权企业类目变化引起价格变化或平台调整类目价格时，企业微信服务器会向组件的“指令回调URL”推送该事件。

事件示例：

```
<xml>
 <SuiteId><
- ![CDATA[ww4asffe99e54c0f4c]]></SuiteId>
 <AuthCorpId><
- ![CDATA[wxf8b4f85f3a794e77]]></AuthCorpId>
 <InfoType><
- ![CDATA[customer_acquisition]]></InfoType>
 <TimeStamp>1709222400</TimeStamp>
 <ChangeType><
- ![CDATA[change_price]]></ChangeType>
 <Price>30000</Price>
 <EffectiveTime>1709222400</ChangeType>
</xml>
```

参数说明：

 | 参数 | 说明 |
 |----|---- |
 |SuiteId|第三方应用ID |
 |AuthCorpId|授权企业的CorpID |
 |InfoType|固定为customer_acquisition|
 |TimeStamp|时间戳 |
 |ChangeType|此时固定为change_price|
 |Price|调整后价格，单位为分|
 |EffectiveTime|价格调整生效时间|
