---
title: "获取设备打卡数据"
doc_id: 16213
category_id: 95176
source_url: https://developer.work.weixin.qq.com/document/path/95176
---
最后更新：2024/10/31

应用可通过此接口，获取可见范围内成员在考勤设备上产生的原始打卡记录，包括未被打卡应用记录的不符合打卡规则的记录。

**请求方式：**POST（**HTTPS**）
**请求地址：**https://qyapi.weixin.qq.com/cgi-bin/hardware/get_hardware_checkin_data?access_token=ACCESS_TOKEN

**请求示例：**

```
{
 "filter_type": 1,
 "starttime": 1492617600,
 "endtime": 1492790400,
 "useridlist": ["james","paul"]
}

```

**参数说明：**

| 参数 | 必须 | 说明 |
| ------------ | ------------ |
| access_token | 是 | 调用接口凭证。 |
| filter_type | 否 |过滤类型，1表示按打卡时间过滤，2表示按设备上传打卡记录的时间过滤，默认值是1 |
| starttime | 是 |Unix时间戳，当filter_type为1时，表示打卡的开始时间；当filter_type为2时，表示设备上传记录的开始时间 |
| endtime | 是 | Unix时间戳，当filter_type为1时，表示打卡的结束时间；当filter_type为2时，表示设备上传记录的结束时间|
| useridlist | 是 | 需要获取打卡记录的用户列表|

 > 1. 获取记录时间跨度不超过一个月
 > 2. 用户列表不超过100个。若用户超过100个，请分批获取
 > 3. 获取的是通过考勤设备打卡的原始记录，不包含企业微信app手机打卡的记录
 > 4. userid无效时，忽略该参数，不报错

**权限说明**:
调用的应用需要满足如下的权限：

| 应用类型 | 权限要求 |
| -------- | ---- | 
|自建应用|配置到「!!#ff0000 打卡 - 可调用接口的应用!!」中 |
|代开发应用|暂不支持| 
|第三方应用|具有「!!#ff0000 打卡!!」权限, 且设备型号需关联该第三方应用|
 *注：* 从2023年12月1日0点起，不再支持通过系统应用secret调用接口，存量企业暂不受影响 [查看详情](https://developer.work.weixin.qq.com/document/51165)

**返回结果 ：**

```
{
 "errcode":0,
 "errmsg":"ok",
 "checkindata": [{
    "userid" : "james",
    "checkin_time" : 1492617610, 
    "device_sn" : "xxxxx", 
    "device_name": "xxxx门店"
  },{
    "userid" : "paul",
    "checkin_time" : 1492617620, 
    "device_sn" : "yyyy", 
    "device_name": "yyyy门店"
  }]
}
```
**参数说明：**

| 参数 | 说明 
| ------------ | ------------ |
| userid | 用户id |
| checkin_time | 打卡时间。Unix时间戳|
| device_sn | 打卡设备的sn|
| device_name | 打卡设备名 |
