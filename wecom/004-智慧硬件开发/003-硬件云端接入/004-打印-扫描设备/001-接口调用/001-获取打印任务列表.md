---
title: "获取打印任务列表"
doc_id: 42204
category_id: 96407
source_url: https://developer.work.weixin.qq.com/document/path/96407
---
最后更新：2024/08/20

本接口适用于云端接入打印机获取打印任务列表。

>1.支持分页拉取，分页获取任务时，需填写offset和limit参数，打印机可以根据自身的情况决定分页大小。默认按任务提交时间排序，任务最多存储7天。
2.同时支持按特定jobid来获取任务，jobid_list不填或者填为空调数组则忽略该参数，填写jobid_list时，接口自动忽略status、cursor、offset、limit、begin_time、end_time等参数。

**请求方式：**POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/openhw/device/get_printer_job_list?device_access_token=DEVICE_ACCESS_TOKEN
**请求包体：**

```
{
    "open_userid": "zhangsan",
    "status": 0,
    "cursor": 0,
    "limit": 10,
    "begin_time":123,
    "end_time":456,
    "jobid_list":["aa","bb","cc"]
}
```

**参数说明：**
 
| 参数名 | 是否必须 | 类型 | 描述 |
| ---------------- | ---- | ---------- | ---------------------------------------- |
| device_access_token | 是 | string | device_access_token ,获取方式见[获取设备调用凭证](#40436) |
| open_userid | 是 | String(40) | 成员id |
| cursor | 否 | string | 请求偏移量 |
| limit | 否 | Uint32 | 本次请求任务数，不填默认为100，最大为200|
| jobid_list | 否 | Array(String)|任务id列表 ，最大支持传入200个jobid|
|status| 否| Uint32 | 任务状态：<br/> 0：获取未打印的任务；<br/> 1：获取打印成功的任务；<br/>2：获取打印失败的任务；<br/>不填则获取所有任务 |
|begin_time|否|uint32|打印任务起始时间|
|end_time|否|uint32|打印任务结束时间|

**返回结果：** 

```
{
 "printer_job_list": [
 {
 "open_userid": "xxxxx",
 "createtime": 12345678,
 "submitted": 1,
 "status": 0,
 "errcode": 0,
 "errmsg": "ok",
 "doc_name": "aa.doc",
 "doc_size": 3317,
 "jobid": "job_id_xxxxx",
 "setting_list": [
 {
 "key": "纸张大小",
 "value": [
 "A4"
 ]
 },
 {
 "key": "单双面",
 "value": [
 "单面"
 ]
 }
 ]
 },
 {
 "open_userid": "yyyyy",
 "createtime": 12345678,
 "submitted": 0,
 "state": "machine_02",
 "status": 2,
 "errcode": 1,
 "errmsg": "打印机缺纸",
 "jobid": "job_id_yyyyy",
 "doc_name": "bb.pdf",
 "doc_size": 3317,
 "setting_list": [
 {
 "key": "纸张大小",
 "value": [
 "A4"
 ]
 },
 {
 "key": "单双面",
 "value": [
 "单面"
 ]
 }
 ]
 }
 ],
 "errcode": 0,
 "errmsg": "ok",
 "next_cursor": "ssdfasdfa"
}
```

**参数说明：** 

| 参数名 | 描述 |
| ----------- | ----------- |
| errcode | 错误码 |
| errmsg | 错误码描述 |
|printer_job_list | 打印任务列表 |
|createtime | 任务提交时间 |
|submitted | 表示该任务是否扫码后提交：<br/> 0：否 <br/> 1：是 |
|open_userid | 成员id，表示该任务是谁提交的 |
|status | 任务状态：<br/> 0：未打印<br/> 1：打印成功<br/> 2：打印失败 |
|printer_job_list：errcode | 该任务错误码 |
|printer_job_list：errmsg | 该任务的错误描述 |
|jobid | 任务id |
|doc_name | 文档名称 |
|doc_size | 文档大小，单位字节，仅当printer_format为jpg时可以忽略该参数 |
|setting_list|该任务的一些设置，所有设置都是key-value对|
|key|设置项名称，字符串类型，utf8编码|
|value|设置项的值，字符串数组，utf8编码，可以表示复选值|
|next_cursor|请求偏移量，当没有next_cursor时表示列表已拉完|
