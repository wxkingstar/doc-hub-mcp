---
title: "上报设备固件升级结果"
doc_id: 40292
category_id: 95999
source_url: https://developer.work.weixin.qq.com/document/path/95999
---
最后更新：2023/03/16

当接口[设备状态](#40186)上报的当前固件版本与可升级固件版本号不相同时，管理员可在企业微信发起固件升级。当管理员选择固件升级后，企业微信云端会触发[固件升级回调](#40339)，硬件厂商在收到回调后，升级设备固件，并通过此接口上报升级结果。升级完成后，请立即上报升级结果，否则影响用户使用体验。

**请求方式：**POST（**HTTPS**）
**请求地址：** https://qyapi.weixin.qq.com/cgi-bin/openhw/device/report_firmware_upgrade_result?device_access_token=DEVICE_ACCESS_TOKEN
**请求包体：**

```
{
  "oper_id":"OPER_ID",
  "errcode":1,
  "errmsg":"设备离线",
  "cur_version":"CUR_VERSION"
}
```

**参数说明：**
 
| 参数名 | 是否必须 | 类型 | 描述 |
| ------ | ---- | ------ | ---------------- |
| device_access_token | 是 | string | device_access_token ,获取方式见[获取设备调用凭证](#40436) |
| oper_id | 是 | string | 固件升级事件中携带的操作id |
| errcode | 是 | uint32 | 固件升级结果，0-升级成功，1-设备离线，其他失败-厂商自定义 |
| errmsg | 否 | string | 固件升级结果描述，升级失败时请简短描述失败原因 |
| cur_version | 是 | string | 设备当前固件版本 |

**返回结果：** 

```
{
  "errcode": 0,
  "errmsg": "ok"
}
```

**参数说明：** 

| 参数名 | 描述 |
| ------------ | ----------- |
| errcode | 错误码 |
| errmsg | 错误码描述 |

>errcode非0则必报错升级失败
>errcode为0且上报版本号与升级前的版本不一致，才会跳转成功
>erccode为0但上报版本号与升级前一直，仍会停留在升级中，这种情况需要检查数据构造是否合理
