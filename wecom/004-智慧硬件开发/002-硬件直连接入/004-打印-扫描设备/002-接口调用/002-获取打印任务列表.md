---
title: "获取打印任务列表"
doc_id: 15911
category_id: 94010
source_url: https://developer.work.weixin.qq.com/document/path/94010
---
最后更新：2019/09/11

获取打印任务列表
>1.支持分页拉取，分页获取任务时，需填写offset和limit参数，打印机可以根据自身的情况决定分页大小。默认按任务提交时间排序，任务最多存储7天。
2.同时支持按特定jobid来获取任务，jobid_list不填或者填为空调数组则忽略该参数，填写jobid_list时，接口自动忽略offset、limit、status等参数。

**请求包体：**

```
{
   "cmd":"printer/get_job_list",
   "headers":
  {
    "req_id":"xxxxx"
  },
  "body":
  {
    "userid": "zhangsan",
    "status": 0,
    "offset": 0,
    "limit": 10,
    "jobid_list":
    [
    "aa",
    "bb",
    "cc"
    ]
  }
}
```

**参数说明：**
 
| 参数名 | 是否必须 | 类型 | 描述 |
| ---------------- | ---- | ---------- | ---------------------------------------- |
| req_id | 是 | String | 请求的id，自行保证不会重复即可 |
| userid | 否 | String(40) | 成员id |
| offset | 否 | Uint32 | 下载偏移量 |
|limit | 否 | Uint32 | 本次请求任务数|
|jobid_list | 否 | Array(String)|任务id列表 |
|status| 否| Uint32 | 任务状态：<br/> 0：获取未打印的任务；<br/> 1：获取打印成功的任务；<br/>2：获取打印失败的任务；<br/>不填则获取所有任务 |

**返回结果：** 

```
{
  "headers": {
     "req_id": "xxxx"
   },
  "body":
  {
    "printer_job_list":
    [
      {
        "userid"："zhangsan"
        "createtime"：12345678,
        "submitted"：1,
        "page_size":4,
        "state":"machine_01",
        "status":0,
        "errcode":0,
        "errmsg":"ok",
        "doc_name":"aa.doc",
        "doc_size": 3317,
        "jobid":"job_id_xxxxx",
        "setting_list":
        [
          {
            "key":"纸张大小",
            "value":["A4"]
          },
          {
            "key":"单双面",
            "value":["单面"]
          }
        ]，
        "printer_format":"pdf"
      },
      {
        "userid"："lisi",
        "createtime"：12345678,
        "submitted"：0,
        "state":"machine_02",
        "status":2,
        "errcode":1,
        "errmsg":"打印机缺纸",
        "jobid":"job_id_yyyyy",
        "doc_name":"bb.pdf",
        "doc_size": 3317,
        "setting_list":
        [
          {
            "key":"纸张大小",
            "value":["A4"]
          },
          {
            "key":"单双面",
            "value":["单面"]
          }
        ],
        "printer_format":"jpg",
        "pic_file_list":
        {
          "size":6,
          "item":[
            {
              "idx":0, 
              "pic_size":10240
            },
            {
              "idx":1, 
              "pic_size":635
            },
            {
              "idx":2, 
              "pic_size":11111
            }
            {
              "idx":3, 
              "pic_size":35374
            }
          ]
        }
      }
    ]
  }
   "errcode": 0,
   "errmsg": "ok"
}
```

**参数说明：** 

| 参数名 | 描述 |
| ----------- | ----------- |
| req_id | 透传请求的req_id |
| errcode | 错误码 |
| errmsg | 错误码描述 |
|printer_job_list | 打印任务列表 |
|createtime | 任务提交时间 |
|submitted | 表示该任务是否扫码后提交：<br/> 0：否 <br/> 1：是 |
|userid | 成员id，表示该任务是谁提交的 |
|page_size | 页数，仅当printer_format为jpg时可以忽略该参数 |
|status | 任务状态：<br/> 0：获取未打印的任务<br/> 1：获取打印成功的任务<br/> 2：获取打印失败的任务 |
|printer_job_list：errcode | 该任务错误码 |
|printer_job_list：errmsg | 该任务的错误描述 |
|jobid | 任务id |
|doc_name | 文档名称 |
|doc_size | 文档大小，单位字节，仅当printer_format为jpg时可以忽略该参数 |
|state | 打印机二维码中需要透传回去的参数 |
| printer_format | 本任务的格式，目前仅支持pdf和jpg |
|pic_file_list | 每一页的文件，仅当printer_format为jpg时有效|
|pic_file_list: size | 数组大小|
|pic_file_list: item | 数组中的元素|
|idx | 每个元素的索引，目前排序与文件页码相同（索引从0开始计数）|
|pic_size | 每个元素的文件大小，单位字节|
|setting_list|该任务的一些设置，所有设置都是key-value对|
|key|设置项名称，字符串类型，utf8编码|
|value|设置项的值，字符串数组，utf8编码，可以表示复选值|
