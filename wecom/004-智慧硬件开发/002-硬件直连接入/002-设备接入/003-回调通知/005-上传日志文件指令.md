---
title: "上传日志文件指令"
doc_id: 15855
category_id: 91474
source_url: https://developer.work.weixin.qq.com/document/path/91474
---
最后更新：2022/09/16

通知当前设备将相关日志上传至企业微信后台。

**指令包体：**

```
{
  "cmd" : "push_fetch_log",
  "headers": {
     "req_id" : "xxxx"
   },
  "body": {
   "hint":"device_log/20190101"
   }
}
```

**参数说明：**

| 参数名 | 类型 | 描述 |
| ------------ | ----------- | ---------------------------------------- |
| req_id | string | 透传请求的req_id |
| cmd | string | 指令号，此处固定为push_fetch_log |
| hint | string |服务商调用“[上传设备日志](#15859)”向设备发送上传数据指令时可附带一个hint参数,用于告知设备上传具体何种信息，企业微信后台将在下发指令时携带此参数|

>企业微信后台只负责将hint透传到设备，不会去解析hint，服务商可根据实际业务需求来决定是否要处理这个参数。

## 日志建议：
###** 必要信息：**
  时间戳，至少要有秒级（最好可以有毫秒级）
   如果是北京时间则直接显示 年月日时分秒即可
   如果是utc时间可以加上T Z等参数如 2020-01-13T16:00:00.000Z
  
### **选填信息:**
  危害等级 info < warning < error < fatal
  函数名/函数行号
  进程号/线程号
>注: 选填信息主要为了方便厂商自查问题，可自定义

### **企业微信下发hint：**
#### 1. op_logs: 关键日志
 设备卡死
 设备断网
 内存不足
 cpu异常，如占用率高等
 时钟不对齐
 读写数据库失败
>注: 关键日志主要为了方便厂商自查问题，可自定义
  
#### 2. wechat：通信日志
 websocket创建失败/成功
 请求接口完整的req
 接口返回的完整resp
  
#### 3. main：核心业务的日志
 绑定
 解绑
 管理员登入（可选）
 登记人脸/指纹 必要信息 userid, 时间点, 登记是否成功
 考勤
 人脸识别失败/成功

完整的设备报警和日志上传流程可参考 [报警和日志上报流程说明](#15963)
