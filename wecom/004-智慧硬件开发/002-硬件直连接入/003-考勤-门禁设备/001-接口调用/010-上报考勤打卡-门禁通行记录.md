---
title: "上报考勤打卡/门禁通行记录"
doc_id: 15362
category_id: 93985
source_url: https://developer.work.weixin.qq.com/document/path/93985
---
最后更新：2022/09/16

上报 打卡/通过门禁 数据，若上传失败可以在设备上缓存打卡数据一段时间再重试。打卡/通过门禁 数据最多200条。

**请求包体：**

```
{
 "cmd":"checkin",
 "headers":
  {
    "req_id":"xxxxx"
  },
  "body":
  {
     "checkin_data": [
      {
        "userid": "x1",
        "user_type":0,
        "timestamp": 12345
      },
      {
        "userid": "x2",
        "user_type":0,
        "timestamp": 12345
      },
      {
        "userid": "x3",
        "user_type":1,
        "timestamp": 12345,
        "pass_type":1,
        "pass_method":1
      }
    ]
  }
}
```

**参数说明：**
 
| 参数名 | 是否必须 | 类型 | 描述 |
| ------------ | ---- | ----------- | --------------------------- |
| req_id | 是 | string | 请求的id，自行保证不会重复即可 |
| checkin_data | 是 | Array(data) | |
| timestamp | 是 | Uint32 | Unix时间戳(秒),早于2018年的timestamp会被忽略，即既不入存储，也不报错 |
| userid | 是 | String | 成员id。当为访客userid时，参见[访客userid规则说明](#15401) |
| user_type | 否 | Uint32 | 成员的类型： 0：企业员工 1：访客 2：学生 不填则默认值为0 |
| pass_type | 否 | Uint32 | 门禁需要填写通行类型：1：进门 2：出门 3: 无法识别方向 若不填则不会产生门禁通行记录 | 
| pass_method | 否 | Uint32 | 门禁需要填写通行方法：1：人脸 2：二维码 3：远程开门 4：指纹 5: 企业微信扫描设备二维码 6：设备扫描手机二维码|
**返回结果：** 

```
{
  "headers": 
  {
     "req_id" : "xxxx"
  },
  "body": 
  {
 "fail_list" :
    [
      {
        "userid":"x2",
        "user_type":0,
        "timestamp":12345
      }
    ]
  },
  "errcode": 0,
  "errmsg": "ok"
}
```

**参数说明：**

| 参数名 | 描述 |
| --------- | -----------------------------------------------------------------|
| req_id | 透传请求的req_id |
| user_type | 成员的类型： 0：企业员工 1：访客 2：学生 不填则默认值为0 |
| pass_type | 访客需要填写通行类型：1：进门 2：出门 |
| errcode | 错误码 |
| errmsg | 错误码描述 |
| fail_list | 上传失败的记录 |

>注：目前仅处理员工打卡数据，访客/学生数据暂时忽略，但是后续企业微信可能会存储并展示，设备可以先把访客/学生数据上报
